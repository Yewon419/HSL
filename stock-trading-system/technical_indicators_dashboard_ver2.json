{"overwrite":true,"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":1,"id":null,"links":[],"liveNow":false,"panels":[{"datasource":"PostgreSQL","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"Price (KRW)","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"tooltip":false,"viz":false,"legend":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null}]},"unit":"currencyKRW"},"overrides":[{"matcher":{"id":"byName","options":"volume"},"properties":[{"id":"custom.drawStyle","value":"bars"},{"id":"custom.fillOpacity","value":50},{"id":"custom.axisPlacement","value":"right"},{"id":"custom.axisLabel","value":"Volume"},{"id":"unit","value":"short"}]},{"matcher":{"id":"byName","options":"SMA 20"},"properties":[{"id":"color","value":{"fixedColor":"blue","mode":"fixed"}},{"id":"custom.lineWidth","value":2}]},{"matcher":{"id":"byName","options":"SMA 50"},"properties":[{"id":"color","value":{"fixedColor":"orange","mode":"fixed"}},{"id":"custom.lineWidth","value":2}]},{"matcher":{"id":"byName","options":"SMA 200"},"properties":[{"id":"color","value":{"fixedColor":"red","mode":"fixed"}},{"id":"custom.lineWidth","value":2}]},{"matcher":{"id":"byName","options":"볼린저 상한"},"properties":[{"id":"color","value":{"fixedColor":"red","mode":"fixed"}},{"id":"custom.lineStyle","value":{"dash":[10,10],"fill":"dash"}}]},{"matcher":{"id":"byName","options":"볼린저 중간"},"properties":[{"id":"color","value":{"fixedColor":"purple","mode":"fixed"}},{"id":"custom.lineStyle","value":{"dash":[5,5],"fill":"dash"}}]},{"matcher":{"id":"byName","options":"볼린저 하한"},"properties":[{"id":"color","value":{"fixedColor":"blue","mode":"fixed"}},{"id":"custom.lineStyle","value":{"dash":[10,10],"fill":"dash"}}]},{"matcher":{"id":"byName","options":"EMA 12"},"properties":[{"id":"color","value":{"fixedColor":"green","mode":"fixed"}},{"id":"custom.lineWidth","value":2},{"id":"custom.lineStyle","value":{"dash":[5,5],"fill":"dash"}}]},{"matcher":{"id":"byName","options":"EMA 26"},"properties":[{"id":"color","value":{"fixedColor":"yellow","mode":"fixed"}},{"id":"custom.lineWidth","value":2},{"id":"custom.lineStyle","value":{"dash":[5,5],"fill":"dash"}}]},{"matcher":{"id":"byName","options":"전환선"},"properties":[{"id":"color","value":{"fixedColor":"cyan","mode":"fixed"}},{"id":"custom.lineWidth","value":2}]},{"matcher":{"id":"byName","options":"기준선"},"properties":[{"id":"color","value":{"fixedColor":"magenta","mode":"fixed"}},{"id":"custom.lineWidth","value":2}]},{"matcher":{"id":"byName","options":"후행스팬"},"properties":[{"id":"color","value":{"fixedColor":"orange","mode":"fixed"}},{"id":"custom.lineWidth","value":1},{"id":"custom.lineStyle","value":{"dash":[3,3],"fill":"dash"}}]},{"matcher":{"id":"byName","options":"구름대 상단(상승)"},"properties":[{"id":"color","value":{"fixedColor":"lightgreen","mode":"fixed"}},{"id":"custom.lineWidth","value":1},{"id":"custom.fillBelowTo","value":"구름대 하단(상승)"},{"id":"custom.fillOpacity","value":30}]},{"matcher":{"id":"byName","options":"구름대 하단(상승)"},"properties":[{"id":"color","value":{"fixedColor":"lightgreen","mode":"fixed"}},{"id":"custom.lineWidth","value":1},{"id":"custom.fillOpacity","value":0}]},{"matcher":{"id":"byName","options":"구름대 상단(하락)"},"properties":[{"id":"color","value":{"fixedColor":"lightcoral","mode":"fixed"}},{"id":"custom.lineWidth","value":1},{"id":"custom.fillBelowTo","value":"구름대 하단(하락)"},{"id":"custom.fillOpacity","value":30}]},{"matcher":{"id":"byName","options":"구름대 하단(하락)"},"properties":[{"id":"color","value":{"fixedColor":"lightcoral","mode":"fixed"}},{"id":"custom.lineWidth","value":1},{"id":"custom.fillOpacity","value":0}]}]},"gridPos":{"h":10,"w":24,"x":0,"y":0},"id":1,"options":{"legend":{"calcs":["lastNotNull","max","min","mean"],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"targets":[{"format":"time_series","rawSql":"SELECT \n  sp.date AS time,\n  sp.open_price AS open,\n  sp.high_price AS high,\n  sp.low_price AS low,\n  sp.close_price AS close,\n  sp.volume,\n  -- SMA 지표들\n  (SELECT (value->>'sma_20')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'SMA' AND iv.date = sp.date) AS \"SMA 20\",\n  (SELECT (value->>'sma_50')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'SMA' AND iv.date = sp.date) AS \"SMA 50\",\n  (SELECT (value->>'sma_200')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'SMA' AND iv.date = sp.date) AS \"SMA 200\",\n  -- EMA 지표들 (Airflow에서 계산된 값)\n  (SELECT (value->>'ema_12')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'EMA' AND iv.date = sp.date) AS \"EMA 12\",\n  (SELECT (value->>'ema_26')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'EMA' AND iv.date = sp.date) AS \"EMA 26\",\n  -- 볼린저 밴드 (NO 선택시에만 표시)\n  CASE WHEN '$show_bb' = '0' THEN (SELECT (value->>'bb_upper')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'BB' AND iv.date = sp.date) END AS \"볼린저 상한\",\n  CASE WHEN '$show_bb' = '0' THEN (SELECT (value->>'bb_middle')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'BB' AND iv.date = sp.date) END AS \"볼린저 중간\",\n  CASE WHEN '$show_bb' = '0' THEN (SELECT (value->>'bb_lower')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'BB' AND iv.date = sp.date) END AS \"볼린저 하한\",\n  -- 일목균형표 구성요소 (Airflow에서 계산된 값)\n  (SELECT (value->>'tenkan_sen')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) AS \"전환선\",\n  (SELECT (value->>'kijun_sen')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) AS \"기준선\",\n  (SELECT (value->>'chikou_span')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) AS \"후행스팬\",\n  -- 구름대 (상승): 선행스팬 A가 위에 있을 때\n  CASE WHEN (SELECT (value->>'senkou_span_a')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) >= (SELECT (value->>'senkou_span_b')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) THEN (SELECT (value->>'senkou_span_a')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) END AS \"구름대 상단(상승)\",\n  CASE WHEN (SELECT (value->>'senkou_span_a')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) >= (SELECT (value->>'senkou_span_b')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) THEN (SELECT (value->>'senkou_span_b')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) END AS \"구름대 하단(상승)\",\n  -- 구름대 (하락): 선행스팬 B가 위에 있을 때\n  CASE WHEN (SELECT (value->>'senkou_span_b')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) > (SELECT (value->>'senkou_span_a')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) THEN (SELECT (value->>'senkou_span_b')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) END AS \"구름대 상단(하락)\",\n  CASE WHEN (SELECT (value->>'senkou_span_b')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) > (SELECT (value->>'senkou_span_a')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) THEN (SELECT (value->>'senkou_span_a')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) END AS \"구름대 하단(하락)\"\nFROM stock_prices sp\nWHERE sp.ticker = '$ticker'\n  AND sp.date >= $__timeFrom()\n  AND sp.date <= $__timeTo()\nORDER BY sp.date","refId":"A"}],"title":"Candlestick Chart - $ticker","type":"candlestick"},{"datasource":"PostgreSQL","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[{"matcher":{"id":"byName","options":"Histogram"},"properties":[{"id":"custom.drawStyle","value":"bars"},{"id":"custom.fillOpacity","value":50}]},{"matcher":{"id":"byName","options":"Signal"},"properties":[{"id":"color","value":{"fixedColor":"orange","mode":"fixed"}},{"id":"custom.lineWidth","value":2}]}]},"gridPos":{"h":6,"w":12,"x":0,"y":10},"id":2,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"targets":[{"format":"time_series","rawSql":"SELECT \n  date AS time,\n  (value->>'macd')::numeric AS \"MACD\",\n  (value->>'macd_signal')::numeric AS \"Signal\",\n  (value->>'macd_histogram')::numeric AS \"Histogram\"\nFROM indicator_values iv\nJOIN indicator_definitions id ON iv.indicator_id = id.id\nWHERE iv.ticker = '$ticker'\n  AND id.code = 'MACD'\n  AND date >= $__timeFrom()\n  AND date <= $__timeTo()\nORDER BY date","refId":"A"}],"title":"MACD","type":"timeseries"},{"datasource":"PostgreSQL","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":10,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"yellow","value":30},{"color":"green","value":40},{"color":"green","value":60},{"color":"yellow","value":70},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":6,"w":12,"x":12,"y":10},"id":3,"options":{"legend":{"calcs":["last"],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"targets":[{"format":"time_series","rawSql":"SELECT \n  date AS time,\n  (value->>'rsi')::numeric AS \"RSI\"\nFROM indicator_values iv\nJOIN indicator_definitions id ON iv.indicator_id = id.id\nWHERE iv.ticker = '$ticker'\n  AND id.code = 'RSI'\n  AND date >= $__timeFrom()\n  AND date <= $__timeTo()\nORDER BY date","refId":"A"}],"title":"RSI","type":"timeseries"},{"datasource":"PostgreSQL","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"never","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"transparent","value":null}]}},"overrides":[{"matcher":{"id":"byName","options":"%K (Fast Line)"},"properties":[{"id":"color","value":{"fixedColor":"blue","mode":"fixed"}},{"id":"custom.lineWidth","value":3},{"id":"displayName","value":"%K (빠른선)"}]},{"matcher":{"id":"byName","options":"%D (Slow Line)"},"properties":[{"id":"color","value":{"fixedColor":"red","mode":"fixed"}},{"id":"custom.lineWidth","value":3},{"id":"displayName","value":"%D (느린선)"}]}]},"gridPos":{"h":8,"w":12,"x":0,"y":16},"id":4,"options":{"legend":{"calcs":[],"displayMode":"table","placement":"bottom","showLegend":true,"values":["current","min","max"]},"tooltip":{"mode":"multi","sort":"none"}},"targets":[{"format":"time_series","rawSql":"SELECT \n  date AS time,\n  (value->>'stoch_k')::numeric AS \"%K (Fast Line)\",\n  (value->>'stoch_d')::numeric AS \"%D (Slow Line)\"\nFROM indicator_values iv\nJOIN indicator_definitions id ON iv.indicator_id = id.id\nWHERE iv.ticker = '$ticker'\n  AND id.code = 'STOCH'\n  AND date >= $__timeFrom()\n  AND date <= $__timeTo()\n  AND (value->>'stoch_k') IS NOT NULL\n  AND (value->>'stoch_d') IS NOT NULL\nORDER BY date","refId":"A"}],"title":"Stochastic Oscillator (%K 빠른선 & %D 느린선)","type":"timeseries"},{"datasource":"PostgreSQL","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":2,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":true,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"currencyKRW"},"overrides":[{"matcher":{"id":"byName","options":"Upper Band"},"properties":[{"id":"color","value":{"fixedColor":"red","mode":"fixed"}},{"id":"custom.lineStyle","value":{"dash":[10,10],"fill":"dash"}}]},{"matcher":{"id":"byName","options":"Middle Band"},"properties":[{"id":"color","value":{"fixedColor":"purple","mode":"fixed"}},{"id":"custom.lineStyle","value":{"dash":[5,5],"fill":"dash"}}]},{"matcher":{"id":"byName","options":"Lower Band"},"properties":[{"id":"color","value":{"fixedColor":"blue","mode":"fixed"}},{"id":"custom.lineStyle","value":{"dash":[10,10],"fill":"dash"}}]},{"matcher":{"id":"byName","options":"EMA 12"},"properties":[{"id":"color","value":{"fixedColor":"lime","mode":"fixed"}},{"id":"custom.lineWidth","value":2},{"id":"custom.lineStyle","value":{"dash":[8,4],"fill":"dash"}}]},{"matcher":{"id":"byName","options":"EMA 26"},"properties":[{"id":"color","value":{"fixedColor":"gold","mode":"fixed"}},{"id":"custom.lineWidth","value":2},{"id":"custom.lineStyle","value":{"dash":[8,4],"fill":"dash"}}]},{"matcher":{"id":"byName","options":"전환선"},"properties":[{"id":"color","value":{"fixedColor":"cyan","mode":"fixed"}},{"id":"custom.lineWidth","value":2}]},{"matcher":{"id":"byName","options":"기준선"},"properties":[{"id":"color","value":{"fixedColor":"magenta","mode":"fixed"}},{"id":"custom.lineWidth","value":2}]},{"matcher":{"id":"byName","options":"후행스팬"},"properties":[{"id":"color","value":{"fixedColor":"orange","mode":"fixed"}},{"id":"custom.lineWidth","value":1},{"id":"custom.lineStyle","value":{"dash":[3,3],"fill":"dash"}}]},{"matcher":{"id":"byName","options":"구름대 상단(상승)"},"properties":[{"id":"color","value":{"fixedColor":"lightgreen","mode":"fixed"}},{"id":"custom.lineWidth","value":1},{"id":"custom.fillBelowTo","value":"구름대 하단(상승)"},{"id":"custom.fillOpacity","value":30}]},{"matcher":{"id":"byName","options":"구름대 하단(상승)"},"properties":[{"id":"color","value":{"fixedColor":"lightgreen","mode":"fixed"}},{"id":"custom.lineWidth","value":1},{"id":"custom.fillOpacity","value":0}]},{"matcher":{"id":"byName","options":"구름대 상단(하락)"},"properties":[{"id":"color","value":{"fixedColor":"lightcoral","mode":"fixed"}},{"id":"custom.lineWidth","value":1},{"id":"custom.fillBelowTo","value":"구름대 하단(하락)"},{"id":"custom.fillOpacity","value":30}]},{"matcher":{"id":"byName","options":"구름대 하단(하락)"},"properties":[{"id":"color","value":{"fixedColor":"lightcoral","mode":"fixed"}},{"id":"custom.lineWidth","value":1},{"id":"custom.fillOpacity","value":0}]},{"matcher":{"id":"byName","options":"open"},"properties":[{"id":"custom.hideFrom","value":{"legend":true,"tooltip":false,"viz":true}}]},{"matcher":{"id":"byName","options":"high"},"properties":[{"id":"custom.hideFrom","value":{"legend":true,"tooltip":false,"viz":true}}]},{"matcher":{"id":"byName","options":"low"},"properties":[{"id":"custom.hideFrom","value":{"legend":true,"tooltip":false,"viz":true}}]},{"matcher":{"id":"byName","options":"close"},"properties":[{"id":"color","value":{"fixedColor":"red","mode":"fixed"}},{"id":"custom.lineWidth","value":2},{"id":"displayName","value":"주가"}]}]},"gridPos":{"h":8,"w":12,"x":12,"y":16},"id":5,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"multi","sort":"none"}},"targets":[{"format":"time_series","rawSql":"SELECT \n  sp.date AS time,\n  sp.open_price AS open,\n  sp.high_price AS high,\n  sp.low_price AS low,\n  sp.close_price AS close,\n  -- 볼린저 밴드 (NO 선택시에만 표시)\n  CASE WHEN '$show_bb' = '0' THEN (SELECT (value->>'bb_upper')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'BB' AND iv.date = sp.date) END AS \"Upper Band\",\n  CASE WHEN '$show_bb' = '0' THEN (SELECT (value->>'bb_middle')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'BB' AND iv.date = sp.date) END AS \"Middle Band\",\n  CASE WHEN '$show_bb' = '0' THEN (SELECT (value->>'bb_lower')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'BB' AND iv.date = sp.date) END AS \"Lower Band\",\n  -- EMA 이동평균선\n  (SELECT (value->>'ema_12')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'EMA' AND iv.date = sp.date) AS \"EMA 12\",\n  (SELECT (value->>'ema_26')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'EMA' AND iv.date = sp.date) AS \"EMA 26\",\n  -- 일목균형표\n  (SELECT (value->>'tenkan_sen')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) AS \"전환선\",\n  (SELECT (value->>'kijun_sen')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) AS \"기준선\",\n  (SELECT (value->>'chikou_span')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) AS \"후행스팬\",\n  -- 구름대 (상승): 선행스팬 A가 위에 있을 때\n  CASE WHEN (SELECT (value->>'senkou_span_a')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) >= (SELECT (value->>'senkou_span_b')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) THEN (SELECT (value->>'senkou_span_a')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) END AS \"구름대 상단(상승)\",\n  CASE WHEN (SELECT (value->>'senkou_span_a')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) >= (SELECT (value->>'senkou_span_b')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) THEN (SELECT (value->>'senkou_span_b')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) END AS \"구름대 하단(상승)\",\n  -- 구름대 (하락): 선행스팬 B가 위에 있을 때\n  CASE WHEN (SELECT (value->>'senkou_span_b')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) > (SELECT (value->>'senkou_span_a')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) THEN (SELECT (value->>'senkou_span_b')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) END AS \"구름대 상단(하락)\",\n  CASE WHEN (SELECT (value->>'senkou_span_b')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) > (SELECT (value->>'senkou_span_a')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) THEN (SELECT (value->>'senkou_span_a')::numeric FROM indicator_values iv JOIN indicator_definitions id ON iv.indicator_id = id.id WHERE iv.ticker = '$ticker' AND id.code = 'ICHIMOKU' AND iv.date = sp.date) END AS \"구름대 하단(하락)\"\nFROM stock_prices sp\nWHERE sp.ticker = '$ticker'\n  AND sp.date >= $__timeFrom()\n  AND sp.date <= $__timeTo()\nORDER BY sp.date","refId":"A"}],"title":"캔들차트 + 볼린저 밴드 + 이동평균선 + 일목균형표","type":"timeseries"},{"datasource":"PostgreSQL","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":50000},{"color":"red","value":100000}]},"unit":"currencyKRW"},"overrides":[]},"gridPos":{"h":4,"w":5,"x":0,"y":24},"id":6,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"titleSize":12,"valueSize":18},"textMode":"auto"},"pluginVersion":"10.2.0","targets":[{"format":"table","rawSql":"SELECT current_price FROM v_indicator_summary WHERE ticker = '$ticker' LIMIT 1","refId":"A"}],"title":"현재가","type":"stat"},{"datasource":"PostgreSQL","fieldConfig":{"defaults":{"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"yellow","value":30},{"color":"green","value":40},{"color":"green","value":60},{"color":"yellow","value":70},{"color":"red","value":80}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":5,"x":5,"y":24},"id":9,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"titleSize":12,"valueSize":18},"textMode":"auto"},"pluginVersion":"10.2.0","targets":[{"format":"table","rawSql":"SELECT ROUND(rsi, 2) as value FROM v_indicator_summary WHERE ticker = '$ticker' LIMIT 1","refId":"A"}],"title":"RSI","type":"stat"},{"datasource":"PostgreSQL","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":5},{"color":"red","value":10}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":5,"x":10,"y":24},"id":10,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"titleSize":12,"valueSize":18},"textMode":"auto"},"pluginVersion":"10.2.0","targets":[{"format":"table","rawSql":"SELECT ROUND(macd, 2) as value FROM v_indicator_summary WHERE ticker = '$ticker' LIMIT 1","refId":"A"}],"title":"MACD","type":"stat"},{"datasource":"PostgreSQL","fieldConfig":{"defaults":{"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"yellow","value":25},{"color":"green","value":50}]},"unit":"none"},"overrides":[]},"gridPos":{"h":4,"w":5,"x":15,"y":24},"id":11,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"titleSize":12,"valueSize":18},"textMode":"auto"},"pluginVersion":"10.2.0","targets":[{"format":"table","rawSql":"SELECT ROUND(adx, 2) as value FROM v_indicator_summary WHERE ticker = '$ticker' LIMIT 1","refId":"A"}],"title":"ADX","type":"stat"},{"datasource":"PostgreSQL","fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":1000},{"color":"red","value":2000}]},"unit":"currencyKRW"},"overrides":[]},"gridPos":{"h":4,"w":4,"x":20,"y":24},"id":12,"options":{"colorMode":"value","graphMode":"area","justifyMode":"center","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"text":{"titleSize":12,"valueSize":18},"textMode":"auto"},"pluginVersion":"10.2.0","targets":[{"format":"table","rawSql":"SELECT ROUND(atr, 2) as value FROM v_indicator_summary WHERE ticker = '$ticker' LIMIT 1","refId":"A"}],"title":"ATR","type":"stat"},{"datasource":"PostgreSQL","fieldConfig":{"defaults":{"custom":{"align":"auto","cellOptions":{"type":"auto"},"inspect":false},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":6,"w":12,"x":0,"y":28},"id":7,"options":{"cellHeight":"sm","footer":{"countRows":false,"fields":"","reducer":["sum"],"show":false},"showHeader":true},"pluginVersion":"10.2.0","targets":[{"format":"table","rawSql":"SELECT \n  ticker AS \"Ticker\",\n  company_name AS \"Company\",\n  current_price AS \"Price\",\n  rsi_signal AS \"RSI Signal\",\n  macd_signal_type AS \"MACD Signal\",\n  stoch_signal AS \"Stoch Signal\",\n  trend_signal AS \"Trend\",\n  trend_strength AS \"Strength\"\nFROM v_trading_signals\nWHERE ticker = '$ticker'\nLIMIT 1","refId":"A"}],"title":"Trading Signals","type":"table"},{"datasource":"PostgreSQL","fieldConfig":{"defaults":{"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"red","value":null},{"color":"yellow","value":30},{"color":"green","value":40},{"color":"green","value":60},{"color":"yellow","value":70},{"color":"red","value":80}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":6,"w":12,"x":12,"y":28},"id":8,"options":{"minVizHeight":75,"minVizWidth":75,"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":true,"showThresholdMarkers":true,"text":{"titleSize":16,"valueSize":32}},"pluginVersion":"10.2.0","targets":[{"format":"table","rawSql":"WITH sentiment AS (\n  SELECT \n    CASE \n      WHEN rsi < 30 THEN 20\n      WHEN rsi < 40 THEN 35\n      WHEN rsi < 60 THEN 50\n      WHEN rsi < 70 THEN 65\n      WHEN rsi >= 70 THEN 80\n      ELSE 50\n    END as sentiment_score\n  FROM v_indicator_summary\n  WHERE ticker = '$ticker'\n)\nSELECT sentiment_score FROM sentiment","refId":"A"}],"title":"Market Sentiment","type":"gauge"}],"refresh":"30s","schemaVersion":38,"tags":["stock","technical-analysis","indicators","v2"],"templating":{"list":[{"current":{"text":"005930","value":"005930"},"datasource":{"type":"postgres","uid":"PCC52D03280B7034C"},"definition":"","hide":0,"includeAll":false,"multi":false,"name":"ticker","options":[],"query":"SELECT ticker AS __value, ticker || ' - ' || company_name AS __text FROM stocks WHERE is_active = true ORDER BY ticker","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"tagValuesQuery":"","tagsQuery":"","type":"query","useTags":false},{"current":{"text":"Yes","value":"1"},"hide":0,"includeAll":false,"multi":false,"name":"show_bb","options":[{"text":"Yes","value":"1"},{"text":"No","value":"0"}],"query":"Yes,No","skipUrlSync":false,"type":"custom","label":"볼린저밴드 표시"}]},"time":{"from":"now-6M","to":"now"},"timepicker":{"refresh_intervals":["5s","10s","30s","1m","5m","15m","30m","1h"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d","90d","180d","1y"]},"timezone":"browser","title":"Technical Indicators Dashboard - ver2","uid":"tech-indicators-002","version":1,"weekStart":""}}