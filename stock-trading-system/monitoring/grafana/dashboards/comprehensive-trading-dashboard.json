{
  "dashboard": {
    "id": null,
    "uid": "comprehensive-trading-001",
    "title": "ì¢…í•© ì£¼ì‹ ê±°ë˜ ëŒ€ì‹œë³´ë“œ",
    "tags": ["stock", "trading", "comprehensive", "korean"],
    "timezone": "browser",
    "schemaVersion": 38,
    "version": 1,
    "refresh": "30s",
    "graphTooltip": 1,
    "templating": {
      "list": [
        {
          "name": "ticker",
          "type": "query",
          "current": {
            "text": "005930 - ì‚¼ì„±ì „ì",
            "value": "005930"
          },
          "datasource": {
            "type": "postgres",
            "uid": "${DS_POSTGRESQL}"
          },
          "definition": "SELECT ticker AS __value, ticker || ' - ' || company_name AS __text FROM stocks WHERE is_active = true AND currency = 'KRW' AND ticker IN (SELECT DISTINCT ticker FROM stock_prices WHERE date >= CURRENT_DATE - INTERVAL '30 days') ORDER BY CASE WHEN ticker = '005930' THEN 1 WHEN ticker = '000660' THEN 2 WHEN ticker = '035420' THEN 3 WHEN ticker = '051910' THEN 4 WHEN ticker = '006400' THEN 5 WHEN ticker = '035720' THEN 6 WHEN ticker = '028260' THEN 7 WHEN ticker = '068270' THEN 8 WHEN ticker = '066570' THEN 9 WHEN ticker = '005380' THEN 10 ELSE 99 END, company_name",
          "hide": 0,
          "includeAll": false,
          "multi": false,
          "label": "ì¢…ëª© ì„ íƒ",
          "refresh": 1,
          "regex": "",
          "skipUrlSync": false,
          "sort": 0
        },
        {
          "name": "timeRange",
          "type": "custom",
          "current": {
            "text": "3ê°œì›”",
            "value": "3 months"
          },
          "options": [
            {"text": "1ê°œì›”", "value": "1 month"},
            {"text": "3ê°œì›”", "value": "3 months"},
            {"text": "6ê°œì›”", "value": "6 months"},
            {"text": "1ë…„", "value": "1 year"}
          ],
          "hide": 0,
          "includeAll": false,
          "multi": false,
          "label": "ê¸°ê°„ ì„ íƒ"
        }
      ]
    },
    "time": {
      "from": "now-3M",
      "to": "now"
    },
    "timepicker": {
      "refresh_intervals": ["10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"]
    },
    "panels": [
      {
        "id": 1,
        "gridPos": {"h": 10, "w": 24, "x": 0, "y": 0},
        "type": "timeseries",
        "title": "ì£¼ê°€ ì°¨íŠ¸ (Price Chart)",
        "datasource": "PostgreSQL",
        "targets": [
          {
            "rawSql": "SELECT \n  date AS time,\n  close_price AS \"ì¢…ê°€ (Close)\",\n  open_price AS \"ì‹œê°€ (Open)\",\n  high_price AS \"ê³ ê°€ (High)\",\n  low_price AS \"ì €ê°€ (Low)\"\nFROM stock_prices\nWHERE ticker = '$ticker'\n  AND date >= NOW() - INTERVAL '$timeRange'\nORDER BY date",
            "format": "time_series",
            "refId": "A"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": {"mode": "palette-classic"},
            "custom": {
              "axisLabel": "ê°€ê²© (Price)",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {"tooltip": false, "viz": false, "legend": false},
              "lineInterpolation": "linear",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": {"type": "linear"},
              "showPoints": "never",
              "spanNulls": true,
              "stacking": {"group": "A", "mode": "none"}
            },
            "unit": "currencyKRW"
          },
          "overrides": [
            {
              "matcher": {"id": "byName", "options": "ì¢…ê°€ (Close)"},
              "properties": [
                {"id": "color", "value": {"fixedColor": "green", "mode": "fixed"}},
                {"id": "custom.lineWidth", "value": 3}
              ]
            },
            {
              "matcher": {"id": "byName", "options": "ì‹œê°€ (Open)"},
              "properties": [
                {"id": "color", "value": {"fixedColor": "blue", "mode": "fixed"}},
                {"id": "custom.lineWidth", "value": 2}
              ]
            },
            {
              "matcher": {"id": "byName", "options": "ê³ ê°€ (High)"},
              "properties": [
                {"id": "color", "value": {"fixedColor": "orange", "mode": "fixed"}},
                {"id": "custom.lineWidth", "value": 1},
                {"id": "custom.lineStyle", "value": {"fill": "dash", "dash": [5, 5]}}
              ]
            },
            {
              "matcher": {"id": "byName", "options": "ì €ê°€ (Low)"},
              "properties": [
                {"id": "color", "value": {"fixedColor": "red", "mode": "fixed"}},
                {"id": "custom.lineWidth", "value": 1},
                {"id": "custom.lineStyle", "value": {"fill": "dash", "dash": [5, 5]}}
              ]
            }
          ]
        },
        "options": {
          "legend": {
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true,
            "values": ["current", "min", "max"]
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        }
      },
      {
        "id": 2,
        "gridPos": {"h": 6, "w": 24, "x": 0, "y": 10},
        "type": "timeseries",
        "title": "ê±°ë˜ëŸ‰ (Volume)",
        "datasource": "PostgreSQL",
        "targets": [
          {
            "rawSql": "SELECT \n  date AS time,\n  volume AS \"ê±°ë˜ëŸ‰ (Volume)\"\nFROM stock_prices\nWHERE ticker = '$ticker'\n  AND date >= NOW() - INTERVAL '$timeRange'\n  AND volume > 0\nORDER BY date",
            "format": "time_series",
            "refId": "A"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": {"mode": "palette-classic"},
            "custom": {
              "axisLabel": "ê±°ë˜ëŸ‰",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "bars",
              "fillOpacity": 80,
              "gradientMode": "none",
              "hideFrom": {"tooltip": false, "viz": false, "legend": false},
              "lineInterpolation": "linear",
              "lineWidth": 1,
              "pointSize": 5,
              "scaleDistribution": {"type": "linear"},
              "showPoints": "never",
              "spanNulls": false,
              "stacking": {"group": "A", "mode": "none"}
            },
            "unit": "short"
          },
          "overrides": [
            {
              "matcher": {"id": "byName", "options": "ê±°ë˜ëŸ‰ (Volume)"},
              "properties": [
                {"id": "color", "value": {"fixedColor": "purple", "mode": "fixed"}}
              ]
            }
          ]
        },
        "options": {
          "legend": {
            "displayMode": "list",
            "placement": "bottom",
            "showLegend": true
          },
          "tooltip": {
            "mode": "single",
            "sort": "none"
          }
        }
      },
      {
        "id": 3,
        "gridPos": {"h": 8, "w": 24, "x": 0, "y": 16},
        "type": "timeseries",
        "title": "MACD (Moving Average Convergence Divergence)",
        "datasource": "PostgreSQL",
        "targets": [
          {
            "rawSql": "SELECT \n  date AS time,\n  (value->>'macd')::numeric AS \"MACD\",\n  (value->>'macd_signal')::numeric AS \"Signal\",\n  (value->>'macd_histogram')::numeric AS \"Histogram\"\nFROM indicator_values iv\nJOIN indicator_definitions id ON iv.indicator_id = id.id\nWHERE iv.ticker = '$ticker'\n  AND id.code = 'MACD'\n  AND date >= NOW() - INTERVAL '$timeRange'\n  AND (value->>'macd') IS NOT NULL\nORDER BY date",
            "format": "time_series",
            "refId": "A"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": {"mode": "palette-classic"},
            "custom": {
              "axisLabel": "MACD ê°’",
              "axisPlacement": "auto",
              "barAlignment": 0,
              "drawStyle": "line",
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {"tooltip": false, "viz": false, "legend": false},
              "lineInterpolation": "linear",
              "lineWidth": 2,
              "pointSize": 5,
              "scaleDistribution": {"type": "linear"},
              "showPoints": "never",
              "spanNulls": true,
              "stacking": {"group": "A", "mode": "none"}
            }
          },
          "overrides": [
            {
              "matcher": {"id": "byName", "options": "MACD"},
              "properties": [
                {"id": "color", "value": {"fixedColor": "blue", "mode": "fixed"}},
                {"id": "custom.lineWidth", "value": 3}
              ]
            },
            {
              "matcher": {"id": "byName", "options": "Signal"},
              "properties": [
                {"id": "color", "value": {"fixedColor": "red", "mode": "fixed"}},
                {"id": "custom.lineWidth", "value": 2}
              ]
            },
            {
              "matcher": {"id": "byName", "options": "Histogram"},
              "properties": [
                {"id": "color", "value": {"fixedColor": "green", "mode": "fixed"}},
                {"id": "custom.drawStyle", "value": "bars"},
                {"id": "custom.fillOpacity", "value": 60}
              ]
            }
          ]
        },
        "options": {
          "legend": {
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true,
            "values": ["current", "min", "max"]
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        }
      },
      {
        "id": 4,
        "gridPos": {"h": 8, "w": 24, "x": 0, "y": 24},
        "type": "timeseries",
        "title": "Stochastic Oscillator (%K ë¹ ë¥¸ì„  & %D ëŠë¦°ì„ )",
        "datasource": "PostgreSQL",
        "targets": [
          {
            "rawSql": "SELECT \n  date AS time,\n  (value->>'stoch_k')::numeric AS \"%K (ë¹ ë¥¸ì„ )\",\n  (value->>'stoch_d')::numeric AS \"%D (ëŠë¦°ì„ )\"\nFROM indicator_values iv\nJOIN indicator_definitions id ON iv.indicator_id = id.id\nWHERE iv.ticker = '$ticker'\n  AND id.code = 'STOCH'\n  AND date >= NOW() - INTERVAL '$timeRange'\n  AND (value->>'stoch_k') IS NOT NULL\n  AND (value->>'stoch_d') IS NOT NULL\nORDER BY date",
            "format": "time_series",
            "refId": "A"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "min": 0,
            "max": 100,
            "custom": {
              "axisLabel": "Stochastic (%)",
              "drawStyle": "line",
              "lineInterpolation": "linear",
              "lineWidth": 2,
              "fillOpacity": 0,
              "gradientMode": "none",
              "hideFrom": {"tooltip": false, "viz": false, "legend": false},
              "spanNulls": true,
              "showPoints": "never"
            },
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {"color": "transparent", "value": null},
                {"color": "red", "value": 20},
                {"color": "transparent", "value": 30},
                {"color": "transparent", "value": 70},
                {"color": "yellow", "value": 80}
              ]
            }
          },
          "overrides": [
            {
              "matcher": {"id": "byName", "options": "%K (ë¹ ë¥¸ì„ )"},
              "properties": [
                {"id": "color", "value": {"fixedColor": "blue", "mode": "fixed"}},
                {"id": "custom.lineWidth", "value": 3}
              ]
            },
            {
              "matcher": {"id": "byName", "options": "%D (ëŠë¦°ì„ )"},
              "properties": [
                {"id": "color", "value": {"fixedColor": "red", "mode": "fixed"}},
                {"id": "custom.lineWidth", "value": 3}
              ]
            }
          ]
        },
        "options": {
          "legend": {
            "displayMode": "table",
            "placement": "bottom",
            "showLegend": true,
            "values": ["current", "min", "max"]
          },
          "tooltip": {
            "mode": "multi",
            "sort": "none"
          }
        }
      },
      {
        "id": 5,
        "gridPos": {"h": 6, "w": 12, "x": 0, "y": 32},
        "type": "stat",
        "title": "í˜„ì¬ ì§€í‘œ ê°’ (Current Indicators)",
        "datasource": "PostgreSQL",
        "targets": [
          {
            "rawSql": "SELECT \n  sp.close_price AS \"í˜„ì¬ê°€\",\n  ROUND((macd_iv.value->>'macd')::numeric, 4) AS \"MACD\",\n  ROUND((macd_iv.value->>'macd_signal')::numeric, 4) AS \"MACD Signal\",\n  ROUND((stoch_iv.value->>'stoch_k')::numeric, 2) AS \"Stoch %K\",\n  ROUND((stoch_iv.value->>'stoch_d')::numeric, 2) AS \"Stoch %D\"\nFROM stock_prices sp\nLEFT JOIN indicator_values macd_iv ON sp.ticker = macd_iv.ticker AND sp.date = macd_iv.date\nLEFT JOIN indicator_definitions macd_id ON macd_iv.indicator_id = macd_id.id AND macd_id.code = 'MACD'\nLEFT JOIN indicator_values stoch_iv ON sp.ticker = stoch_iv.ticker AND sp.date = stoch_iv.date\nLEFT JOIN indicator_definitions stoch_id ON stoch_iv.indicator_id = stoch_id.id AND stoch_id.code = 'STOCH'\nWHERE sp.ticker = '$ticker'\nORDER BY sp.date DESC\nLIMIT 1",
            "format": "table",
            "refId": "A"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "color": {"mode": "value"},
            "custom": {
              "align": "center",
              "displayMode": "basic"
            },
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {"color": "green", "value": null},
                {"color": "red", "value": 20},
                {"color": "yellow", "value": 80}
              ]
            }
          },
          "overrides": [
            {
              "matcher": {"id": "byName", "options": "í˜„ì¬ê°€"},
              "properties": [
                {"id": "unit", "value": "currencyKRW"},
                {"id": "custom.displayMode", "value": "color-background"}
              ]
            }
          ]
        },
        "options": {
          "reduceOptions": {
            "values": false,
            "calcs": ["lastNotNull"],
            "fields": ""
          },
          "orientation": "auto",
          "textMode": "value_and_name",
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "auto"
        }
      },
      {
        "id": 6,
        "gridPos": {"h": 6, "w": 12, "x": 12, "y": 32},
        "type": "table",
        "title": "ê±°ë˜ ì‹ í˜¸ (Trading Signals)",
        "datasource": "PostgreSQL",
        "targets": [
          {
            "rawSql": "WITH latest_data AS (\n  SELECT \n    sp.date,\n    sp.close_price,\n    (macd_iv.value->>'macd')::numeric as macd,\n    (macd_iv.value->>'macd_signal')::numeric as macd_signal,\n    (stoch_iv.value->>'stoch_k')::numeric as stoch_k,\n    (stoch_iv.value->>'stoch_d')::numeric as stoch_d\n  FROM stock_prices sp\n  LEFT JOIN indicator_values macd_iv ON sp.ticker = macd_iv.ticker AND sp.date = macd_iv.date\n  LEFT JOIN indicator_definitions macd_id ON macd_iv.indicator_id = macd_id.id AND macd_id.code = 'MACD'\n  LEFT JOIN indicator_values stoch_iv ON sp.ticker = stoch_iv.ticker AND sp.date = stoch_iv.date\n  LEFT JOIN indicator_definitions stoch_id ON stoch_iv.indicator_id = stoch_id.id AND stoch_id.code = 'STOCH'\n  WHERE sp.ticker = '$ticker'\n  ORDER BY sp.date DESC\n  LIMIT 1\n)\nSELECT \n  date AS \"ë‚ ì§œ\",\n  CASE \n    WHEN macd > macd_signal THEN 'MACD ìƒìŠ¹'\n    WHEN macd < macd_signal THEN 'MACD í•˜ë½'\n    ELSE 'MACD ì¤‘ë¦½'\n  END AS \"MACD ì‹ í˜¸\",\n  CASE \n    WHEN stoch_k > stoch_d AND stoch_k < 80 THEN 'Stoch ìƒìŠ¹'\n    WHEN stoch_k < stoch_d AND stoch_k > 20 THEN 'Stoch í•˜ë½'\n    WHEN stoch_k > 80 THEN 'Stoch ê³¼ë§¤ìˆ˜'\n    WHEN stoch_k < 20 THEN 'Stoch ê³¼ë§¤ë„'\n    ELSE 'Stoch ì¤‘ë¦½'\n  END AS \"Stoch ì‹ í˜¸\",\n  CASE \n    WHEN (macd > macd_signal AND stoch_k > stoch_d AND stoch_k < 80) THEN 'ë§¤ìˆ˜ ê³ ë ¤'\n    WHEN (macd < macd_signal AND stoch_k < stoch_d AND stoch_k > 20) THEN 'ë§¤ë„ ê³ ë ¤'\n    ELSE 'ê´€ë§'\n  END AS \"ì¢…í•© ì‹ í˜¸\"\nFROM latest_data",
            "format": "table",
            "refId": "A"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "custom": {
              "align": "center",
              "displayMode": "color-background"
            }
          },
          "overrides": [
            {
              "matcher": {"id": "byName", "options": "ì¢…í•© ì‹ í˜¸"},
              "properties": [
                {"id": "custom.displayMode", "value": "color-background"},
                {
                  "id": "mappings",
                  "value": [
                    {"type": "value", "value": "ë§¤ìˆ˜ ê³ ë ¤", "text": "ğŸŸ¢ ë§¤ìˆ˜ ê³ ë ¤"},
                    {"type": "value", "value": "ë§¤ë„ ê³ ë ¤", "text": "ğŸ”´ ë§¤ë„ ê³ ë ¤"},
                    {"type": "value", "value": "ê´€ë§", "text": "ğŸŸ¡ ê´€ë§"}
                  ]
                }
              ]
            }
          ]
        }
      }
    ]
  },
  "overwrite": true
}