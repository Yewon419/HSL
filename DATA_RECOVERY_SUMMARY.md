# Docker 데이터 이관 실패 분석

**작성일**: 2025-10-27 19:33 KST  
**상태**: ⚠️ 데이터 이관 불가능 (아키텍처 제약)

---

## 현재 상황

### Docker Desktop 마이그레이션
- ✅ **C드라이브** → **F드라이브** WSL 배포판 이동 완료
- ✅ 모든 Docker 서비스 정상 실행
- ✅ PostgreSQL 새 데이터베이스 생성됨
- ❌ **C드라이브의 이전 데이터 (39GB) 이관 불가능**

### 왜 이관이 불가능한가?

**기술적 원인**:
1. Docker Desktop이 F드라이브로 이동됨
2. C드라이브의 `docker_data.vhdx`는 F드라이브의 docker-desktop에서 인식하지 못함
3. Docker 볼륨 메타데이터 불일치로 데이터 접근 차단

**시도한 방법들**:
- ✗ 파일 복사 (21GB까지 복사됨 - 성공, 하지만 사용 불가)
- ✗ WSL 마운트 (C드라이브 접근 불가)
- ✗ Docker 볼륨 교체 (아키텍처 호환성 부재)

---

## 데이터 복구 옵션

### 옵션 1: PostgreSQL 덤프 추출 (권장하지 않음)
- C드라이브의 이전 docker-desktop 배포판을 임시 등록
- PostgreSQL 컨테이너에서 pg_dump 실행
- 새 데이터베이스에 복원
- **문제**: C드라이브 이전 배포판 접근 불가능

### 옵션 2: 데이터 재수집 (실행 가능)
- 10월23일~27일 데이터를 **Airflow DAG**로 재수집
- Airflow UI (http://localhost:8080)에서 수동 실행
- **장점**: 모든 최신 로직 적용, 데이터 검증 가능
- **소요 시간**: ~30분

### 옵션 3: C드라이브 복구 (복잡함)
- Docker Desktop을 다시 C드라이브로 이동
- 데이터 백업 추출
- 다시 F드라이브로 이동
- **장점**: 모든 기존 데이터 복구
- **단점**: 시간 오래 걸림, 위험도 높음

---

## 권장 사항

**상황**: 
- Docker 마이그레이션 성공 (F드라이브 운영 정상)
- 이전 데이터는 복구 어려움

**권장 조치**:

1. **즉시**: 
   - 현재 F드라이브 운영 환경 유지
   - 앞으로 모든 신규 데이터는 F드라이브에 저장

2. **선택적**:
   - 10월23일~27일 데이터만 필요한 경우 → Airflow로 재수집
   - 모든 이전 데이터가 필요한 경우 → 옵션 3 고려

---

## 파일 위치

| 설명 | 경로 | 크기 |
|------|------|------|
| **C드라이브 이전 데이터** | `C:\Users\chohk\AppData\Local\Docker\wsl\disk\docker_data.vhdx` | 39GB |
| **F드라이브 복사본** | `/f/docker-data-old-complete-20251027.vhdx` | 21GB |
| **F드라이브 현재 데이터** | `/f/docker-data-new-backup-20251027.vhdx` | 21GB |

---

## 다음 단계

**즉시 조치**:
- [ ] Docker 시작 및 운영 환경 확인
- [ ] 앞으로의 자동 수집 스케줄 확인 (매일 18:30, 19:50 KST)

**선택 사항**:
- [ ] 이전 데이터 필요 → 옵션 2 또는 3 진행
- [ ] 현재 상태 유지 → 이 문서 보관

---

**생성자**: Claude Code  
**버전**: 1.0
