# CI/CD 및 환경 분리 전략 가이드

## 문서 개요
**날짜**: 2025-10-09
**목적**: 개발/운영 환경 분리 및 자동 배포 체계 구축
**대상**: DevOps, 백엔드 개발자

---

## 현재 문제점

### 1. 하드코딩된 설정
```python
# ❌ 문제: 여러 파일에 하드코딩
DATABASE_URL = "postgresql://admin:admin123@localhost:5435/stocktrading"
API_BASE_URL = "http://localhost:8000/api/v1"
```

**발견된 하드코딩 파일들** (18개):
- `calculate_all_indicators.py`
- `calculate_indicators_oct2.py`
- `celery_app.py`
- `fix_combined_indicators.py`
- `recalculate_missing_indicators.py`
- `run_indicator_calculator.py`
- `simple_indicator_update.py`
- `simple_indicators.py`
- `test_data_loader.py`
- 기타...

### 2. 환경별 차이점

| 항목 | 개발 환경 (Windows PC) | 운영 환경 (Linux 3서버) |
|------|----------------------|----------------------|
| **DB Host** | localhost:5435 | 192.168.219.103:5432 |
| **Redis** | localhost:6380 | 192.168.219.103:6379 |
| **Backend** | localhost:8000 | 192.168.219.102:8080 |
| **Grafana** | localhost:3000 | 192.168.219.101:3000 |
| **OS** | Windows | Rocky Linux |
| **Docker Network** | bridge (로컬) | 분산 (서버 간) |

### 3. 수동 배포의 문제점
- ❌ 코드 변경 시마다 수동으로 서버 접속
- ❌ 파일 직접 복사 (`scp`)
- ❌ 컨테이너 수동 재시작
- ❌ 환경별 설정 수동 변경
- ❌ 휴먼 에러 가능성

---

## 해결 방안 개요

```
┌─────────────┐
│  개발 PC    │
│  (Windows)  │
└──────┬──────┘
       │ 1. 코드 작성
       │ 2. git push
       ▼
┌─────────────┐
│   GitHub    │
│ Repository  │
└──────┬──────┘
       │ 3. Webhook/Actions
       ▼
┌─────────────┐
│  CI/CD      │
│  Pipeline   │
└──────┬──────┘
       │ 4. 자동 배포
       ▼
┌─────────────┐
│  운영 서버   │
│ (3대 Linux) │
└─────────────┘
```

---

## 1단계: 환경 변수 관리 체계

### 1.1 디렉토리 구조

```
stock-trading-system/
├── .env.example              # 템플릿 (Git 추적)
├── .env.development          # 개발 환경 (Git 제외)
├── .env.production           # 운영 환경 (Git 제외, 서버에만 존재)
├── backend/
│   ├── config.py            # ✅ 이미 환경변수 사용
│   ├── database.py
│   └── main.py
├── docker-compose.yml        # 기본 설정
├── docker-compose.dev.yml    # 개발용 override
└── docker-compose.prod.yml   # 운영용 override
```

### 1.2 .env 파일 구조

#### .env.example (템플릿)
```bash
# Database
DB_HOST=<DB_HOST>
DB_PORT=<DB_PORT>
DB_NAME=stocktrading
DB_USER=<DB_USER>
DB_PASSWORD=<DB_PASSWORD>

# Redis
REDIS_HOST=<REDIS_HOST>
REDIS_PORT=<REDIS_PORT>

# InfluxDB
INFLUXDB_URL=<INFLUXDB_URL>
INFLUXDB_TOKEN=<INFLUXDB_TOKEN>
INFLUXDB_ORG=stocktrading
INFLUXDB_BUCKET=metrics

# Application
BACKEND_URL=<BACKEND_URL>
FRONTEND_URL=<FRONTEND_URL>
GRAFANA_URL=<GRAFANA_URL>
AIRFLOW_URL=<AIRFLOW_URL>

# Security
JWT_SECRET_KEY=<GENERATE_RANDOM_SECRET>

# Environment
ENVIRONMENT=<development|production|staging>
```

#### .env.development (개발 PC)
```bash
# Database
DB_HOST=localhost
DB_PORT=5435
DB_NAME=stocktrading
DB_USER=admin
DB_PASSWORD=admin123

# Redis
REDIS_HOST=localhost
REDIS_PORT=6380

# InfluxDB
INFLUXDB_URL=http://localhost:8086
INFLUXDB_TOKEN=my-super-secret-auth-token
INFLUXDB_ORG=stocktrading
INFLUXDB_BUCKET=metrics

# Application
BACKEND_URL=http://localhost:8000
FRONTEND_URL=http://localhost:8080
GRAFANA_URL=http://localhost:3000
AIRFLOW_URL=http://localhost:8080

# Security
JWT_SECRET_KEY=dev-secret-key-change-in-production

# Environment
ENVIRONMENT=development
```

#### .env.production (운영 서버)
```bash
# Database (103 서버)
DB_HOST=192.168.219.103
DB_PORT=5432
DB_NAME=stocktrading
DB_USER=admin
DB_PASSWORD=admin123

# Redis (103 서버)
REDIS_HOST=192.168.219.103
REDIS_PORT=6379

# InfluxDB (103 서버)
INFLUXDB_URL=http://192.168.219.103:8086
INFLUXDB_TOKEN=my-super-secret-auth-token
INFLUXDB_ORG=stocktrading
INFLUXDB_BUCKET=metrics

# Application
BACKEND_URL=http://192.168.219.102:8080
FRONTEND_URL=http://192.168.219.102:8080
GRAFANA_URL=http://192.168.219.101:3000
AIRFLOW_URL=http://192.168.219.101:8080

# Security
JWT_SECRET_KEY=<GENERATE_STRONG_RANDOM_KEY>

# Environment
ENVIRONMENT=production
```

### 1.3 config.py 개선

**현재** (`backend/config.py`):
```python
class Settings(BaseSettings):
    DATABASE_URL: str
    REDIS_URL: str
    # ...

    class Config:
        env_file = ".env"
```

**개선**:
```python
# backend/config.py
from pydantic_settings import BaseSettings
from typing import Optional
import os

class Settings(BaseSettings):
    # Environment
    ENVIRONMENT: str = "development"

    # Database (개별 값으로 받기)
    DB_HOST: str
    DB_PORT: int = 5432
    DB_NAME: str = "stocktrading"
    DB_USER: str
    DB_PASSWORD: str

    # Redis
    REDIS_HOST: str
    REDIS_PORT: int = 6379

    # InfluxDB
    INFLUXDB_URL: str
    INFLUXDB_TOKEN: str
    INFLUXDB_ORG: str = "stocktrading"
    INFLUXDB_BUCKET: str = "metrics"

    # Application URLs
    BACKEND_URL: str
    FRONTEND_URL: str
    GRAFANA_URL: str
    AIRFLOW_URL: str

    # Security
    JWT_SECRET_KEY: str
    JWT_ALGORITHM: str = "HS256"
    JWT_EXPIRATION_HOURS: int = 24

    # CORS (환경별로 다르게)
    @property
    def CORS_ORIGINS(self) -> list:
        if self.ENVIRONMENT == "production":
            return [
                self.FRONTEND_URL,
                self.GRAFANA_URL,
                self.AIRFLOW_URL
            ]
        else:
            return ["*"]  # 개발 환경은 모든 origin 허용

    # 조합된 DATABASE_URL 속성
    @property
    def DATABASE_URL(self) -> str:
        return f"postgresql://{self.DB_USER}:{self.DB_PASSWORD}@{self.DB_HOST}:{self.DB_PORT}/{self.DB_NAME}"

    @property
    def REDIS_URL(self) -> str:
        return f"redis://{self.REDIS_HOST}:{self.REDIS_PORT}"

    @property
    def CELERY_BROKER_URL(self) -> str:
        return f"redis://{self.REDIS_HOST}:{self.REDIS_PORT}/0"

    @property
    def CELERY_RESULT_BACKEND(self) -> str:
        return f"redis://{self.REDIS_HOST}:{self.REDIS_PORT}/0"

    class Config:
        # 환경별 .env 파일 자동 선택
        env_file = f".env.{os.getenv('ENVIRONMENT', 'development')}"
        case_sensitive = True

settings = Settings()

# 환경 확인 헬퍼
def is_production() -> bool:
    return settings.ENVIRONMENT == "production"

def is_development() -> bool:
    return settings.ENVIRONMENT == "development"
```

### 1.4 하드코딩 제거

**Before** (각 스크립트):
```python
# ❌ 하드코딩
DATABASE_URL = "postgresql://admin:admin123@localhost:5435/stocktrading"
```

**After**:
```python
# ✅ config 사용
from config import settings

engine = create_engine(settings.DATABASE_URL)
```

**일괄 수정 필요한 파일들**:
```python
# backend/calculate_all_indicators.py
from config import settings
DATABASE_URL = settings.DATABASE_URL  # ← 변경

# backend/celery_app.py
from config import settings
app = Celery(
    'celery_app',
    broker=settings.CELERY_BROKER_URL,
    backend=settings.CELERY_RESULT_BACKEND
)

# backend/database.py
from config import settings
engine = create_engine(settings.DATABASE_URL)
```

---

## 2단계: Docker Compose Override

### 2.1 docker-compose.yml (기본)

공통 설정만 포함:

```yaml
version: '3.8'

services:
  postgres:
    image: timescale/timescaledb:latest-pg15
    container_name: stock-db
    environment:
      POSTGRES_DB: ${DB_NAME:-stocktrading}
      POSTGRES_USER: ${DB_USER:-admin}
      POSTGRES_PASSWORD: ${DB_PASSWORD:-admin123}
    ports:
      - "${DB_PORT:-5432}:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - stock-network

  backend:
    build:
      context: .
      dockerfile: backend/Dockerfile
    container_name: stock-backend
    env_file:
      - .env.${ENVIRONMENT:-development}
    ports:
      - "${BACKEND_PORT:-8000}:8000"
    volumes:
      - ./backend:/app
    depends_on:
      - postgres
      - redis
    networks:
      - stock-network

volumes:
  postgres_data:

networks:
  stock-network:
    driver: bridge
```

### 2.2 docker-compose.dev.yml (개발용)

개발 환경 특화:

```yaml
version: '3.8'

services:
  postgres:
    ports:
      - "5435:5432"  # 개발은 5435 포트

  redis:
    ports:
      - "6380:6379"  # 개발은 6380 포트

  backend:
    command: uvicorn main:app --host 0.0.0.0 --port 8000 --reload
    volumes:
      - ./backend:/app  # 개발은 핫 리로드
    environment:
      - ENVIRONMENT=development

  # 개발 환경에서만 실행
  grafana:
    image: grafana/grafana:10.2.0
    ports:
      - "3000:3000"
    # ...
```

### 2.3 docker-compose.prod.yml (운영용)

운영 환경 특화:

```yaml
version: '3.8'

services:
  backend:
    command: uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4
    restart: always
    environment:
      - ENVIRONMENT=production
    # 핫 리로드 비활성화
    volumes: []

  # 헬스체크 강화
  postgres:
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U admin"]
      interval: 10s
      timeout: 5s
      retries: 5
```

### 2.4 사용법

**개발 환경**:
```bash
# Windows PC
docker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d
```

**운영 환경**:
```bash
# Linux 서버
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d
```

---

## 3단계: CI/CD 파이프라인

### 3.1 Git Workflow

```
개발자 PC:
  develop 브랜치 ─→ git push
                     │
                     ▼
GitHub:
  develop 브랜치 ─→ [GitHub Actions]
                     │
                     ├─ 테스트 실행
                     ├─ 빌드
                     └─ 개발 서버 배포 (선택)

  main 브랜치 ────→ [GitHub Actions]
                     │
                     ├─ 테스트 실행
                     ├─ 빌드
                     └─ 운영 서버 자동 배포 ✅
```

### 3.2 GitHub Actions 설정

#### .github/workflows/deploy-production.yml

```yaml
name: Deploy to Production

on:
  push:
    branches:
      - main  # main 브랜치에 push 시 자동 배포

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          cd stock-trading-system/backend
          pip install -r requirements.txt

      - name: Run tests
        run: |
          cd stock-trading-system/backend
          pytest tests/

  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup SSH
        uses: webfactory/ssh-agent@v0.8.0
        with:
          ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}

      - name: Deploy to Backend Server (102)
        run: |
          ssh yunsang@192.168.219.102 << 'EOF'
            cd /opt/stock-trading
            git pull origin main
            docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d --build backend celery-worker celery-beat
          EOF

      - name: Deploy to Scheduler Server (101)
        run: |
          ssh yunsang@192.168.219.101 << 'EOF'
            cd /opt/stock-trading
            git pull origin main

            # Airflow DAGs 업데이트
            cp -r airflow/dags/* /opt/stock-trading/airflow/dags/
            sudo chown -R 50000:0 /opt/stock-trading/airflow/dags/

            docker restart stock-airflow-scheduler
          EOF

      - name: Health Check
        run: |
          sleep 10
          curl -f http://192.168.219.102:8080/health || exit 1

      - name: Notify Slack (Optional)
        if: always()
        uses: 8398a7/action-slack@v3
        with:
          status: ${{ job.status }}
          text: 'Production deployment completed'
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK }}
```

### 3.3 GitHub Secrets 설정

**필요한 Secrets** (GitHub Repository Settings → Secrets):

```
SSH_PRIVATE_KEY: <운영 서버 접속용 SSH 키>
SLACK_WEBHOOK: <Slack 알림용 웹훅> (선택)
```

### 3.4 SSH 키 설정 (서버)

**운영 서버에서 실행**:
```bash
# GitHub Actions에서 사용할 전용 키 생성
ssh-keygen -t ed25519 -C "github-actions" -f ~/.ssh/github_actions

# 공개키를 authorized_keys에 추가
cat ~/.ssh/github_actions.pub >> ~/.ssh/authorized_keys

# 개인키 출력 (GitHub Secrets에 등록)
cat ~/.ssh/github_actions
```

---

## 4단계: DB 마이그레이션 전략

### 4.1 Alembic 설정

**설치**:
```bash
cd stock-trading-system/backend
pip install alembic
```

**초기화**:
```bash
alembic init alembic
```

**구조**:
```
backend/
├── alembic/
│   ├── versions/
│   │   ├── 001_initial_schema.py
│   │   ├── 002_add_technical_indicators.py
│   │   └── 003_add_user_alerts.py
│   ├── env.py
│   └── script.py.mako
├── alembic.ini
└── models.py
```

### 4.2 alembic/env.py 설정

```python
# alembic/env.py
from logging.config import fileConfig
from sqlalchemy import engine_from_config, pool
from alembic import context
import sys
import os

# backend 디렉토리를 import 경로에 추가
sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)) + '/..')

from config import settings
from models import Base  # 모든 모델 import

# Alembic Config
config = context.config

# 환경변수에서 DATABASE_URL 사용
config.set_main_option('sqlalchemy.url', settings.DATABASE_URL)

# Metadata
target_metadata = Base.metadata

def run_migrations_online():
    connectable = engine_from_config(
        config.get_section(config.config_ini_section),
        prefix='sqlalchemy.',
        poolclass=pool.NullPool,
    )

    with connectable.connect() as connection:
        context.configure(
            connection=connection,
            target_metadata=target_metadata
        )

        with context.begin_transaction():
            context.run_migrations()

run_migrations_online()
```

### 4.3 마이그레이션 생성

**새 마이그레이션 생성**:
```bash
# 모델 변경 후
cd backend
alembic revision --autogenerate -m "Add new column to stocks table"
```

**생성된 파일** (`alembic/versions/004_add_new_column.py`):
```python
def upgrade():
    op.add_column('stocks', sa.Column('sector', sa.String(100), nullable=True))

def downgrade():
    op.drop_column('stocks', 'sector')
```

### 4.4 마이그레이션 적용

**개발 환경**:
```bash
# 최신으로 업그레이드
alembic upgrade head

# 한 단계만 업그레이드
alembic upgrade +1

# 다운그레이드 (롤백)
alembic downgrade -1
```

**운영 환경** (CI/CD에 포함):
```yaml
# .github/workflows/deploy-production.yml
- name: Run Database Migrations
  run: |
    ssh yunsang@192.168.219.102 << 'EOF'
      cd /opt/stock-trading/backend
      source venv/bin/activate
      ENVIRONMENT=production alembic upgrade head
    EOF
```

### 4.5 개발/운영 DB 분리 전략

**권장 구조**:

```
개발 환경:
- 로컬 PostgreSQL (localhost:5435)
- 테스트 데이터
- 마이그레이션 자유롭게 테스트

운영 환경:
- 분산 PostgreSQL (192.168.219.103:5432)
- 실제 데이터
- 마이그레이션 신중하게 적용 (CI/CD)

스테이징 환경 (선택):
- 운영과 동일한 구조
- 운영 데이터 일부 복사
- 배포 전 최종 테스트
```

**마이그레이션 순서**:
```
1. 개발 DB에서 마이그레이션 생성 및 테스트
2. Git에 마이그레이션 파일 커밋
3. (선택) 스테이징 환경에서 테스트
4. main 브랜치 merge → 운영 DB에 자동 적용
```

---

## 5단계: 실전 적용 순서

### Phase 1: 환경 변수 분리 (1-2일)

```bash
# 1. .env 파일 생성
cd stock-trading-system

# 개발 환경
cp .env.example .env.development
# 값 수정

# 운영 환경 (서버에서)
scp .env.example yunsang@192.168.219.102:/opt/stock-trading/.env.production
ssh yunsang@192.168.219.102
cd /opt/stock-trading
vi .env.production  # 운영 값으로 수정
```

```python
# 2. config.py 개선
# (위 1.3 참고)

# 3. 하드코딩 제거 (일괄 수정)
cd backend
find . -name "*.py" -type f -exec sed -i 's/localhost:5435/${settings.DB_HOST}:${settings.DB_PORT}/g' {} +
```

**확인**:
```bash
# 개발 환경
ENVIRONMENT=development python backend/main.py

# 운영 환경
ENVIRONMENT=production python backend/main.py
```

### Phase 2: Docker Compose Override (1일)

```bash
# 1. docker-compose 파일 분리
# (위 2.1-2.3 참고)

# 2. 개발 환경 테스트
docker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d

# 3. 운영 환경 적용
scp docker-compose.prod.yml yunsang@192.168.219.102:/opt/stock-trading/
ssh yunsang@192.168.219.102
cd /opt/stock-trading
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d
```

### Phase 3: Git Repository 설정 (1일)

```bash
# 1. .gitignore 업데이트
cat >> .gitignore << EOF
.env.development
.env.production
.env.staging
*.local
EOF

# 2. Git 초기화 (아직 안했다면)
git init
git add .
git commit -m "Initial commit: Environment separation"

# 3. GitHub Repository 생성 후
git remote add origin https://github.com/YOUR_USERNAME/stock-trading-system.git
git branch -M main
git push -u origin main
```

### Phase 4: CI/CD 파이프라인 구축 (2-3일)

```bash
# 1. GitHub Actions 설정
mkdir -p .github/workflows
# (위 3.2 deploy-production.yml 참고)

# 2. SSH 키 설정 (서버)
ssh yunsang@192.168.219.102
ssh-keygen -t ed25519 -C "github-actions" -f ~/.ssh/github_actions
cat ~/.ssh/github_actions.pub >> ~/.ssh/authorized_keys

# 3. GitHub Secrets 등록
# GitHub Repository → Settings → Secrets → New secret
# SSH_PRIVATE_KEY: (서버의 ~/.ssh/github_actions 내용)

# 4. 테스트
git checkout -b test-deploy
git commit --allow-empty -m "Test: CI/CD pipeline"
git push origin test-deploy
# Pull Request 생성 → main에 merge → 자동 배포 확인
```

### Phase 5: DB 마이그레이션 도구 (2-3일)

```bash
# 1. Alembic 설정
cd backend
pip install alembic
alembic init alembic
# (위 4.1-4.2 참고)

# 2. 초기 마이그레이션 생성
alembic revision --autogenerate -m "Initial schema"

# 3. 개발 환경 적용
alembic upgrade head

# 4. 운영 환경 적용 (수동, 나중에 CI/CD에 포함)
ssh yunsang@192.168.219.102
cd /opt/stock-trading/backend
alembic upgrade head
```

---

## 6단계: 운영 시나리오

### 시나리오 1: 새 기능 개발

```bash
# 1. 개발 PC에서
git checkout -b feature/new-indicator
# 코드 수정
# .env.development 사용 (자동)

# 2. 로컬 테스트
docker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d
pytest

# 3. Git push
git add .
git commit -m "feat: Add new technical indicator"
git push origin feature/new-indicator

# 4. Pull Request 생성

# 5. main에 merge → 자동 배포 ✅
```

### 시나리오 2: 긴급 패치

```bash
# 1. Hotfix 브랜치
git checkout -b hotfix/critical-bug main
# 수정

# 2. main에 merge → 즉시 배포
git checkout main
git merge hotfix/critical-bug
git push origin main
# → GitHub Actions 자동 배포 ✅
```

### 시나리오 3: DB 스키마 변경

```bash
# 1. 개발 환경에서 모델 수정
# models.py 수정

# 2. 마이그레이션 생성
cd backend
alembic revision --autogenerate -m "Add sector column"

# 3. 개발 DB 적용 및 테스트
alembic upgrade head
pytest

# 4. Git push
git add alembic/versions/*
git commit -m "migration: Add sector column to stocks"
git push origin main

# 5. CI/CD에서 자동으로 운영 DB에 적용 ✅
```

---

## 7단계: 모니터링 및 롤백

### 배포 모니터링

**GitHub Actions 로그**:
- https://github.com/YOUR_USERNAME/stock-trading-system/actions
- 실시간 배포 진행 상황 확인

**서버 로그**:
```bash
# Backend 로그
ssh yunsang@192.168.219.102
docker logs stock-backend --tail 100 -f

# Celery 로그
docker logs stock-celery-worker --tail 100 -f
```

**헬스 체크**:
```bash
# 자동화된 체크 (CI/CD)
curl -f http://192.168.219.102:8080/health

# Grafana 대시보드 확인
# http://192.168.219.101:3000
```

### 롤백 전략

**방법 1: Git Revert (권장)**
```bash
# 문제가 있는 커밋 찾기
git log --oneline

# Revert
git revert <commit-hash>
git push origin main
# → 자동으로 이전 버전 배포 ✅
```

**방법 2: DB 마이그레이션 롤백**
```bash
ssh yunsang@192.168.219.102
cd /opt/stock-trading/backend

# 한 단계 롤백
alembic downgrade -1

# 특정 버전으로 롤백
alembic downgrade <revision>
```

**방법 3: 수동 롤백 (긴급)**
```bash
ssh yunsang@192.168.219.102
cd /opt/stock-trading

# 이전 커밋으로 이동
git checkout <previous-commit>

# 컨테이너 재시작
docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d --build
```

---

## 체크리스트

### 환경 분리 완료 체크
- [ ] `.env.example` 생성
- [ ] `.env.development` 생성 (개발)
- [ ] `.env.production` 생성 (운영 서버)
- [ ] `config.py` 개선 (환경별 자동 로드)
- [ ] 하드코딩 제거 (18개 파일)
- [ ] `docker-compose.dev.yml` 생성
- [ ] `docker-compose.prod.yml` 생성
- [ ] `.gitignore` 업데이트

### CI/CD 구축 완료 체크
- [ ] GitHub Repository 생성
- [ ] `.github/workflows/deploy-production.yml` 생성
- [ ] SSH 키 설정 (서버)
- [ ] GitHub Secrets 등록 (SSH_PRIVATE_KEY)
- [ ] 테스트 배포 성공
- [ ] 헬스 체크 자동화

### DB 마이그레이션 완료 체크
- [ ] Alembic 설치 및 초기화
- [ ] `alembic/env.py` 설정
- [ ] 초기 마이그레이션 생성
- [ ] 개발 DB 마이그레이션 테스트
- [ ] 운영 DB 마이그레이션 적용
- [ ] CI/CD에 마이그레이션 통합

### 운영 준비 완료 체크
- [ ] 개발 환경에서 정상 작동
- [ ] 운영 환경에서 정상 작동
- [ ] 모니터링 대시보드 설정
- [ ] 롤백 프로세스 문서화
- [ ] 팀원 교육 완료

---

## 참고 자료

### 공식 문서
- [Pydantic Settings](https://docs.pydantic.dev/latest/concepts/pydantic_settings/)
- [Docker Compose Override](https://docs.docker.com/compose/extends/)
- [GitHub Actions](https://docs.github.com/en/actions)
- [Alembic Documentation](https://alembic.sqlalchemy.org/)

### 프로젝트 내 관련 문서
- [3서버Docker분산배포-개발-20251008.md](../development-logs/3서버Docker분산배포-개발-20251008.md)
- [3서버분산배포DB마이그레이션-개발-20251009.md](../development-logs/3서버분산배포DB마이그레이션-개발-20251009.md)

---

**작성일**: 2025-10-09
**작성자**: DevOps Team
**다음 업데이트**: CI/CD 구축 완료 후
