# ìˆ˜ë™ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ê°€ì´ë“œ

**ë¬¸ì„œìœ í˜•**: ê°€ì´ë“œ
**ìƒì„±ì¼**: 2025-10-09
**ì¹´í…Œê³ ë¦¬**: ë°°í¬ (Deployment)
**ë‚œì´ë„**: â­â­ ì¤‘ê¸‰

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ë°°ê²½ ë° í•„ìš”ì„±](#ë°°ê²½-ë°-í•„ìš”ì„±)
3. [ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ êµ¬ì„±](#ë°°í¬-ìŠ¤í¬ë¦½íŠ¸-êµ¬ì„±)
4. [ì‚¬ìš© ë°©ë²•](#ì‚¬ìš©-ë°©ë²•)
5. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
6. [ê´€ë ¨ ë¬¸ì„œ](#ê´€ë ¨-ë¬¸ì„œ)

---

## ê°œìš”

### ëª©ì 
ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ ë‚´ë¶€ì˜ ì‚¬ì„¤ IP ì„œë²„ì— ì£¼ì‹ íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œì„ ìë™ìœ¼ë¡œ ë°°í¬í•˜ê¸° ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸ ê°€ì´ë“œì…ë‹ˆë‹¤.

### ë°°í¬ ëŒ€ìƒ
- **101 ì„œë²„** (192.168.219.101): Grafana, Airflow
- **102 ì„œë²„** (192.168.219.102): Backend API, Celery Worker

### ì œê³µ ìŠ¤í¬ë¦½íŠ¸
- `deploy.ps1`: Windows PowerShellìš©
- `deploy.sh`: Linux/Mac Bashìš©

---

## ë°°ê²½ ë° í•„ìš”ì„±

### ë¬¸ì œ ìƒí™©
GitHub Actionsë¥¼ ì‚¬ìš©í•œ ìë™ ë°°í¬ ì‹œë„ ì¤‘ ë‹¤ìŒ ì—ëŸ¬ ë°œìƒ:

```
Run ssh-keyscan -H 192.168.219.102 >> ~/.ssh/known_hosts
Error: Process completed with exit code 1.
```

### ì›ì¸ ë¶„ì„

#### ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GitHub Actions        â”‚
â”‚   (í´ë¼ìš°ë“œ Runner)      â”‚  â† ì¸í„°ë„·ìƒì˜ ê°€ìƒ í™˜ê²½
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
        âŒ ì ‘ê·¼ ë¶ˆê°€
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë¡œì»¬ ë„¤íŠ¸ì›Œí¬            â”‚
â”‚  192.168.219.x          â”‚  â† ì‚¬ì„¤ IP (Private Network)
â”‚  â”œâ”€â”€ 101 ì„œë²„           â”‚
â”‚  â””â”€â”€ 102 ì„œë²„           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### í•µì‹¬ ë¬¸ì œ
- **GitHub Actions runner**: í´ë¼ìš°ë“œ í™˜ê²½ (ê³µì¸ IP)
- **ë°°í¬ ëŒ€ìƒ ì„œë²„**: ì‚¬ì„¤ ë„¤íŠ¸ì›Œí¬ (192.168.219.x)
- **ê²°ê³¼**: í´ë¼ìš°ë“œì—ì„œ ì‚¬ì„¤ IPë¡œ ì§ì ‘ ì ‘ê·¼ ë¶ˆê°€ëŠ¥

### í•´ê²° ë°©ì•ˆ

#### 1. ìˆ˜ë™ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ (ì„ íƒ)
ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ ë‚´ë¶€ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
- âœ… ê°„ë‹¨í•˜ê³  ë¹ ë¥¸ êµ¬í˜„
- âœ… ì¶”ê°€ ì„¤ì • ë¶ˆí•„ìš”
- âŒ ìˆ˜ë™ ì‹¤í–‰ í•„ìš”

#### 2. Self-hosted Runner (ëŒ€ì•ˆ)
ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ì— GitHub Actions runner ì„¤ì¹˜
- âœ… ì™„ì „ ìë™í™”
- âœ… Git pushë§Œìœ¼ë¡œ ë°°í¬
- âŒ runner ì„œë²„ ê´€ë¦¬ í•„ìš”
- âŒ ì¶”ê°€ ì„¤ì • ë³µì¡

---

## ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ êµ¬ì„±

### íŒŒì¼ êµ¬ì¡°
```
hhstock/
â”œâ”€â”€ deploy.ps1              # Windows PowerShell ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ deploy.sh               # Linux/Mac Bash ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ docs/
    â””â”€â”€ deployment/
        â”œâ”€â”€ ìˆ˜ë™ë°°í¬ìŠ¤í¬ë¦½íŠ¸-ê°€ì´ë“œ-20251009.md  # ë³¸ ë¬¸ì„œ
        â””â”€â”€ SELF_HOSTED_RUNNER_SETUP.md         # Self-hosted runner ê°€ì´ë“œ
```

### deploy.ps1 (PowerShell)

> **âš ï¸ ì£¼ì˜**: ì„œë²„ì˜ `/opt/stock-trading/` ë””ë ‰í† ë¦¬ëŠ” Git ì €ì¥ì†Œê°€ ì•„ë‹™ë‹ˆë‹¤.
> Git pull ëŒ€ì‹  íŒŒì¼ ì§ì ‘ ìˆ˜ì • í›„ Docker ì¬ë¹Œë“œ ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```powershell
# ì£¼ì‹ íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ (PowerShell)

Write-Host "=========================================" -ForegroundColor Cyan
Write-Host "ğŸš€ ì£¼ì‹ íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œ ë°°í¬ ì‹œì‘" -ForegroundColor Cyan
Write-Host "=========================================" -ForegroundColor Cyan

# 102 ì„œë²„ ë°°í¬ (Backend/Celery)
Write-Host "ğŸ“¦ 102 ì„œë²„ ë°°í¬ ì¤‘ (Backend/Celery)..." -ForegroundColor Blue
ssh yunsang@192.168.219.102 "cd /opt/stock-trading && docker compose down && docker compose up -d --build && sleep 10 && docker ps"

if ($LASTEXITCODE -eq 0) {
    Write-Host "âœ… 102 ì„œë²„ ë°°í¬ ì„±ê³µ" -ForegroundColor Green
} else {
    Write-Host "âŒ 102 ì„œë²„ ë°°í¬ ì‹¤íŒ¨" -ForegroundColor Red
    exit 1
}

# 101 ì„œë²„ ë°°í¬ (Scheduler/Grafana)
Write-Host "ğŸ“¦ 101 ì„œë²„ ë°°í¬ ì¤‘ (Scheduler/Grafana)..." -ForegroundColor Blue
ssh yunsang@192.168.219.101 "cd /opt/stock-trading && docker compose down && docker compose up -d --build && sleep 15 && docker ps"

if ($LASTEXITCODE -eq 0) {
    Write-Host "âœ… 101 ì„œë²„ ë°°í¬ ì„±ê³µ" -ForegroundColor Green
} else {
    Write-Host "âŒ 101 ì„œë²„ ë°°í¬ ì‹¤íŒ¨" -ForegroundColor Red
    exit 1
}

Write-Host ""
Write-Host "=========================================" -ForegroundColor Cyan
Write-Host "ğŸ‰ ë°°í¬ ì™„ë£Œ!" -ForegroundColor Green
Write-Host "=========================================" -ForegroundColor Cyan
Write-Host ""
Write-Host "ì„œë¹„ìŠ¤ URL:"
Write-Host "  â€¢ Backend API: http://192.168.219.102:8000"
Write-Host "  â€¢ Grafana:     http://192.168.219.101:3000"
Write-Host "  â€¢ Airflow:     http://192.168.219.101:8080"
Write-Host "=========================================" -ForegroundColor Cyan
```

### deploy.sh (Bash)

> **âš ï¸ ì£¼ì˜**: ì„œë²„ì˜ `/opt/stock-trading/` ë””ë ‰í† ë¦¬ëŠ” Git ì €ì¥ì†Œê°€ ì•„ë‹™ë‹ˆë‹¤.
> Git pull ëŒ€ì‹  íŒŒì¼ ì§ì ‘ ìˆ˜ì • í›„ Docker ì¬ë¹Œë“œ ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```bash
#!/bin/bash

echo "========================================="
echo "ğŸš€ ì£¼ì‹ íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œ ë°°í¬ ì‹œì‘"
echo "========================================="
echo ""

GREEN='\033[0;32m'
BLUE='\033[0;34m'
RED='\033[0;31m'
NC='\033[0m'

# 102 ì„œë²„ ë°°í¬ (Backend/Celery)
echo -e "${BLUE}ğŸ“¦ 102 ì„œë²„ ë°°í¬ ì¤‘ (Backend/Celery)...${NC}"
ssh yunsang@192.168.219.102 << 'EOF'
  set -e
  cd /opt/stock-trading
  docker compose down
  docker compose up -d --build
  sleep 10
  docker ps
EOF

if [ $? -eq 0 ]; then
  echo -e "${GREEN}âœ… 102 ì„œë²„ ë°°í¬ ì„±ê³µ${NC}"
else
  echo -e "${RED}âŒ 102 ì„œë²„ ë°°í¬ ì‹¤íŒ¨${NC}"
  exit 1
fi

# 101 ì„œë²„ ë°°í¬ (Scheduler/Grafana)
echo -e "${BLUE}ğŸ“¦ 101 ì„œë²„ ë°°í¬ ì¤‘ (Scheduler/Grafana)...${NC}"
ssh yunsang@192.168.219.101 << 'EOF'
  set -e
  cd /opt/stock-trading
  docker compose down
  docker compose up -d --build
  sleep 15
  docker ps
EOF

if [ $? -eq 0 ]; then
  echo -e "${GREEN}âœ… 101 ì„œë²„ ë°°í¬ ì„±ê³µ${NC}"
else
  echo -e "${RED}âŒ 101 ì„œë²„ ë°°í¬ ì‹¤íŒ¨${NC}"
  exit 1
fi

echo ""
echo "========================================="
echo -e "${GREEN}ğŸ‰ ë°°í¬ ì™„ë£Œ!${NC}"
echo "========================================="
echo ""
echo "ì„œë¹„ìŠ¤ URL:"
echo "  â€¢ Backend API: http://192.168.219.102:8000"
echo "  â€¢ Grafana:     http://192.168.219.101:3000"
echo "  â€¢ Airflow:     http://192.168.219.101:8080"
echo "========================================="
```

### ìŠ¤í¬ë¦½íŠ¸ ë™ì‘ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ë¡œì»¬ PCì—ì„œ           â”‚
â”‚   ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   102 ì„œë²„ ë°°í¬         â”‚
â”‚   1. Docker down        â”‚
â”‚   2. Docker build & up  â”‚
â”‚   3. ìƒíƒœ í™•ì¸          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼ (ì„±ê³µ ì‹œ)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   101 ì„œë²„ ë°°í¬         â”‚
â”‚   1. Docker down        â”‚
â”‚   2. Docker build & up  â”‚
â”‚   3. ìƒíƒœ í™•ì¸          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼ (ì„±ê³µ ì‹œ)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ë°°í¬ ì™„ë£Œ             â”‚
â”‚   ì„œë¹„ìŠ¤ URL ì¶œë ¥       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì‚¬ìš© ë°©ë²•

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

#### 1. SSH í‚¤ ì„¤ì •
ê° ì„œë²„ì— SSH ê³µê°œ í‚¤ê°€ ë“±ë¡ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

**ê³µê°œ í‚¤ í™•ì¸:**
```bash
cat ~/.ssh/id_rsa.pub
# ë˜ëŠ”
cat ~/.ssh/id_ed25519.pub
```

**ì„œë²„ì— ë“±ë¡ (ê° ì„œë²„ì—ì„œ ì‹¤í–‰):**
```bash
# 101 ì„œë²„
ssh yunsang@192.168.219.101
echo "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIKLYioiF51rzj20TlLfvwvtX2VuPKAPmnB9QXeuRcVnl github-actions-deploy" >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
exit

# 102 ì„œë²„
ssh yunsang@192.168.219.102
echo "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIKLYioiF51rzj20TlLfvwvtX2VuPKAPmnB9QXeuRcVnl github-actions-deploy" >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
exit
```

#### 2. ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸
```bash
# 101 ì„œë²„ ì ‘ì† í…ŒìŠ¤íŠ¸
ssh yunsang@192.168.219.101 "echo 'Connection OK'"

# 102 ì„œë²„ ì ‘ì† í…ŒìŠ¤íŠ¸
ssh yunsang@192.168.219.102 "echo 'Connection OK'"
```

### Windowsì—ì„œ ë°°í¬

#### PowerShell ì‹¤í–‰
```powershell
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd F:\hhstock

# ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
.\deploy.ps1
```

#### ì˜ˆìƒ ì¶œë ¥
```
=========================================
ğŸš€ ì£¼ì‹ íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œ ë°°í¬ ì‹œì‘
=========================================

ğŸ“¦ 102 ì„œë²„ ë°°í¬ ì¤‘ (Backend/Celery)...
Already up to date.
Stopping stock-backend...
Stopping stock-celery...
Building backend...
Starting stock-backend...
Starting stock-celery...
CONTAINER ID   IMAGE                    STATUS
abc123def456   stock-backend:latest     Up 5 seconds
def789ghi012   stock-celery:latest      Up 5 seconds

âœ… 102 ì„œë²„ ë°°í¬ ì„±ê³µ

ğŸ“¦ 101 ì„œë²„ ë°°í¬ ì¤‘ (Scheduler/Grafana)...
Already up to date.
Stopping stock-grafana...
Stopping stock-airflow...
Building grafana...
Starting stock-grafana...
Starting stock-airflow...
CONTAINER ID   IMAGE                    STATUS
jkl345mno678   stock-grafana:latest     Up 10 seconds
pqr901stu234   stock-airflow:latest     Up 10 seconds

âœ… 101 ì„œë²„ ë°°í¬ ì„±ê³µ

=========================================
ğŸ‰ ë°°í¬ ì™„ë£Œ!
=========================================

ì„œë¹„ìŠ¤ URL:
  â€¢ Backend API: http://192.168.219.102:8000
  â€¢ Grafana:     http://192.168.219.101:3000
  â€¢ Airflow:     http://192.168.219.101:8080
=========================================
```

### Linux/Macì—ì„œ ë°°í¬

#### Bash ì‹¤í–‰
```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd ~/hhstock

# ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬ (ìµœì´ˆ 1íšŒ)
chmod +x deploy.sh

# ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
./deploy.sh
```

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. SSH ì—°ê²° ì‹¤íŒ¨

#### ì¦ìƒ
```
ssh: connect to host 192.168.219.102 port 22: Connection refused
```

#### ì›ì¸
- SSH ì„œë¹„ìŠ¤ ë¯¸ì‹¤í–‰
- ë°©í™”ë²½ ì°¨ë‹¨
- ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë¬¸ì œ

#### í•´ê²°ë°©ë²•
```bash
# 1. ì„œë²„ ping í…ŒìŠ¤íŠ¸
ping 192.168.219.102

# 2. SSH í¬íŠ¸ í™•ì¸
telnet 192.168.219.102 22

# 3. ì„œë²„ì—ì„œ SSH ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ (ì„œë²„ ì§ì ‘ ì ‘ì†)
sudo systemctl status sshd
sudo systemctl start sshd
```

### 2. Permission denied (publickey)

#### ì¦ìƒ
```
Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password).
```

#### ì›ì¸
SSH ê³µê°œ í‚¤ê°€ ì„œë²„ì— ë“±ë¡ë˜ì§€ ì•ŠìŒ

#### í•´ê²°ë°©ë²•
```bash
# ê³µê°œ í‚¤ ë³µì‚¬
cat ~/.ssh/id_rsa.pub

# ì„œë²„ì— ìˆ˜ë™ ë¡œê·¸ì¸ í›„ ë“±ë¡
ssh yunsang@192.168.219.102
echo "ê³µê°œí‚¤ë‚´ìš©" >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
```

### 3. Docker ë¹Œë“œ ì‹¤íŒ¨

#### ì¦ìƒ
```
ERROR: Build failed
```

#### ì›ì¸
- Docker ì´ë¯¸ì§€ ë¹Œë“œ ì˜¤ë¥˜
- ë””ìŠ¤í¬ ìš©ëŸ‰ ë¶€ì¡±
- ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ

#### í•´ê²°ë°©ë²•
```bash
# ì„œë²„ì— ì ‘ì†í•˜ì—¬ ì§ì ‘ í™•ì¸
ssh yunsang@192.168.219.102

# Docker ë¡œê·¸ í™•ì¸
docker-compose logs

# ë””ìŠ¤í¬ ìš©ëŸ‰ í™•ì¸
df -h

# Docker ìºì‹œ ì •ë¦¬
docker system prune -a
```

### 4. ì»¨í…Œì´ë„ˆ ì‹œì‘ ì‹¤íŒ¨

#### ì¦ìƒ
```
Error: Container exited with code 1
```

#### ì›ì¸
- í™˜ê²½ ë³€ìˆ˜ ë¯¸ì„¤ì •
- í¬íŠ¸ ì¶©ëŒ
- ì„¤ì • íŒŒì¼ ì˜¤ë¥˜

#### í•´ê²°ë°©ë²•
```bash
# ì»¨í…Œì´ë„ˆ ë¡œê·¸ í™•ì¸
docker logs stock-backend

# í™˜ê²½ ë³€ìˆ˜ í™•ì¸
docker exec stock-backend env

# í¬íŠ¸ í™•ì¸
netstat -tlnp | grep 8000
```

### 5. PowerShell ì‹¤í–‰ ì •ì±… ì˜¤ë¥˜

#### ì¦ìƒ
```
.\deploy.ps1 : ì´ ì‹œìŠ¤í…œì—ì„œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ...
```

#### í•´ê²°ë°©ë²•
```powershell
# ì‹¤í–‰ ì •ì±… ì¼ì‹œ ë³€ê²½
Set-ExecutionPolicy -ExecutionPolicy Bypass -Scope Process

# ë˜ëŠ” ì§ì ‘ ì‹¤í–‰
powershell -ExecutionPolicy Bypass -File deploy.ps1
```

---

## ë°°í¬ í›„ í™•ì¸ì‚¬í•­

### 1. ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸

```bash
# 102 ì„œë²„
ssh yunsang@192.168.219.102 "docker ps"

# 101 ì„œë²„
ssh yunsang@192.168.219.101 "docker ps"
```

### 2. API í—¬ìŠ¤ ì²´í¬

```bash
# Backend API
curl http://192.168.219.102:8000/health

# Grafana
curl http://192.168.219.101:3000/api/health
```

### 3. ë¡œê·¸ í™•ì¸

```bash
# Backend ë¡œê·¸
ssh yunsang@192.168.219.102 "docker logs stock-backend --tail 50"

# Celery ë¡œê·¸
ssh yunsang@192.168.219.102 "docker logs stock-celery --tail 50"

# Grafana ë¡œê·¸
ssh yunsang@192.168.219.101 "docker logs stock-grafana --tail 50"
```

---

## ê´€ë ¨ ë¬¸ì„œ

### ë°°í¬ ê´€ë ¨
- [SELF_HOSTED_RUNNER_SETUP.md](SELF_HOSTED_RUNNER_SETUP.md) - Self-hosted runner ì„¤ì • ê°€ì´ë“œ
- [CICDí™˜ê²½ë¶„ë¦¬ì „ëµ-ê°€ì´ë“œ-20251009.md](CICDí™˜ê²½ë¶„ë¦¬ì „ëµ-ê°€ì´ë“œ-20251009.md) - CI/CD ë° í™˜ê²½ ë¶„ë¦¬ ì „ëµ
- [Gitìë™ë°°í¬ì•„í‚¤í…ì²˜-ê°€ì´ë“œ-20251009.md](../guides/Gitìë™ë°°í¬ì•„í‚¤í…ì²˜-ê°€ì´ë“œ-20251009.md) - Git ìë™ ë°°í¬ ì•„í‚¤í…ì²˜

### ê°œë°œ ë¡œê·¸
- [Gitì €ì¥ì†Œì •ë¦¬CICDêµ¬ì¶•í™˜ê²½ìˆ˜ì •-ê°œë°œ-20251009.md](../development-logs/Gitì €ì¥ì†Œì •ë¦¬CICDêµ¬ì¶•í™˜ê²½ìˆ˜ì •-ê°œë°œ-20251009.md) - CI/CD êµ¬ì¶• ì‘ì—… ë¡œê·¸
- [3ì„œë²„Dockerë¶„ì‚°ë°°í¬-ê°œë°œ-20251008.md](../development-logs/3ì„œë²„Dockerë¶„ì‚°ë°°í¬-ê°œë°œ-20251008.md) - 3ì„œë²„ ë¶„ì‚° ë°°í¬ ì‘ì—…

### ì•„í‚¤í…ì²˜
- [ìš´ì˜ì„œë²„ë¶„ì‚°ì•„í‚¤í…ì²˜-ê°œë°œ-20251007.md](../architecture/ìš´ì˜ì„œë²„ë¶„ì‚°ì•„í‚¤í…ì²˜-ê°œë°œ-20251007.md) - ìš´ì˜ ì„œë²„ ë¶„ì‚° ì•„í‚¤í…ì²˜

---

## ë¶€ë¡

### A. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

ì„œë²„ì— ë‹¤ìŒ í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤:

#### .env.production (ê° ì„œë²„)
```bash
# Database
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_password
POSTGRES_DB=stock_trading

# Redis
REDIS_HOST=redis
REDIS_PORT=6379

# Environment
ENVIRONMENT=production
DEBUG=false
```

### B. Docker Compose íŒŒì¼

#### docker-compose.yml (ê¸°ë³¸ ì„¤ì •)
```yaml
version: '3.8'

services:
  backend:
    build: ./backend
    ports:
      - "8000:8000"
    depends_on:
      - postgres
      - redis
    env_file:
      - .env

  postgres:
    image: timescale/timescaledb:latest-pg14
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:
```

#### docker-compose.prod.yml (í”„ë¡œë•ì…˜ ì˜¤ë²„ë¼ì´ë“œ)
```yaml
version: '3.8'

services:
  backend:
    restart: always
    environment:
      - ENVIRONMENT=production
      - DEBUG=false

  postgres:
    restart: always

  redis:
    restart: always
```

---

**ë¬¸ì„œ ë²„ì „**: 1.0
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-10-09
**ì‘ì„±ì**: AI Assistant (Claude Code)
**ê²€í† ì**: Project Team
