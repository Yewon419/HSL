# MD 파일 자동 정리 시스템 가이드

**작성일**: 2025-10-07
**버전**: v1.0.0
**목적**: 프로젝트 내 Markdown 문서 체계적 관리

---

## 📋 목차

1. [개요](#개요)
2. [디렉토리 구조](#디렉토리-구조)
3. [파일명 규칙](#파일명-규칙)
4. [자동화 스크립트](#자동화-스크립트)
5. [사용법](#사용법)
6. [예외 파일 관리](#예외-파일-관리)
7. [문제 해결](#문제-해결)

---

## 📚 개요

### 목적
프로젝트가 성장하면서 다양한 문서가 생성되었고, 체계적인 관리가 필요했습니다. 이 시스템은:
- ✅ 모든 MD 파일을 카테고리별로 자동 분류
- ✅ 통일된 파일명 규칙 적용
- ✅ 중복 파일 자동 제거
- ✅ 쉬운 검색 및 관리

### 작업 결과
- **정리된 파일**: 180개+
- **카테고리**: 8개
- **삭제된 중복 파일**: 26개

---

## 🗂️ 디렉토리 구조

### 최종 구조

```
F:\hhstock\
├── README.md                          # 프로젝트 메인 README (유지)
├── README_KOREA_STOCKS.md             # 한국 주식 README (유지)
├── start_hsl.md                       # HSL 시작 가이드 (유지)
│
├── docs/
│   ├── INDEX.md                       # 📌 전체 문서 인덱스
│   │
│   ├── architecture/                  # 🏗️ 시스템 아키텍처 (3개)
│   │   ├── 시스템아키텍처-개발-20251007.md
│   │   ├── 아키텍처정의서-개발-20251007.md
│   │   └── 운영서버분산아키텍처-개발-20251007.md
│   │
│   ├── development-logs/              # 🔧 개발 로그 (9개)
│   │   ├── 초기설정-개발-20250829.md
│   │   ├── 5년주가데이터-개발-20250830.md
│   │   ├── 코스피전종목-개발-20250830.md
│   │   ├── 백엔드개발-개발-20250830.md
│   │   ├── 크롤링DB-수정-20250831.md
│   │   ├── 대시보드웹앱-수정-20250831.md
│   │   ├── 차트-수정-20250901.md
│   │   ├── 그라파나버그픽스-수정-20250924.md
│   │   └── 대시보드수정-수정-20251007.md
│   │
│   ├── user-manuals/                  # 📖 사용자 매뉴얼 (12개)
│   │   ├── 초기설정-가이드-20250829.md
│   │   ├── 그라파나-가이드-20250829.md
│   │   ├── 한국주식그라파나-가이드-20250830.md
│   │   ├── 시스템-가이드-20250831.md
│   │   ├── 지표추가-가이드-20250831.md
│   │   ├── 그라파나고급-가이드-20250901.md
│   │   ├── 시작가이드-가이드-20251004.md
│   │   ├── 자동매매-가이드-20251004.md
│   │   ├── RSIMA트레이딩-가이드-20251004.md
│   │   ├── 데이터베이스-가이드-20251007.md
│   │   └── 스크리닝백테스팅-가이드-20251007.md
│   │
│   ├── work-summaries/                # 📊 작업 요약 (4개)
│   │   ├── 작업요약-개발-20250923.md
│   │   ├── 작업요약-개발-20250925.md
│   │   ├── 작업요약-개발-20250926.md
│   │   └── 기술지표대시보드-개발-20251007.md
│   │
│   ├── planning/                      # 📋 계획 문서 (5개)
│   │   ├── 이관계획서-개발-20251007.md
│   │   ├── 인터페이스정의서-개발-20251007.md
│   │   ├── 지표분석-개발-20251005.md
│   │   ├── RSI투자프로그램-개발-20251001.md
│   │   └── 종목수집작업-개발-20251001.md
│   │
│   ├── strategies/                    # 🎯 트레이딩 전략 (3개)
│   │   ├── 볼린저밴드전략-가이드-20251007.md
│   │   ├── 스크리닝백테스팅시스템-개발-20250924.md
│   │   └── 스크리닝전략시스템-개발-20250924.md
│   │
│   ├── deployment/                    # 🚀 배포 문서 (1개)
│   │   └── 포괄적지표배포-개발-20250924.md
│   │
│   └── guides/                        # 📘 가이드 (150개+)
│       ├── claude_working_hang-가이드-20251007.md
│       ├── md파일자동정리-가이드-20251007.md  # 이 문서
│       └── claude-code-expert-guide/  # 120개 파일
│           ├── README.md
│           ├── QUICK-START.md
│           ├── INDEX.md
│           └── ...
│
├── organize_md_files.py               # 🤖 파일 정리 자동화 스크립트
├── cleanup_duplicates.py              # 🧹 중복 파일 삭제 스크립트
└── test_organize.py                   # 🧪 테스트 스크립트
```

---

## 📝 파일명 규칙

### 형식
```
{파일내용}-{문서유형}-{날짜}.md
```

### 문서 유형
- **개발**: 개발 작업 문서
- **수정**: 수정/디버그 작업 문서
- **가이드**: 사용자 가이드 및 매뉴얼

### 날짜 형식
- **yyyyMMdd** (예: 20251007)

### 예시
```
시스템아키텍처-개발-20251007.md
그라파나-가이드-20250829.md
크롤링DB-수정-20250831.md
작업요약-개발-20250923.md
```

---

## 🤖 자동화 스크립트

### 1. organize_md_files.py

**기능:**
- 프로젝트 내 MD 파일을 docs 폴더의 카테고리별 하위 폴더로 이동
- 파일명을 통일된 형식으로 변경
- 예외 파일 목록에 있는 파일은 이동하지 않음

**핵심 코드:**

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
MD 파일 정리 스크립트
"""
import os
import sys
import shutil
from pathlib import Path

# Windows 콘솔 인코딩 설정
if sys.platform == 'win32':
    import codecs
    sys.stdout = codecs.getwriter('utf-8')(sys.stdout.buffer, 'strict')
    sys.stderr = codecs.getwriter('utf-8')(sys.stderr.buffer, 'strict')

# 기준 경로
BASE_DIR = Path(r"F:\hhstock")
DOCS_DIR = BASE_DIR / "docs"

# 예외 파일 목록 (정리 대상에서 제외)
EXCLUDED_FILES = {
    "README.md",              # 프로젝트 메인 README
    "README_KOREA_STOCKS.md", # 한국 주식 README
    "start_hsl.md",           # HSL 시작 가이드 (루트 유지)
}

# 파일 이동 매핑
file_mappings = {
    # Architecture
    "ARCHITECTURE.md": "docs/architecture/시스템아키텍처-개발-20251007.md",

    # Development Logs
    "CREATE_WORK_20250829_Init.md": "docs/development-logs/초기설정-개발-20250829.md",

    # User Manuals
    "USER_MANUAL_20250829_Grafana.md": "docs/user-manuals/그라파나-가이드-20250829.md",

    # ... (전체 매핑 목록)
}

def move_file(source, destination):
    """파일 이동"""
    # 예외 파일 체크
    source_filename = os.path.basename(source)
    if source_filename in EXCLUDED_FILES:
        print(f"⊘ 제외됨 (예외 파일): {source}")
        return None  # 예외 처리된 파일

    source_path = BASE_DIR / source
    dest_path = BASE_DIR / destination

    if not source_path.exists():
        print(f"✗ 파일 없음: {source}")
        return False

    try:
        shutil.move(str(source_path), str(dest_path))
        print(f"✓ 이동: {source} → {destination}")
        return True
    except Exception as e:
        print(f"✗ 오류: {source} - {e}")
        return False
```

### 2. cleanup_duplicates.py

**기능:**
- stock-trading-system 폴더에 남아있는 중복 파일 삭제
- docs 폴더로 이미 이동된 파일의 원본 제거

**핵심 코드:**

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
중복 MD 파일 정리 스크립트
"""

# stock-trading-system에서 삭제할 파일들
files_to_remove = [
    "CREATE_WORK_20250829_Init.md",
    "USER_MANUAL_20250829_Grafana.md",
    "work_summary_2025-09-23.md",
    # ... (전체 목록)
]

def remove_file(file_path):
    """파일 삭제"""
    if file_path.exists():
        try:
            os.remove(file_path)
            print(f"✓ 삭제: {file_path.relative_to(BASE_DIR)}")
            return True
        except Exception as e:
            print(f"✗ 삭제 실패: {file_path.relative_to(BASE_DIR)} - {e}")
            return False
```

### 3. test_organize.py

**기능:**
- 예외 파일 목록 테스트
- 파일 분류 로직 검증

---

## 💻 사용법

### 초기 설정

1. **디렉토리 구조 확인**
```bash
cd F:\hhstock
ls -la
```

2. **스크립트 실행 권한 확인**
```bash
python --version  # Python 3.x 확인
```

### 파일 정리 실행

#### Step 1: 카테고리별 폴더로 파일 이동
```bash
python organize_md_files.py
```

**출력 예시:**
```
================================================================================
MD 파일 정리 시작
================================================================================
✓ 이동: ARCHITECTURE.md → docs/architecture/시스템아키텍처-개발-20251007.md
✓ 이동: CREATE_WORK_20250829_Init.md → docs/development-logs/초기설정-개발-20250829.md
⊘ 제외됨 (예외 파일): README.md
⊘ 제외됨 (예외 파일): start_hsl.md
...
================================================================================
작업 완료: 성공 38개, 실패 0개, 제외 3개
================================================================================
```

#### Step 2: 중복 파일 삭제
```bash
python cleanup_duplicates.py
```

**출력 예시:**
```
================================================================================
중복 MD 파일 정리 시작
================================================================================

[stock-trading-system 루트 정리]
✓ 삭제: stock-trading-system\CREATE_WORK_20250829_Init.md
✓ 삭제: stock-trading-system\USER_MANUAL_20250829_Grafana.md
...
================================================================================
작업 완료: 삭제 26개, 건너뜀 0개
================================================================================
```

#### Step 3: 결과 확인
```bash
# docs 폴더 구조 확인
find docs -type d

# MD 파일 개수 확인
find docs -name "*.md" | wc -l

# 인덱스 파일 확인
cat docs/INDEX.md
```

### 테스트 실행

```bash
# 예외 파일 테스트
python test_organize.py
```

**출력:**
```
============================================================
예외 파일 테스트
============================================================
⊘ 제외됨: README.md
⊘ 제외됨: README_KOREA_STOCKS.md
⊘ 제외됨: start_hsl.md
✓ 처리 대상: some_other_file.md
============================================================
테스트 완료
============================================================
```

---

## 🔒 예외 파일 관리

### 예외 파일 목록

다음 파일들은 **정리 대상에서 제외**되며 루트 디렉토리에 유지됩니다:

| 파일명 | 설명 | 위치 |
|--------|------|------|
| `README.md` | 프로젝트 메인 README | `F:\hhstock\` |
| `README_KOREA_STOCKS.md` | 한국 주식 데이터 가이드 | `F:\hhstock\` |
| `start_hsl.md` | HSL 빠른 시작 가이드 | `F:\hhstock\` |

### 예외 파일 추가 방법

**organize_md_files.py 수정:**

```python
# 예외 파일 목록에 추가
EXCLUDED_FILES = {
    "README.md",
    "README_KOREA_STOCKS.md",
    "start_hsl.md",
    "새로운_예외파일.md",  # ← 추가
}
```

**docs/INDEX.md 업데이트:**

```markdown
### 예외 파일 목록
- `README.md` - 프로젝트 메인 README
- `README_KOREA_STOCKS.md` - 한국 주식 README
- `start_hsl.md` - HSL 시작 가이드
- `새로운_예외파일.md` - 설명 추가
```

---

## 🔍 문제 해결

### 1. UnicodeEncodeError 오류

**증상:**
```
UnicodeEncodeError: 'cp949' codec can't encode character '\u2713'
```

**원인:** Windows 콘솔 인코딩 문제

**해결:**
```python
# 스크립트 상단에 추가
import sys
import codecs

if sys.platform == 'win32':
    sys.stdout = codecs.getwriter('utf-8')(sys.stdout.buffer, 'strict')
    sys.stderr = codecs.getwriter('utf-8')(sys.stderr.buffer, 'strict')
```

### 2. 파일 이동 실패

**증상:**
```
✗ 오류: example.md - [WinError 5] 액세스가 거부되었습니다
```

**원인:**
- 파일이 다른 프로그램에서 열려있음
- 관리자 권한 필요
- .git 폴더 내부 파일

**해결:**
1. 파일을 닫고 재시도
2. 관리자 권한으로 실행
3. .git 폴더 제외 처리

### 3. 파일 없음 오류

**증상:**
```
✗ 파일 없음: example.md
```

**원인:** 이미 이동되었거나 파일이 존재하지 않음

**해결:**
```bash
# 파일 위치 확인
find . -name "example.md"

# file_mappings에서 해당 항목 제거 또는 주석처리
```

### 4. 중복 파일 발견

**증상:** 같은 내용의 파일이 여러 위치에 존재

**해결:**
```bash
# 중복 파일 삭제 스크립트 실행
python cleanup_duplicates.py

# 또는 수동 삭제
rm stock-trading-system/중복파일.md
```

---

## 📊 작업 통계

### 정리 전
```
F:\hhstock\
├── 37개 MD 파일 (루트에 산재)
├── stock-trading-system/
│   ├── 19개 MD 파일 (중복)
│   ├── docs/ (6개 중복)
│   └── strategies/ (1개 중복)
└── claude-code-expert-guide/ (120개+)

총 파일: 180개+, 중복: 26개
```

### 정리 후
```
F:\hhstock\
├── README.md (유지)
├── README_KOREA_STOCKS.md (유지)
├── start_hsl.md (유지)
├── docs/
│   ├── INDEX.md
│   ├── architecture/ (3개)
│   ├── development-logs/ (9개)
│   ├── user-manuals/ (12개)
│   ├── work-summaries/ (4개)
│   ├── planning/ (5개)
│   ├── strategies/ (3개)
│   ├── deployment/ (1개)
│   └── guides/ (150개+)
└── stock-trading-system/
    ├── README.md (유지)
    └── README_KOREA_STOCKS.md (유지)

총 파일: 180개+, 중복: 0개
```

### 개선 효과
- ✅ **검색 시간 단축**: 카테고리별 분류로 원하는 문서 빠르게 찾기
- ✅ **중복 제거**: 26개 중복 파일 삭제로 디스크 공간 절약
- ✅ **일관성**: 통일된 파일명 규칙으로 가독성 향상
- ✅ **유지보수**: 새 문서 추가 시 명확한 위치 지정 가능

---

## 🔄 유지보수

### 새 문서 추가 시

1. **적절한 카테고리 선택**
```
아키텍처 문서 → docs/architecture/
개발 로그 → docs/development-logs/
사용자 가이드 → docs/user-manuals/
작업 요약 → docs/work-summaries/
계획 문서 → docs/planning/
전략 문서 → docs/strategies/
배포 문서 → docs/deployment/
기타 가이드 → docs/guides/
```

2. **파일명 규칙 적용**
```
{파일내용}-{문서유형}-{yyyyMMdd}.md
```

3. **INDEX.md 업데이트**
```bash
# docs/INDEX.md 파일 열기
vim docs/INDEX.md

# 해당 카테고리에 새 파일 링크 추가
- [새파일-개발-20251008.md](category/새파일-개발-20251008.md)
```

### 정기 점검

**월 1회 실행 권장:**
```bash
# 1. 새로운 MD 파일 확인
find . -name "*.md" -type f -mtime -30

# 2. 분류되지 않은 파일 확인
find . -maxdepth 1 -name "*.md" -type f

# 3. 필요 시 정리 스크립트 재실행
python organize_md_files.py
```

---

## 📚 참고 자료

### 관련 문서
- [docs/INDEX.md](../INDEX.md) - 전체 문서 인덱스
- [README.md](../../README.md) - 프로젝트 개요
- [start_hsl.md](../../start_hsl.md) - HSL 시작 가이드

### 스크립트 파일
- `organize_md_files.py` - 메인 정리 스크립트
- `cleanup_duplicates.py` - 중복 파일 삭제
- `test_organize.py` - 테스트 스크립트

### 디렉토리 구조 확인 명령어
```bash
# 전체 구조 확인
tree docs -L 2

# 파일 개수 확인
find docs -type f -name "*.md" | wc -l

# 카테고리별 파일 수
for dir in docs/*/; do echo "$dir: $(find $dir -name '*.md' | wc -l)"; done
```

---

## ✅ 체크리스트

### 초기 설정
- [ ] Python 3.x 설치 확인
- [ ] 프로젝트 경로 확인 (F:\hhstock)
- [ ] docs 폴더 생성 확인

### 파일 정리
- [ ] organize_md_files.py 실행
- [ ] cleanup_duplicates.py 실행
- [ ] 예외 파일 위치 확인 (README.md, start_hsl.md 등)
- [ ] docs/INDEX.md 생성 확인

### 검증
- [ ] 모든 MD 파일이 docs 폴더에 위치
- [ ] 파일명 규칙 적용 확인
- [ ] 중복 파일 제거 확인
- [ ] 문서 인덱스 동작 확인

### 유지보수
- [ ] 새 문서 추가 시 카테고리 분류
- [ ] 파일명 규칙 준수
- [ ] INDEX.md 업데이트
- [ ] 월 1회 정기 점검

---

## 🎯 결론

이 자동화 시스템을 통해:
- ✅ **180개 이상의 문서**를 체계적으로 분류
- ✅ **26개 중복 파일** 제거
- ✅ **8개 카테고리**로 명확한 구조화
- ✅ **자동화 스크립트**로 향후 유지보수 간편화

프로젝트 문서 관리가 **체계적이고 효율적**으로 개선되었습니다.

---

**작성자**: Claude Code Assistant
**최종 수정**: 2025-10-07
**버전**: v1.0.0
**라이선스**: MIT
