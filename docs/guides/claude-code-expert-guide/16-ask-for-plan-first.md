# Project Management #16: 계획을 먼저 요청하기

## 원칙

구현 전에 Claude에게 **계획**을 먼저 세우도록 요청하세요.

## 이유

- 접근 방식을 미리 검토 가능
- 예상치 못한 문제 조기 발견
- 작업 범위 명확화
- 불필요한 작업 방지
- 더 나은 대안 발견 기회

## 실전 예시

### ❌ 계획 없이 바로 구현

```
사용자: "사용자 인증 기능을 추가해줘"
Claude: [바로 코드 작성 시작]
→ 중간에 구조 변경 필요
→ 재작업 발생
→ 시간 낭비
```

### ✅ 계획 먼저

```
사용자: "사용자 인증 기능을 추가하려고 해. 3단계 계획을 제안해줘. 각 단계는 작은 diff와 테스트를 포함해야 해"

Claude:
## 계획: 사용자 인증 기능 추가

### Step 1: 데이터 모델 및 마이그레이션
- User 모델 생성 (username, password_hash, email)
- 데이터베이스 마이그레이션
- **Test**: 모델 생성 및 저장 테스트
- **Diff**: ~50 lines

### Step 2: 인증 로직
- Password hashing (bcrypt)
- JWT 토큰 생성/검증
- **Test**: 해싱, 토큰 생성/검증 테스트
- **Diff**: ~80 lines

### Step 3: API 엔드포인트
- POST /auth/register
- POST /auth/login
- GET /auth/me (인증 필요)
- **Test**: API 통합 테스트
- **Diff**: ~120 lines

각 단계가 독립적으로 작동하고 테스트 가능합니다.

사용자: "좋아, Step 1부터 시작해줘"
```

## 효과적인 계획 요청 방법

### 1. 구체적인 제약사항 명시

```
"Redis를 사용한 캐싱 레이어를 추가하려고 해.
- 기존 API 인터페이스는 변경 안 됨
- 각 단계 diff는 200 lines 이하
- 각 단계마다 테스트 포함
3-4단계 계획을 제안해줘"
```

### 2. 불확실한 부분 명확히

```
"GraphQL API를 REST로 마이그레이션하려고 해.
먼저 계획을 제안해줘. 특히:
- 기존 클라이언트와의 호환성 유지 방법
- 점진적 마이그레이션 전략
- 각 단계의 롤백 계획"
```

### 3. 검증 기준 포함

```
"결제 시스템을 구현하려고 해.
각 단계에 다음을 포함한 계획을 세워줘:
- 단위 테스트
- 통합 테스트
- 보안 검증
- 롤백 절차"
```

## 계획 검토 체크리스트

계획을 받으면 다음을 확인하세요:

- [ ] 각 단계가 독립적으로 완성되는가?
- [ ] 테스트가 각 단계에 포함되어 있는가?
- [ ] Diff 크기가 적절한가? (~200 lines 이하)
- [ ] 롤백이 가능한가?
- [ ] 기존 기능을 깨뜨리지 않는가?
- [ ] 의존성 순서가 올바른가?

## 계획 수정 요청

```
"Step 2가 너무 큰 것 같아.
2개의 작은 단계로 나눠줄 수 있어?"

"Step 1과 Step 2의 순서를 바꾸는 게 더 좋을 것 같은데,
어떻게 생각해?"
```

## Plan Mode 활용

복잡한 작업의 경우:

```
사용자: [Shift+Tab 두 번 눌러 Plan Mode 진입]

"전체 프론트엔드를 React에서 Vue로 마이그레이션하려고 해.
상세한 계획을 세워줘"

Claude: [코드 수정 없이 분석 및 계획만 제시]
```

## 계획을 파일로 저장

```
사용자: "이 계획을 docs/migration-plan.md에 저장해줘"

나중에:
사용자: "@docs/migration-plan.md의 Step 3를 진행해줘"
```

## 팁

- **항상 계획 먼저**: 5분 계획이 1시간 재작업을 막습니다
- **계획 vs 구현 분리**: Plan Mode로 계획, 일반 모드로 구현
- **반복 가능**: 계획이 마음에 안 들면 다시 요청
- **문서화**: 중요한 계획은 파일로 저장

## 관련 항목

- [17-break-large-tasks.md](17-break-large-tasks.md) - 큰 작업 나누기
- [22-keep-diffs-small.md](22-keep-diffs-small.md) - 작은 diff 유지
- [130-plan-mode.md](130-plan-mode.md) - Plan Mode 활용
