# Grafana 한국 주식 차트 분석 매뉴얼
작성일: 2025-08-30

## 개요
Grafana를 사용하여 한국 주식 데이터를 시각화하고 기술적 분석을 수행하는 방법을 안내합니다. KOSPI와 KOSDAQ 종목의 일봉, 주봉, 월봉 차트 및 주요 기술지표를 실시간으로 확인할 수 있습니다.

## 대시보드 설치 및 설정

### 1. 대시보드 임포트
```bash
# Grafana 접속 (기본 포트 3000)
http://localhost:3000

# 로그인 정보
Username: admin
Password: admin (또는 설정된 패스워드)
```

### 2. 대시보드 JSON 임포트
1. **"+"** → **Import** 클릭
2. `monitoring/grafana/dashboards/korean-stock-candlestick.json` 파일 업로드
3. **Load** → **Import** 클릭

### 3. 데이터소스 설정 확인
- **Configuration** → **Data sources**
- PostgreSQL 연결 정보 확인:
  ```
  Host: localhost:5432
  Database: stock_trading
  User: postgres
  Password: [설정된 패스워드]
  ```

## 대시보드 구성 요소

### 🎯 메인 패널들

#### 1. Candlestick Chart (캔들스틱 차트)
- **위치**: 상단 전체
- **기능**: OHLC (시가, 고가, 저가, 종가) 캔들스틱
- **추가 정보**: 거래량 막대그래프
- **조회 기간**: 변수로 설정 가능

#### 2. Moving Averages (이동평균선)
- **위치**: 좌측 상단
- **지표**: MA20, MA50, MA200
- **용도**: 추세 분석 및 지지저항 확인

#### 3. RSI (상대강도지수)
- **위치**: 우측 상단  
- **범위**: 0-100%
- **신호**: 
  - 30% 이하: 과매도 (매수 신호)
  - 70% 이상: 과매수 (매도 신호)

#### 4. MACD
- **위치**: 좌측 중단
- **구성**: MACD Line, Signal Line, Histogram
- **신호**: 
  - MACD > Signal: 상승 추세
  - MACD < Signal: 하락 추세

#### 5. Stochastic Oscillator (스토캐스틱)
- **위치**: 우측 중단
- **구성**: %K, %D 라인
- **범위**: 0-100%
- **신호**: 80% 이상 과매수, 20% 이하 과매도

#### 6. Bollinger Bands (볼린저 밴드)
- **위치**: 하단 전체
- **구성**: Upper Band, Middle Band (MA20), Lower Band
- **신호**: 밴드 상한선/하한선 터치 시 반전 가능성

## 사용 방법

### 📊 종목 선택
1. 상단 **"Stock Ticker"** 드롭다운 클릭
2. 종목 코드와 회사명으로 검색
   - 예: `005930 - 삼성전자`, `035720 - 카카오`
3. 원하는 종목 선택

### 📅 기간 설정
#### 방법 1: 시간 선택기 사용
- 우측 상단 시간 범위 클릭
- 사전 정의된 범위 선택:
  - Last 1 hour / 6 hours / 24 hours
  - Last 7 days / 30 days / 90 days
  - Last 6 months / 1 year / 2 years / 5 years

#### 방법 2: 커스텀 기간
1. **From**: 시작 날짜 설정
2. **To**: 종료 날짜 설정
3. **Apply time range** 클릭

### ⏱️ 봉 종류 변경
상단 **"Interval"** 드롭다운에서 선택:
- **Daily (1d)**: 일봉
- **Weekly (1w)**: 주봉  
- **Monthly (1M)**: 월봉

### 🔍 차트 상호작용
#### 줌 인/아웃
- **마우스 휠**: 시간축 줌
- **Shift + 마우스 휠**: Y축 줌
- **드래그**: 특정 영역 선택하여 줌

#### 패널 크기 조정
- 패널 경계를 드래그하여 크기 조정
- 전체 화면: 패널 제목 클릭 → **View** 버튼

#### 범례 활용
- 지표명 클릭으로 on/off 토글
- 마지막 값, 최대값, 최소값, 평균값 표시

## 기술적 분석 활용법

### 🎯 추세 분석
1. **이동평균선 활용**:
   - 가격 > MA20 > MA50 > MA200: 강한 상승추세
   - 가격 < MA20 < MA50 < MA200: 강한 하락추세
   - 골든크로스: 단기이평 > 장기이평 (매수신호)
   - 데드크로스: 단기이평 < 장기이평 (매도신호)

2. **볼린저 밴드**:
   - 밴드 폭 확대: 변동성 증가
   - 상단 밴드 터치: 과매수 상태
   - 하단 밴드 터치: 과매도 상태

### ⚡ 모멘텀 분석
1. **RSI 활용**:
   - 30 이하에서 상승 전환: 매수 타이밍
   - 70 이상에서 하락 전환: 매도 타이밍
   - 다이버전스: 가격과 RSI 방향 불일치

2. **MACD 신호**:
   - MACD 라인이 Signal 라인 상향 돌파: 매수
   - MACD 라인이 Signal 라인 하향 돌파: 매도
   - Histogram 0선 돌파: 추세 전환 신호

3. **스토캐스틱**:
   - %K가 %D를 상향 돌파하며 20 이상: 매수
   - %K가 %D를 하향 돌파하며 80 이하: 매도

## 고급 기능

### 🚨 알림 설정
1. 패널에서 **Alert** 탭 클릭
2. **Create Alert** → 조건 설정:
   - 가격이 특정 이동평균 돌파
   - RSI가 30 이하 또는 70 이상
   - MACD 골든크로스/데드크로스
3. 알림 채널 설정 (이메일, Slack 등)

### 📈 비교 분석
1. 새로운 Query 추가
2. 다른 종목 데이터 추가
3. 동일 차트에서 여러 종목 비교

### 💾 대시보드 저장 및 공유
1. 상단 **저장** 버튼 클릭
2. 대시보드 이름 입력
3. **Share** 버튼으로 링크 공유 또는 스냅샷 생성

### 🎨 사용자 정의
#### 색상 변경
1. 패널 → **Edit** → **Field** 탭
2. **Color scheme** 변경
3. **Thresholds** 설정으로 구간별 색상

#### 경고선 추가
1. **Overrides** 탭
2. **Add field override**
3. **Thresholds** 설정으로 기준선 추가

## 자주 사용하는 조합

### 📊 단기 트레이딩용
- **기간**: 1-3개월
- **봉**: 일봉
- **지표**: RSI, 스토캐스틱, 5분/15분 MACD

### 📈 중장기 투자용  
- **기간**: 1-2년
- **봉**: 주봉/월봉
- **지표**: 장기 이동평균선, 월간 RSI

### 🔍 변동성 분석
- **볼린저 밴드** + **RSI** 조합
- 밴드 수축 후 확장 타이밍 포착
- RSI 다이버전스와 함께 분석

## 문제 해결

### ❌ 데이터가 표시되지 않는 경우
1. **데이터소스 연결** 확인
2. **시간 범위** 설정 확인  
3. **종목 코드** 정확성 확인
4. **데이터베이스** 내 데이터 존재 여부 확인

### 🐌 차트 로딩이 느린 경우
1. **시간 범위** 축소
2. **Refresh** 주기 조정 (5초 → 30초)
3. **Query** 최적화 필요 시 쿼리 수정

### 📱 모바일에서 보기
- 브라우저에서 접속 가능
- 터치 제스처로 줌/패닝
- 세로 모드에서 패널 배치 자동 조정

## 업데이트 및 확장

### 🔄 실시간 데이터
```bash
# 최신 데이터 업데이트
python backend/fetch_korea_stocks.py --update-only --days 1
```

### 📊 새로운 지표 추가
1. SQL 쿼리 작성
2. 패널 추가
3. 시각화 타입 선택

### 🌐 추가 시장 데이터
- 해외 주식 (미국, 중국 등)
- 암호화폐
- 원자재

## 참고 링크

- [Grafana 공식 문서](https://grafana.com/docs/)
- [PostgreSQL 쿼리 최적화](https://www.postgresql.org/docs/current/performance-tips.html)
- [기술적 분석 가이드](https://www.investopedia.com/technical-analysis/)

---

### 💡 팁과 요령

1. **북마크 활용**: 자주 보는 종목들을 별도 대시보드로 저장
2. **변수 활용**: 종목, 기간, 지표를 변수로 만들어 유연하게 사용
3. **스냅샷 활용**: 중요한 차트 패턴을 스냅샷으로 저장
4. **알림 설정**: 관심 종목의 주요 신호를 알림으로 받기
5. **성능 최적화**: 불필요한 쿼리 제거, 인덱스 활용

**Happy Trading! 📈📊**