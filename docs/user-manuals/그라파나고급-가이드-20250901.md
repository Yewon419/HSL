# ì£¼ì‹ ê±°ë˜ ì‹œìŠ¤í…œ Grafana ì‚¬ìš©ì ë§¤ë‰´ì–¼
**ë²„ì „**: 2.0  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025ë…„ 9ì›” 1ì¼  
**ëŒ€ìƒ**: ì£¼ì‹ ê±°ë˜ ì‹œìŠ¤í…œ ì‚¬ìš©ì  

---

## ğŸ“‹ ëª©ì°¨
1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì ‘ì† ë° ë¡œê·¸ì¸](#ì ‘ì†-ë°-ë¡œê·¸ì¸)
3. [ëŒ€ì‹œë³´ë“œ ì„¤ì¹˜](#ëŒ€ì‹œë³´ë“œ-ì„¤ì¹˜)
4. [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
5. [ì°¨íŠ¸ ë° ì§€í‘œ ë¶„ì„](#ì°¨íŠ¸-ë°-ì§€í‘œ-ë¶„ì„)
6. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)
7. [ê³ ê¸‰ ê¸°ëŠ¥](#ê³ ê¸‰-ê¸°ëŠ¥)

---

## ğŸ¯ ì‹œìŠ¤í…œ ê°œìš”

### Grafana ëŒ€ì‹œë³´ë“œ ì£¼ìš” íŠ¹ì§•
- **ì „ì²´ ì¢…ëª© ì§€ì›**: 2,773ê°œ ëª¨ë“  í•œêµ­ ì£¼ì‹ ì¢…ëª© ë¶„ì„ ê°€ëŠ¥
- **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§**: 30ì´ˆë§ˆë‹¤ ìë™ ë°ì´í„° ì—…ë°ì´íŠ¸
- **ê¸°ìˆ ì  ì§€í‘œ**: RSI, MACD, Stochastic, ì´ë™í‰ê· ì„ , ë³¼ë¦°ì € ë°´ë“œ
- **ë§¤ë§¤ ì‹ í˜¸**: ìë™ BUY/SELL/HOLD ì‹ í˜¸ ìƒì„±
- **ë™ì  ì‹œê°„ ë²”ìœ„**: 1ì¼ë¶€í„° 1ë…„ê¹Œì§€ ììœ  ì„¤ì •
- **ì¸í„°ë™í‹°ë¸Œ ì°¨íŠ¸**: í™•ëŒ€/ì¶•ì†Œ, ì§€í‘œ í† ê¸€ ê¸°ëŠ¥

### ì‹œìŠ¤í…œ êµ¬ì„±ìš”ì†Œ
- **ë°ì´í„°ë² ì´ìŠ¤**: PostgreSQL (ì£¼ê°€ ë° ì§€í‘œ ë°ì´í„°)
- **ì‹œê°í™”**: Grafana (ëŒ€ì‹œë³´ë“œ ë° ì°¨íŠ¸)
- **ë°±ì—”ë“œ**: FastAPI (ë°ì´í„° ì²˜ë¦¬ ë° API)
- **ì§€í‘œ ê³„ì‚°**: Python + TA-Lib (ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚°)

---

## ğŸŒ ì ‘ì† ë° ë¡œê·¸ì¸

### 1. Grafana ì ‘ì†
```
URL: http://localhost:3000
ì‚¬ìš©ìëª…: admin
ë¹„ë°€ë²ˆí˜¸: admin
```

### 2. ì²« ë¡œê·¸ì¸ í›„ ì„¤ì •
1. ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:3000` ì ‘ì†
2. ì´ˆê¸° ë¡œê·¸ì¸ ì •ë³´ ì…ë ¥:
   - Username: `admin`
   - Password: `admin`
3. ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ê¶Œì¥ (ì„ íƒì‚¬í•­)
4. Welcome í™”ë©´ì—ì„œ "Skip" í´ë¦­

### 3. ì–¸ì–´ ì„¤ì • ë³€ê²½ (ì„ íƒì‚¬í•­)
1. ì¢Œì¸¡ ë©”ë‰´ â†’ Configuration â†’ Preferences
2. Language â†’ Korean ì„ íƒ
3. Save í´ë¦­

---

## ğŸ“¥ ëŒ€ì‹œë³´ë“œ ì„¤ì¹˜

### ë°©ë²• 1: ìˆ˜ë™ ì„í¬íŠ¸ (ê¶Œì¥)

#### Step 1: PostgreSQL ë°ì´í„°ì†ŒìŠ¤ ì„¤ì •
1. ì¢Œì¸¡ ë©”ë‰´ â†’ **Configuration** â†’ **Data sources**
2. **Add data source** í´ë¦­
3. **PostgreSQL** ì„ íƒ
4. ë‹¤ìŒ ì •ë³´ ì…ë ¥:
   ```
   Name: PostgreSQL
   Host: stock-db:5432
   Database: stocktrading
   User: admin
   Password: admin123
   SSL Mode: disable
   ```
5. **Save & test** í´ë¦­í•˜ì—¬ ì—°ê²° í™•ì¸

#### Step 2: ëŒ€ì‹œë³´ë“œ ì„í¬íŠ¸
1. ì¢Œì¸¡ ë©”ë‰´ â†’ **+** â†’ **Import**
2. **Upload JSON file** í´ë¦­
3. íŒŒì¼ ì„ íƒ: `F:\hhstock\stock-trading-system\monitoring\grafana\dashboards\fixed-enhanced-dashboard.json`
4. **Load** í´ë¦­
5. ì„¤ì • í™•ì¸:
   - Name: `Fixed Enhanced Stock Analysis Dashboard`
   - Folder: General (ê¸°ë³¸ê°’)
   - PostgreSQL: PostgreSQL (ìë™ ì„ íƒë¨)
6. **Import** í´ë¦­

### ë°©ë²• 2: ìë™ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸

#### Step 1: ë°ì´í„°ì†ŒìŠ¤ ìë™ ì„¤ì •
```bash
python F:\hhstock\stock-trading-system\setup_grafana_datasource.py
```

#### Step 2: ëŒ€ì‹œë³´ë“œ ìë™ ì„í¬íŠ¸  
```bash
python F:\hhstock\stock-trading-system\import_dashboard.py
```

### ì„¤ì¹˜ í™•ì¸
- ì¢Œì¸¡ ë©”ë‰´ â†’ **Dashboards** â†’ **Browse**
- **Fixed Enhanced Stock Analysis Dashboard** í™•ì¸
- í´ë¦­í•˜ì—¬ ëŒ€ì‹œë³´ë“œ ì—´ê¸°

---

## ğŸ›ï¸ ì£¼ìš” ê¸°ëŠ¥

### 1. ì¢…ëª© ì„ íƒ
![ì¢…ëª© ì„ íƒ](ìƒë‹¨ ë“œë¡­ë‹¤ìš´ ë©”ë‰´)

#### ì‚¬ìš©ë²•:
1. ëŒ€ì‹œë³´ë“œ ìƒë‹¨ì˜ **ì¢…ëª©ì½”ë“œ** ë“œë¡­ë‹¤ìš´ í´ë¦­
2. ê²€ìƒ‰ì°½ì— ì¢…ëª©ì½”ë“œ ì…ë ¥ (ì˜ˆ: `005930`)
3. ì›í•˜ëŠ” ì¢…ëª© ì„ íƒ
4. ìë™ìœ¼ë¡œ ëª¨ë“  ì°¨íŠ¸ê°€ í•´ë‹¹ ì¢…ëª©ìœ¼ë¡œ ë³€ê²½ë¨

#### ì£¼ìš” ì¢…ëª© ì½”ë“œ:
- **005930**: ì‚¼ì„±ì „ì
- **000660**: SKí•˜ì´ë‹‰ìŠ¤  
- **035420**: NAVER
- **068270**: ì…€íŠ¸ë¦¬ì˜¨
- **207940**: ì‚¼ì„±ë°”ì´ì˜¤ë¡œì§ìŠ¤
- **035720**: ì¹´ì¹´ì˜¤
- **051910**: LGí™”í•™
- **006400**: ì‚¼ì„±SDI

### 2. ì§€í‘œ í† ê¸€ (í‘œì‹œ/ìˆ¨ê¹€)
ëŒ€ì‹œë³´ë“œ ìƒë‹¨ì—ì„œ ì›í•˜ëŠ” ì§€í‘œë§Œ ì„ íƒì ìœ¼ë¡œ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

#### ì´ë™í‰ê· ì„ :
- **SMA 20**: 20ì¼ ë‹¨ìˆœì´ë™í‰ê·  (ê¸°ë³¸: ì¼œì§)
- **SMA 50**: 50ì¼ ë‹¨ìˆœì´ë™í‰ê·  (ê¸°ë³¸: ì¼œì§)  
- **SMA 200**: 200ì¼ ë‹¨ìˆœì´ë™í‰ê·  (ê¸°ë³¸: êº¼ì§)
- **EMA**: 20ì¼ ì§€ìˆ˜ì´ë™í‰ê·  (ê¸°ë³¸: êº¼ì§)

#### ë³€ë™ì„± ì§€í‘œ:
- **ë³¼ë¦°ì € ë°´ë“œ**: ìƒë‹¨/ì¤‘ê°„/í•˜ë‹¨ ë°´ë“œ (ê¸°ë³¸: ì¼œì§)

#### ì‚¬ìš©ë²•:
1. ìƒë‹¨ í† ê¸€ ìŠ¤ìœ„ì¹˜ì—ì„œ **Yes/No** ì„ íƒ
2. ì°¨íŠ¸ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¨
3. ë¶ˆí•„ìš”í•œ ì§€í‘œëŠ” **No**ë¡œ ì„¤ì •í•˜ì—¬ ì°¨íŠ¸ ê°€ë…ì„± í–¥ìƒ

### 3. ì‹œê°„ ë²”ìœ„ ì„¤ì •
ìš°ìƒë‹¨ì˜ ì‹œê°„ ì„ íƒê¸°ë¡œ ë¶„ì„ ê¸°ê°„ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

#### ê¸°ë³¸ ì œê³µ ë²”ìœ„:
- **Last 1 hour**: ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ìš©
- **Last 6 hours**: ë‹¨ê¸° ë³€ë™ ë¶„ì„
- **Last 24 hours**: ì¼ì¤‘ ê±°ë˜ íŒ¨í„´ ë¶„ì„
- **Last 7 days**: ì£¼ê°„ ì¶”ì„¸ ë¶„ì„
- **Last 30 days**: ì›”ê°„ íŒ¨í„´ ë¶„ì„ (ê¸°ë³¸ê°’)
- **Last 90 days**: ë¶„ê¸°ë³„ ë¶„ì„
- **Last 1 year**: ì—°ê°„ ì¥ê¸° ì¶”ì„¸

#### ì»¤ìŠ¤í…€ ë²”ìœ„ ì„¤ì •:
1. ì‹œê°„ ì„ íƒê¸° í´ë¦­
2. **Custom range** ì„ íƒ
3. From/To ë‚ ì§œ ì§ì ‘ ì…ë ¥
4. **Apply** í´ë¦­

### 4. ìë™ ìƒˆë¡œê³ ì¹¨
- **ê¸°ë³¸ ì„¤ì •**: 30ì´ˆë§ˆë‹¤ ìë™ ì—…ë°ì´íŠ¸
- **ë³€ê²½ ë°©ë²•**: ìš°ìƒë‹¨ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ í´ë¦­ â†’ ê°„ê²© ì„ íƒ
- **ì˜µì…˜**: Off, 5s, 10s, 30s, 1m, 5m, 15m, 30m, 1h

---

## ğŸ“Š ì°¨íŠ¸ ë° ì§€í‘œ ë¶„ì„

### 1. ë©”ì¸ ì°¨íŠ¸ (ì£¼ê°€ ë° ê¸°ìˆ ì  ì§€í‘œ)
**ìœ„ì¹˜**: ëŒ€ì‹œë³´ë“œ ìµœìƒë‹¨  
**í¬ê¸°**: ì „ì²´ ë„ˆë¹„ Ã— ë†’ì´ 8ë‹¨ìœ„

#### í‘œì‹œ ë‚´ìš©:
- **ì¢…ê°€**: ì£¼ì‹ì˜ ì¼ë³„ ì¢…ê°€ (íŒŒë€ìƒ‰ ì‹¤ì„ )
- **SMA 20**: 20ì¼ ë‹¨ìˆœì´ë™í‰ê·  (ë¹¨ê°„ìƒ‰ ì‹¤ì„ )
- **SMA 50**: 50ì¼ ë‹¨ìˆœì´ë™í‰ê·  (íŒŒë€ìƒ‰ ì‹¤ì„ )  
- **SMA 200**: 200ì¼ ë‹¨ìˆœì´ë™í‰ê·  (ë…¸ë€ìƒ‰ ì‹¤ì„ )
- **EMA 20**: 20ì¼ ì§€ìˆ˜ì´ë™í‰ê·  (ë³´ë¼ìƒ‰ ì ì„ )
- **ë³¼ë¦°ì € ë°´ë“œ**: ìƒë‹¨/ì¤‘ê°„/í•˜ë‹¨ ë°´ë“œ (ë…¸ë€ìƒ‰)

#### ë¶„ì„ ë°©ë²•:
- **ê³¨ë“  í¬ë¡œìŠ¤**: SMA 20ì´ SMA 50ì„ ìœ„ë¡œ ëŒíŒŒ â†’ ë§¤ìˆ˜ ì‹ í˜¸
- **ë°ë“œ í¬ë¡œìŠ¤**: SMA 20ì´ SMA 50ì„ ì•„ë˜ë¡œ ëŒíŒŒ â†’ ë§¤ë„ ì‹ í˜¸
- **ë³¼ë¦°ì € ë°´ë“œ**: 
  - ìƒë‹¨ ë°´ë“œ ê·¼ì²˜ â†’ ê³¼ë§¤ìˆ˜ êµ¬ê°„
  - í•˜ë‹¨ ë°´ë“œ ê·¼ì²˜ â†’ ê³¼ë§¤ë„ êµ¬ê°„
  - ë°´ë“œ í­ í™•ì¥ â†’ ë³€ë™ì„± ì¦ê°€

### 2. ê±°ë˜ëŸ‰ ì°¨íŠ¸
**ìœ„ì¹˜**: ë©”ì¸ ì°¨íŠ¸ ë°”ë¡œ ì•„ë˜  
**í¬ê¸°**: ì „ì²´ ë„ˆë¹„ Ã— ë†’ì´ 6ë‹¨ìœ„

#### ë¶„ì„ í¬ì¸íŠ¸:
- **ê±°ë˜ëŸ‰ ê¸‰ì¦**: ì£¼ê°€ ë³€ë™ ì‹œ ê±°ë˜ëŸ‰ ë™ë°˜ ìƒìŠ¹ í™•ì¸
- **ê±°ë˜ëŸ‰ ê°ì†Œ**: ì¶”ì„¸ ì•½í™” ì‹ í˜¸ ê°€ëŠ¥ì„±
- **í‰ê·  ê±°ë˜ëŸ‰**: ìµœê·¼ 20ì¼ í‰ê· ê³¼ ë¹„êµ ë¶„ì„

### 3. RSI (ìƒëŒ€ê°•ë„ì§€ìˆ˜)
**ìœ„ì¹˜**: í•˜ë‹¨ ì¢Œì¸¡  
**ë²”ìœ„**: 0-100  
**ì„ê³„ê°’**: 30 (ê³¼ë§¤ë„) / 70 (ê³¼ë§¤ìˆ˜)

#### í•´ì„ ë°©ë²•:
- **RSI > 70**: ê³¼ë§¤ìˆ˜ ìƒíƒœ, ì¡°ì • ê°€ëŠ¥ì„±
- **RSI < 30**: ê³¼ë§¤ë„ ìƒíƒœ, ë°˜ë“± ê°€ëŠ¥ì„±  
- **RSI 50**: ì¤‘ë¦½ ì§€ì—­
- **ë‹¤ì´ë²„ì „ìŠ¤**: RSIì™€ ì£¼ê°€ ë°©í–¥ ë¶ˆì¼ì¹˜ ì‹œ ì¶”ì„¸ ì „í™˜ ì‹ í˜¸

### 4. MACD
**ìœ„ì¹˜**: í•˜ë‹¨ ì¤‘ì•™  
**êµ¬ì„±**: MACDì„ , Signalì„ , Histogram

#### ë§¤ë§¤ ì‹ í˜¸:
- **MACD > Signal**: ìƒìŠ¹ ì¶”ì„¸
- **MACD < Signal**: í•˜ë½ ì¶”ì„¸
- **Golden Cross**: MACDì„ ì´ Signalì„ ì„ ìƒí–¥ ëŒíŒŒ â†’ ë§¤ìˆ˜
- **Dead Cross**: MACDì„ ì´ Signalì„ ì„ í•˜í–¥ ëŒíŒŒ â†’ ë§¤ë„
- **Histogram**: MACDì™€ Signalì„ ì˜ ì°¨ì´, ì¶”ì„¸ ê°•ë„ í‘œì‹œ

### 5. Stochastic (ìŠ¤í† ìºìŠ¤í‹±)
**ìœ„ì¹˜**: í•˜ë‹¨ ìš°ì¸¡  
**êµ¬ì„±**: %Kì„ , %Dì„   
**ë²”ìœ„**: 0-100

#### ë¶„ì„ ë°©ë²•:
- **%K > 80**: ê³¼ë§¤ìˆ˜ êµ¬ê°„
- **%K < 20**: ê³¼ë§¤ë„ êµ¬ê°„
- **%K > %D**: ìƒìŠ¹ ëª¨ë©˜í…€
- **%K < %D**: í•˜ë½ ëª¨ë©˜í…€

### 6. í˜„ì¬ ì§€í‘œ ê°’
**ìœ„ì¹˜**: í•˜ë‹¨ ì¢Œì¸¡  
**í˜•íƒœ**: í…Œì´ë¸” í˜•íƒœì˜ ìˆ˜ì¹˜ í‘œì‹œ

#### í‘œì‹œ ì •ë³´:
- **í˜„ì¬ê°€ê²©**: ìµœì‹  ì¢…ê°€
- **SMA 20/50**: í˜„ì¬ ì´ë™í‰ê· ê°’
- **EMA 20**: í˜„ì¬ ì§€ìˆ˜ì´ë™í‰ê· ê°’
- **RSI**: í˜„ì¬ RSI ìˆ˜ì¹˜
- **MACD**: í˜„ì¬ MACD ìˆ˜ì¹˜

### 7. ë§¤ë§¤ ì‹ í˜¸
**ìœ„ì¹˜**: í•˜ë‹¨ ìš°ì¸¡  
**ì‹ í˜¸**: BUY / SELL / HOLD

#### ì‹ í˜¸ ìƒì„± ë¡œì§:
- **BUY ì‹ í˜¸**: RSI < 30 AND í˜„ì¬ê°€ > SMA 20
- **SELL ì‹ í˜¸**: RSI > 70 AND í˜„ì¬ê°€ < SMA 20  
- **HOLD ì‹ í˜¸**: ìœ„ ì¡°ê±´ì— í•´ë‹¹í•˜ì§€ ì•ŠëŠ” ê²½ìš°

#### ì‹ í˜¸ í•´ì„:
- **ğŸŸ¢ BUY**: ë§¤ìˆ˜ ê²€í†  ê¶Œì¥
- **ğŸ”´ SELL**: ë§¤ë„ ê²€í†  ê¶Œì¥
- **ğŸŸ¡ HOLD**: ë³´ìœ  ë˜ëŠ” ê´€ë§ ê¶Œì¥

---

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤

#### 1. "No data" ë˜ëŠ” ë¹ˆ ì°¨íŠ¸ê°€ í‘œì‹œë˜ëŠ” ê²½ìš°

**ì¦ìƒ**: ì°¨íŠ¸ê°€ ë¹„ì–´ìˆê±°ë‚˜ "No data" ë©”ì‹œì§€ í‘œì‹œ

**í•´ê²° ë°©ë²•**:
1. **ì‹œê°„ ë²”ìœ„ í™•ì¸**: 
   - ìš°ìƒë‹¨ ì‹œê°„ ì„ íƒê¸°ì—ì„œ ë” ë„“ì€ ë²”ìœ„ë¡œ ì„¤ì • (ì˜ˆ: Last 30 days)
2. **ì¢…ëª© ë°ì´í„° í™•ì¸**:
   - ë‹¤ë¥¸ ì£¼ìš” ì¢…ëª©(005930, 000660)ìœ¼ë¡œ ë³€ê²½í•´ì„œ í…ŒìŠ¤íŠ¸
3. **ë°ì´í„°ì†ŒìŠ¤ ì—°ê²° í™•ì¸**:
   - Configuration â†’ Data sources â†’ PostgreSQL â†’ Test í´ë¦­
4. **ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸**:
   ```bash
   docker exec stock-db psql -U admin -d stocktrading -c "SELECT COUNT(*) FROM stock_prices WHERE ticker = '005930';"
   ```

#### 2. RSI, MACD ë“± ê¸°ìˆ ì  ì§€í‘œê°€ í‘œì‹œë˜ì§€ ì•ŠëŠ” ê²½ìš°

**ì¦ìƒ**: ì£¼ê°€ëŠ” ë³´ì´ì§€ë§Œ ê¸°ìˆ ì  ì§€í‘œ ì°¨íŠ¸ê°€ ë¹„ì–´ìˆìŒ

**í•´ê²° ë°©ë²•**:
1. **ì§€í‘œ ë°ì´í„° í™•ì¸**:
   ```bash
   docker exec stock-db psql -U admin -d stocktrading -c "SELECT COUNT(*) FROM indicator_values WHERE ticker = '005930' AND indicator_id = 10;"
   ```
2. **ì§€í‘œ ê³„ì‚° ì‹¤í–‰**:
   ```bash
   docker exec stock-backend python run_indicator_calculator.py
   ```
3. **ë¡œê·¸ í™•ì¸**:
   ```bash
   docker logs stock-celery-worker --tail=50
   ```

#### 3. ë§¤ë§¤ ì‹ í˜¸ê°€ í•­ìƒ "HOLD"ë¡œ í‘œì‹œë˜ëŠ” ê²½ìš°

**ì¦ìƒ**: Trading Signalì´ ê³„ì† HOLDë§Œ í‘œì‹œ

**í•´ê²° ë°©ë²•**:
1. **RSI ë°ì´í„° í™•ì¸**: RSI ì°¨íŠ¸ì— ì‹¤ì œ ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸
2. **ì‹ í˜¸ ë¡œì§ í™•ì¸**: RSIê°€ 30 ì´í•˜ ë˜ëŠ” 70 ì´ìƒì¸ ì¢…ëª©ìœ¼ë¡œ í…ŒìŠ¤íŠ¸
3. **ìˆ˜ë™ ì¿¼ë¦¬ í…ŒìŠ¤íŠ¸**:
   ```sql
   SELECT 
     (rsi.value->>'rsi')::numeric as rsi_val,
     sp.close_price,
     (sma.value->>'sma_20')::numeric as sma20
   FROM stocks s
   LEFT JOIN stock_prices sp ON s.ticker = sp.ticker
   LEFT JOIN indicator_values rsi ON s.ticker = rsi.ticker
   WHERE s.ticker = '005930' 
   ORDER BY sp.date DESC LIMIT 1;
   ```

#### 4. ëŒ€ì‹œë³´ë“œ ë¡œë”©ì´ ëŠë¦° ê²½ìš°

**ì¦ìƒ**: ëŒ€ì‹œë³´ë“œ ë¡œë“œì— 30ì´ˆ ì´ìƒ ì†Œìš”

**í•´ê²° ë°©ë²•**:
1. **ì‹œê°„ ë²”ìœ„ ì¶•ì†Œ**: 3ê°œì›” â†’ 1ê°œì›” â†’ 1ì£¼ì¼ë¡œ ë‹¨ê³„ì  ì¶•ì†Œ
2. **ë¶ˆí•„ìš”í•œ ì§€í‘œ ë¹„í™œì„±í™”**: SMA 200, EMA ë“±ì„ Noë¡œ ì„¤ì •
3. **ìƒˆë¡œê³ ì¹¨ ê°„ê²© ì¦ê°€**: 30ì´ˆ â†’ 1ë¶„ ë˜ëŠ” 5ë¶„ìœ¼ë¡œ ë³€ê²½
4. **ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ í™•ì¸**:
   ```bash
   docker stats stock-db
   ```

### ì‹œìŠ¤í…œ ì¬ì‹œì‘

#### ì „ì²´ ì‹œìŠ¤í…œ ì¬ì‹œì‘:
```bash
cd F:\hhstock\stock-trading-system
docker-compose restart
```

#### ê°œë³„ ì„œë¹„ìŠ¤ ì¬ì‹œì‘:
```bash
# Grafanaë§Œ ì¬ì‹œì‘
docker restart stock-grafana

# ë°ì´í„°ë² ì´ìŠ¤ë§Œ ì¬ì‹œì‘  
docker restart stock-db

# ë°±ì—”ë“œë§Œ ì¬ì‹œì‘
docker restart stock-backend
```

---

## ğŸš€ ê³ ê¸‰ ê¸°ëŠ¥

### 1. ì»¤ìŠ¤í…€ ì¿¼ë¦¬ ì‘ì„±

#### íŒ¨ë„ í¸ì§‘ ëª¨ë“œ:
1. ì›í•˜ëŠ” íŒ¨ë„ì˜ ì œëª© í´ë¦­ â†’ **Edit** ì„ íƒ
2. **Query** íƒ­ì—ì„œ SQL ì¿¼ë¦¬ ìˆ˜ì • ê°€ëŠ¥
3. **Apply** í´ë¦­í•˜ì—¬ ë³€ê²½ì‚¬í•­ ì €ì¥

#### ìœ ìš©í•œ ì¿¼ë¦¬ ì˜ˆì œ:

**ì¼ë³„ ìˆ˜ìµë¥  ê³„ì‚°**:
```sql
SELECT 
  date,
  ticker,
  close_price,
  LAG(close_price) OVER (ORDER BY date) as prev_close,
  ROUND((close_price - LAG(close_price) OVER (ORDER BY date)) / LAG(close_price) OVER (ORDER BY date) * 100, 2) as return_pct
FROM stock_prices 
WHERE ticker = '$ticker' 
  AND date >= $__timeFrom() 
  AND date <= $__timeTo()
ORDER BY date;
```

**ê±°ë˜ëŸ‰ ì´ë™í‰ê· **:
```sql
SELECT 
  date,
  volume,
  AVG(volume) OVER (ORDER BY date ROWS BETWEEN 19 PRECEDING AND CURRENT ROW) as volume_ma20
FROM stock_prices 
WHERE ticker = '$ticker'
  AND date >= $__timeFrom() 
  AND date <= $__timeTo()
ORDER BY date;
```

### 2. ì•ŒëŒ ì„¤ì •

#### íŒ¨ë„ ì•ŒëŒ ìƒì„±:
1. íŒ¨ë„ í¸ì§‘ ëª¨ë“œ ì§„ì…
2. **Alert** íƒ­ ì„ íƒ
3. **Create Alert** í´ë¦­
4. ì¡°ê±´ ì„¤ì •:
   - **WHEN**: `avg()` OF query(A, 5m, now)
   - **IS ABOVE**: ì„ê³„ê°’ ì„¤ì •
5. **Notification** ì„¤ì • í›„ ì €ì¥

#### ì•ŒëŒ ì˜ˆì œ:
- **RSI ê³¼ë§¤ìˆ˜ ì•ŒëŒ**: RSI > 80ì¼ ë•Œ ì•Œë¦¼
- **ê¸‰ê²©í•œ ê°€ê²© ë³€ë™**: 1ì‹œê°„ ë‚´ 5% ì´ìƒ ë³€ë™ ì‹œ ì•Œë¦¼
- **ê±°ë˜ëŸ‰ ê¸‰ì¦**: í‰ê·  ê±°ë˜ëŸ‰ì˜ 200% ì´ìƒì¼ ë•Œ ì•Œë¦¼

### 3. ë‹¤ì¤‘ ì¢…ëª© ë¹„êµ ëŒ€ì‹œë³´ë“œ

#### ì¢…ëª© ë¹„êµ íŒ¨ë„ ìƒì„±:
1. **Add Panel** í´ë¦­
2. **Query** ì„¤ì •:
```sql
SELECT 
  date as time,
  ticker,
  close_price
FROM stock_prices 
WHERE ticker IN ('005930', '000660', '035420')
  AND date >= $__timeFrom() 
  AND date <= $__timeTo()
ORDER BY date;
```
3. **Field options** â†’ **Display name**: `${__field.labels.ticker}`

### 4. ì„±ëŠ¥ ì§€í‘œ ëŒ€ì‹œë³´ë“œ

#### í¬íŠ¸í´ë¦¬ì˜¤ ì„±ê³¼ ì¶”ì :
```sql
-- ì¼ë³„ í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜ ê³„ì‚°
WITH portfolio AS (
  SELECT '005930' as ticker, 100 as shares
  UNION ALL
  SELECT '000660' as ticker, 50 as shares
)
SELECT 
  sp.date,
  SUM(sp.close_price * p.shares) as portfolio_value
FROM stock_prices sp
JOIN portfolio p ON sp.ticker = p.ticker
WHERE sp.date >= $__timeFrom() 
  AND sp.date <= $__timeTo()
GROUP BY sp.date
ORDER BY sp.date;
```

### 5. ë°ì´í„° ë‚´ë³´ë‚´ê¸°

#### CSV ë‚´ë³´ë‚´ê¸°:
1. íŒ¨ë„ ì œëª© í´ë¦­ â†’ **Inspect** â†’ **Data**
2. **Download CSV** í´ë¦­
3. Excel ë“±ì—ì„œ ì¶”ê°€ ë¶„ì„ ê°€ëŠ¥

#### API ì•¡ì„¸ìŠ¤:
```bash
# Grafana APIë¥¼ í†µí•œ ë°ì´í„° ì¡°íšŒ
curl -H "Authorization: Bearer YOUR_TOKEN" \
  "http://localhost:3000/api/datasources/proxy/1/query" \
  -d '{"queries":[{"rawSql":"SELECT * FROM stock_prices WHERE ticker = '\''005930'\''"}]}'
```

---

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

### ê¸°ìˆ  ì§€ì›
- **ì‹œìŠ¤í…œ ë¡œê·¸ í™•ì¸**: `docker logs stock-grafana`
- **ë°ì´í„°ë² ì´ìŠ¤ ì§ì ‘ ì ‘ê·¼**: `docker exec -it stock-db psql -U admin stocktrading`
- **ë°±ì—”ë“œ API í…ŒìŠ¤íŠ¸**: `http://localhost:8000/docs`

### ì¶”ê°€ ë¦¬ì†ŒìŠ¤
- **Grafana ê³µì‹ ë¬¸ì„œ**: https://grafana.com/docs/
- **PostgreSQL ì¿¼ë¦¬ ê°€ì´ë“œ**: https://www.postgresql.org/docs/
- **ê¸°ìˆ ì  ë¶„ì„ ì§€í‘œ ì„¤ëª…**: TA-Lib Documentation

### ë²„ì „ ì •ë³´
- **ëŒ€ì‹œë³´ë“œ ë²„ì „**: 2.0
- **Grafana ë²„ì „**: 10.2.0
- **PostgreSQL ë²„ì „**: 15 (TimescaleDB í™•ì¥)

---

## ğŸ“ ì—…ë°ì´íŠ¸ ë¡œê·¸

### v2.0 (2025-09-01)
- âœ… ì „ì²´ ì¢…ëª© ì§€ì› (2,773ê°œ)
- âœ… ë™ì  ì¢…ëª© ì„ íƒ ê¸°ëŠ¥
- âœ… RSI, MACD, Stochastic ì§€í‘œ ì •ìƒí™”
- âœ… ë§¤ë§¤ ì‹ í˜¸ ì‹œìŠ¤í…œ êµ¬í˜„
- âœ… ì‹¤ì‹œê°„ ë°ì´í„° ì—…ë°ì´íŠ¸
- âœ… ì§€í‘œ í† ê¸€ ê¸°ëŠ¥
- âœ… í–¥ìƒëœ ì°¨íŠ¸ ì„±ëŠ¥

### v1.0 (2025-08-31)
- ê¸°ë³¸ ëŒ€ì‹œë³´ë“œ êµ¬ì„±
- 5ê°œ ì¢…ëª© í•˜ë“œì½”ë”© ì§€ì›
- ê¸°ë³¸ ì°¨íŠ¸ ë° ì§€í‘œ

---

**ì´ ë§¤ë‰´ì–¼ë¡œ Grafana ëŒ€ì‹œë³´ë“œì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì™„ë²½í•˜ê²Œ í™œìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤!** ğŸ“ˆâœ¨