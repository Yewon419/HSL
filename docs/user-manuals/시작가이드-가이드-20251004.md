# í•œêµ­ ì£¼ì‹ ê±°ë˜ ì‹œìŠ¤í…œ ì‹œì‘ ê°€ì´ë“œ
**ì‘ì„±ì¼**: 2025ë…„ 10ì›” 4ì¼
**ë²„ì „**: 1.0

## ğŸ“‹ ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
4. [ì‹œì‘í•˜ê¸°](#ì‹œì‘í•˜ê¸°)
5. [ë°ì´í„° ìˆ˜ì§‘ í”„ë¡œì„¸ìŠ¤](#ë°ì´í„°-ìˆ˜ì§‘-í”„ë¡œì„¸ìŠ¤)
6. [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
7. [ì ‘ì† ì •ë³´](#ì ‘ì†-ì •ë³´)
8. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

í•œêµ­ ì£¼ì‹ ì‹œì¥ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ìˆ˜ì§‘í•˜ê³  ê¸°ìˆ ì  ì§€í‘œë¥¼ ê³„ì‚°í•˜ì—¬ íˆ¬ì ì¸ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•˜ëŠ” í†µí•© ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### ì£¼ìš” íŠ¹ì§•
- âœ… **ìë™ ë°ì´í„° ìˆ˜ì§‘**: KOSPI/KOSDAQ ì „ì²´ ì¢…ëª© (2,700+ ì¢…ëª©)
- âœ… **ì‹¤ì‹œê°„ ì§€í‘œ ê³„ì‚°**: RSI, MACD, Bollinger Bands, Stochastic ë“±
- âœ… **ì‹œê°í™” ëŒ€ì‹œë³´ë“œ**: Grafana ê¸°ë°˜ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
- âœ… **ìë™í™” íŒŒì´í”„ë¼ì¸**: Airflowë¥¼ í†µí•œ ì¼ì¼ ìë™ ìˆ˜ì§‘
- âœ… **ë°±í…ŒìŠ¤íŒ… ê¸°ëŠ¥**: íˆ¬ì ì „ëµ ê²€ì¦
- âœ… **ì¢…ëª© ìŠ¤í¬ë¦¬ë‹**: ì¡°ê±´ë³„ ì¢…ëª© í•„í„°ë§
- âœ… **ìë™ë§¤ë§¤ ì‹œê·¸ë„**: RSI+MA ì „ëµ ê¸°ë°˜ ë§¤ìˆ˜/ë§¤ë„ ì‹œê·¸ë„
- âœ… **ì‹¤ì‹œê°„ ì•Œë¦¼**: ì¹´ì¹´ì˜¤í†¡, Slack, ì´ë©”ì¼ ì•Œë¦¼ ì§€ì›
- âœ… **í¬ì§€ì…˜ ê´€ë¦¬**: ë§¤ìˆ˜/ë§¤ë„ ì´ë ¥ ë° ìˆ˜ìµë¥  ì¶”ì 

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Docker Compose í™˜ê²½                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Airflow    â”‚   â”‚   Backend    â”‚   â”‚   Celery     â”‚    â”‚
â”‚  â”‚  (ìŠ¤ì¼€ì¤„ëŸ¬)   â”‚â”€â”€â–¶â”‚   (FastAPI)  â”‚â”€â”€â–¶â”‚  (ì‘ì—…í)    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                   â”‚                   â”‚            â”‚
â”‚         â–¼                   â–¼                   â–¼            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                PostgreSQL + TimescaleDB               â”‚   â”‚
â”‚  â”‚           (ì£¼ê°€ ë°ì´í„°, ì§€í‘œ, ë©”íƒ€ë°ì´í„°)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                                    â”‚
â”‚         â–¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Grafana    â”‚   â”‚  InfluxDB    â”‚   â”‚    Redis     â”‚    â”‚
â”‚  â”‚ (ì‹œê°í™”)      â”‚   â”‚ (ì‹œê³„ì—´DB)   â”‚   â”‚  (ìºì‹œ)      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
stock-trading-system/
â”œâ”€â”€ ğŸ“‚ airflow/                      # Airflow DAG ë° ì„¤ì •
â”‚   â”œâ”€â”€ dags/
â”‚   â”‚   â”œâ”€â”€ daily_stock_data_pipeline.py    # â­ ë©”ì¸ ë°ì´í„° ìˆ˜ì§‘ DAG
â”‚   â”‚   â”œâ”€â”€ enhanced_korean_stock_pipeline.py
â”‚   â”‚   â””â”€â”€ korean_stock_pipeline.py
â”‚   â”œâ”€â”€ logs/                        # Airflow ë¡œê·¸
â”‚   â””â”€â”€ plugins/                     # ì»¤ìŠ¤í…€ í”ŒëŸ¬ê·¸ì¸
â”‚
â”œâ”€â”€ ğŸ“‚ backend/                      # FastAPI ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ main.py                      # API ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”œâ”€â”€ models.py                    # ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸
â”‚   â”œâ”€â”€ database.py                  # DB ì—°ê²° ì„¤ì •
â”‚   â”œâ”€â”€ config.py                    # ì„¤ì • íŒŒì¼
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ services/                 # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â””â”€â”€ indicator_calculator.py # ì§€í‘œ ê³„ì‚° ì—”ì§„
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ stock_service/            # ì£¼ì‹ ë°ì´í„° ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ router.py
â”‚   â”‚   â”œâ”€â”€ korea_stock_fetcher.py  # í•œêµ­ ì£¼ì‹ ë°ì´í„° ìˆ˜ì§‘
â”‚   â”‚   â””â”€â”€ indicators.py           # ì§€í‘œ ê³„ì‚°
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ trading_service/          # â­ ìë™ë§¤ë§¤ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ router.py                # Trading API ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ signal_detector.py       # ì‹œê·¸ë„ ê°ì§€ (RSI+MA)
â”‚   â”‚   â”œâ”€â”€ position_manager.py      # í¬ì§€ì…˜ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ notification_service.py  # ì•Œë¦¼ ì„œë¹„ìŠ¤ (Kakao/Slack/Email)
â”‚   â”‚   â””â”€â”€ models.py                # Trading ëª¨ë¸
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ user_service/             # ì‚¬ìš©ì ê´€ë¦¬
â”‚   â”œâ”€â”€ ğŸ“‚ simulation_service/       # ë°±í…ŒìŠ¤íŒ…
â”‚   â”œâ”€â”€ ğŸ“‚ screening_service/        # ì¢…ëª© ìŠ¤í¬ë¦¬ë‹
â”‚   â”œâ”€â”€ ğŸ“‚ ai_service/               # AI ì¶”ì²œ
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ frontend/                 # ì›¹ í”„ë¡ íŠ¸ì—”ë“œ
â”‚       â”œâ”€â”€ index.html               # ë©”ì¸ ëŒ€ì‹œë³´ë“œ
â”‚       â”œâ”€â”€ rsi_ma_strategy.html     # â­ RSI+MA ì‹œê·¸ë„ í™”ë©´
â”‚       â”œâ”€â”€ send_notification.html   # â­ ì•Œë¦¼ ì „ì†¡ í™”ë©´
â”‚       â””â”€â”€ screening.html           # ìŠ¤í¬ë¦¬ë‹ í™”ë©´
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸/
â”‚       â”œâ”€â”€ collect_missing_data.py        # ëˆ„ë½ ë°ì´í„° ìˆ˜ì§‘
â”‚       â”œâ”€â”€ simple_indicators_oct2.py      # ê°„ë‹¨í•œ ì§€í‘œ ê³„ì‚°
â”‚       â”œâ”€â”€ auto_fetch_korea_stocks.py     # ìë™ ì£¼ì‹ ìˆ˜ì§‘
â”‚       â””â”€â”€ update_indicators_incremental.py # ì¦ë¶„ ì§€í‘œ ì—…ë°ì´íŠ¸
â”‚
â”œâ”€â”€ ğŸ“‚ database/                     # ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
â”‚   â”œâ”€â”€ init.sql                     # ê¸°ë³¸ ìŠ¤í‚¤ë§ˆ ì •ì˜
â”‚   â””â”€â”€ trading_tables.sql           # â­ íŠ¸ë ˆì´ë”© í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ
â”‚
â”œâ”€â”€ ğŸ“‚ monitoring/                   # ëª¨ë‹ˆí„°ë§ ì„¤ì •
â”‚   â””â”€â”€ grafana/
â”‚       â”œâ”€â”€ dashboards/              # ëŒ€ì‹œë³´ë“œ JSON
â”‚       â””â”€â”€ datasources/             # ë°ì´í„°ì†ŒìŠ¤ ì„¤ì •
â”‚
â”œâ”€â”€ ğŸ“‚ frontend/                     # (ì„ íƒ) ì›¹ í”„ë¡ íŠ¸ì—”ë“œ
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                         # ë¬¸ì„œ
â”‚
â”œâ”€â”€ docker-compose.yml               # â­ Docker ì„œë¹„ìŠ¤ ì •ì˜
â””â”€â”€ requirements.txt                 # Python ì˜ì¡´ì„±

```

### ì£¼ìš” íŒŒì¼ ì„¤ëª…

#### ğŸ”¥ í•µì‹¬ íŒŒì¼
- `docker-compose.yml`: ì „ì²´ ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ ì •ì˜
- `airflow/dags/daily_stock_data_pipeline.py`: ì¼ì¼ ë°ì´í„° ìˆ˜ì§‘ ìë™í™”
- `backend/services/indicator_calculator.py`: ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚° ì—”ì§„
- `backend/stock_service/korea_stock_fetcher.py`: pykrx ê¸°ë°˜ ë°ì´í„° ìˆ˜ì§‘

#### ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”
- `stocks`: ì¢…ëª© ì •ë³´ (ticker, íšŒì‚¬ëª…, ì‹œì¥ êµ¬ë¶„)
- `stock_prices`: OHLCV ê°€ê²© ë°ì´í„° (TimescaleDB)
- `technical_indicators`: ê¸°ìˆ ì  ì§€í‘œ (RSI, MACD ë“±)
- `market_indices`: ì‹œì¥ ì§€ìˆ˜ (KOSPI, KOSDAQ)
- `stock_fundamentals`: í€ë”ë©˜í„¸ ë°ì´í„° (PER, PBR ë“±)
- â­ `trading_signals`: ë§¤ë§¤ ì‹œê·¸ë„ (ë§¤ìˆ˜/ë§¤ë„/ì†ì ˆ)
- â­ `trading_positions`: ë³´ìœ  í¬ì§€ì…˜ (ë§¤ìˆ˜/ë§¤ë„ ì´ë ¥)
- â­ `notification_logs`: ì•Œë¦¼ ë°œì†¡ ë¡œê·¸

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1. ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- **Docker Desktop**: 20.10 ì´ìƒ
- **Docker Compose**: 2.0 ì´ìƒ
- **ìµœì†Œ ì‹œìŠ¤í…œ ì‚¬ì–‘**:
  - RAM: 8GB ì´ìƒ ê¶Œì¥
  - ë””ìŠ¤í¬: 20GB ì´ìƒ ì—¬ìœ  ê³µê°„
  - OS: Windows 10/11, macOS, Linux

### 2. ì‹œìŠ¤í…œ ì‹œì‘

#### 2-1. Docker Compose ì‹œì‘

```bash
cd F:\hhstock\stock-trading-system
docker-compose up -d
```

#### 2-2. ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸

```bash
docker-compose ps
```

**ì˜ˆìƒ ì¶œë ¥**:
```
NAME                      IMAGE                                COMMAND                   STATUS
stock-airflow-init        apache/airflow:2.7.2                 ...                       Up
stock-airflow-scheduler   apache/airflow:2.7.2                 ...                       Up
stock-airflow-webserver   apache/airflow:2.7.2                 ...                       Up
stock-backend             stock-trading-system-backend         ...                       Up
stock-celery-beat         stock-trading-system-celery-beat     ...                       Up
stock-celery-worker       stock-trading-system-celery-worker   ...                       Up
stock-db                  timescale/timescaledb:latest-pg15    ...                       Up
stock-grafana             grafana/grafana:10.2.0               ...                       Up
stock-influxdb            influxdb:2.7                         ...                       Up
stock-redis               redis:7-alpine                       ...                       Up
```

#### 2-3. ë¡œê·¸ í™•ì¸

íŠ¹ì • ì„œë¹„ìŠ¤ ë¡œê·¸ í™•ì¸:
```bash
docker logs stock-backend
docker logs stock-airflow-webserver
```

ì‹¤ì‹œê°„ ë¡œê·¸ ëª¨ë‹ˆí„°ë§:
```bash
docker-compose logs -f backend
```

### 3. ì´ˆê¸° ì„¤ì •

#### 3-1. Airflow ì´ˆê¸°í™” ëŒ€ê¸°

ì²˜ìŒ ì‹œì‘ ì‹œ Airflowê°€ ì´ˆê¸°í™”ë˜ëŠ”ë° 2-3ë¶„ ì†Œìš”ë©ë‹ˆë‹¤.
```bash
# Airflow ì´ˆê¸°í™” ì™„ë£Œ í™•ì¸
docker logs stock-airflow-init
```

#### 3-2. í•„ìˆ˜ Python íŒ¨í‚¤ì§€ ì„¤ì¹˜

Backend ì»¨í…Œì´ë„ˆì— í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜:
```bash
docker exec stock-backend pip install pykrx tqdm TA-Lib
```

---

## ğŸ“Š ë°ì´í„° ìˆ˜ì§‘ í”„ë¡œì„¸ìŠ¤

### ìë™ ìˆ˜ì§‘ (ê¶Œì¥)

Airflow DAG `daily_stock_data_pipeline`ì´ ìë™ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

#### ìŠ¤ì¼€ì¤„
- **ì‹¤í–‰ ì‹œê°„**: ë§¤ì¼ ì˜¤í›„ 7ì‹œ (í•œêµ­ ì‹œê°„ ê¸°ì¤€, UTC 19:00)
- **ì‹¤í–‰ ìš”ì¼**: ì›”~ê¸ˆ (ì£¼ì‹ ì‹œì¥ ê°œì¥ì¼)

#### DAG ì‘ì—… ìˆœì„œ

```
1. collect_stock_prices         # ì£¼ê°€ ë°ì´í„° ìˆ˜ì§‘ (2,700+ ì¢…ëª©)
   â””â”€ pykrx API í˜¸ì¶œ
   â””â”€ OHLCV ë°ì´í„° ì €ì¥

2. collect_market_indices       # ì‹œì¥ ì§€ìˆ˜ ìˆ˜ì§‘
   â””â”€ KOSPI, KOSDAQ ì§€ìˆ˜
   â””â”€ ê±°ë˜ëŸ‰ ì •ë³´

3. calculate_technical_indicators  # ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚°
   â””â”€ RSI (14ì¼)
   â””â”€ MACD (12, 26, 9)
   â””â”€ Bollinger Bands (20ì¼, 2Ïƒ)
   â””â”€ Stochastic (14, 3)
   â””â”€ Moving Averages (20, 50, 200ì¼)

4. validate_data_quality        # ë°ì´í„° í’ˆì§ˆ ê²€ì¦
   â””â”€ ìˆ˜ì§‘ëœ ë°ì´í„° ê°œìˆ˜ í™•ì¸
   â””â”€ ì§€í‘œ ê³„ì‚° ì™„ë£Œ ì—¬ë¶€ í™•ì¸
```

#### DAG ìˆ˜ë™ ì‹¤í–‰

1. Airflow UI ì ‘ì†: http://localhost:8080
2. ë¡œê·¸ì¸: `admin` / `admin123`
3. `daily_stock_data_pipeline` DAG ì„ íƒ
4. **Trigger DAG** ë²„íŠ¼ í´ë¦­

### ìˆ˜ë™ ìˆ˜ì§‘ (ë°±ì—…)

íŠ¹ì • ë‚ ì§œì˜ ëˆ„ë½ ë°ì´í„° ìˆ˜ì§‘:

```bash
# ë°±ì—”ë“œ ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰
docker exec -it stock-backend bash

# íŠ¹ì • ë‚ ì§œ ìˆ˜ì§‘ (ì˜ˆ: 2025-10-05)
cd /app
python collect_missing_data.py
# ìŠ¤í¬ë¦½íŠ¸ ë‚´ë¶€ì—ì„œ ë‚ ì§œ ìˆ˜ì • í•„ìš”: collect_data_for_dates("2025-10-05", "2025-10-05")
```

### ë°ì´í„° í™•ì¸

```bash
# ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†
docker exec -it stock-db psql -U admin -d stocktrading

# ì£¼ê°€ ë°ì´í„° í™•ì¸
SELECT date, COUNT(*) as count
FROM stock_prices
WHERE date >= '2025-10-01'
GROUP BY date
ORDER BY date DESC;

# ì§€í‘œ ë°ì´í„° í™•ì¸
SELECT date, COUNT(*) as count,
       COUNT(CASE WHEN rsi IS NOT NULL THEN 1 END) as rsi_count
FROM technical_indicators
WHERE date >= '2025-10-01'
GROUP BY date
ORDER BY date DESC;

# ì¢…ë£Œ
\q
```

---

## ğŸ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. REST API (FastAPI)

#### ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸

```bash
# ê±´ê°• ì²´í¬
curl http://localhost:8000/health

# ì¢…ëª© ëª©ë¡ ì¡°íšŒ
curl http://localhost:8000/api/stocks

# íŠ¹ì • ì¢…ëª© ê°€ê²© ì¡°íšŒ
curl http://localhost:8000/api/stocks/005930/prices?start_date=2025-10-01&end_date=2025-10-04

# ê¸°ìˆ ì  ì§€í‘œ ì¡°íšŒ
curl http://localhost:8000/api/stocks/005930/indicators?start_date=2025-10-01&end_date=2025-10-04

# ì¢…ëª© ìŠ¤í¬ë¦¬ë‹ (RSI < 30)
curl -X POST http://localhost:8000/api/screening \
  -H "Content-Type: application/json" \
  -d '{"rsi_min": 0, "rsi_max": 30}'

# â­ ìë™ë§¤ë§¤ ì‹œê·¸ë„ ì¡°íšŒ
curl http://localhost:8000/api/trading/signals/buy
curl http://localhost:8000/api/trading/signals/all

# â­ ë³´ìœ  í¬ì§€ì…˜ ì¡°íšŒ
curl http://localhost:8000/api/trading/positions/open
```

#### API ë¬¸ì„œ
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

### 2. Grafana ëŒ€ì‹œë³´ë“œ

#### ì‚¬ì „ ì •ì˜ëœ ëŒ€ì‹œë³´ë“œ
1. **Technical Indicators Dashboard**: ê¸°ìˆ ì  ì§€í‘œ ì¢…í•© ë·°
2. **Stock Analysis Dashboard**: ê°œë³„ ì¢…ëª© ë¶„ì„
3. **Market Overview**: ì‹œì¥ ì „ì²´ ë™í–¥

#### ì»¤ìŠ¤í…€ ëŒ€ì‹œë³´ë“œ ìƒì„±

1. Grafana ì ‘ì†: http://localhost:3000
2. **Dashboards** â†’ **New Dashboard**
3. **Add Visualization** í´ë¦­
4. ë°ì´í„°ì†ŒìŠ¤: `PostgreSQL` ì„ íƒ
5. ì¿¼ë¦¬ ì˜ˆì‹œ:
```sql
SELECT
  date,
  close_price,
  ma_20,
  ma_50
FROM stock_prices sp
JOIN technical_indicators ti ON sp.ticker = ti.ticker AND sp.date = ti.date
WHERE sp.ticker = '005930'
ORDER BY date DESC
LIMIT 100
```

### 3. ì¢…ëª© ìŠ¤í¬ë¦¬ë‹

ì¡°ê±´ì— ë§ëŠ” ì¢…ëª© ì°¾ê¸°:

```python
# Python ì˜ˆì œ
import requests

response = requests.post('http://localhost:8000/api/screening', json={
    "rsi_min": 20,
    "rsi_max": 30,
    "price_min": 10000,
    "price_max": 50000,
    "volume_min": 100000
})

stocks = response.json()
print(f"Found {len(stocks)} stocks")
for stock in stocks[:10]:
    print(f"{stock['ticker']}: {stock['company_name']} - RSI: {stock['rsi']}")
```

### 4. ë°±í…ŒìŠ¤íŒ…

RSI ì „ëµ ë°±í…ŒìŠ¤íŠ¸:

```bash
docker exec stock-backend python /app/backtest_rsi_strategy.py
```

ê²°ê³¼ëŠ” `backtest_rsi_2025.csv`ì— ì €ì¥ë©ë‹ˆë‹¤.

---

## ğŸ”— ì ‘ì† ì •ë³´

### ì„œë¹„ìŠ¤ URL

| ì„œë¹„ìŠ¤ | URL | ê³„ì • | ë¹„ë°€ë²ˆí˜¸ |
|--------|-----|------|----------|
| **Backend API** | http://localhost:8000 | - | - |
| **API Docs (Swagger)** | http://localhost:8000/docs | - | - |
| â­ **RSI+MA ì‹œê·¸ë„ í™”ë©´** | http://localhost:8000/rsi_ma_strategy.html | - | - |
| â­ **ì•Œë¦¼ ì „ì†¡ í™”ë©´** | http://localhost:8000/send_notification.html | - | - |
| **ìŠ¤í¬ë¦¬ë‹ í™”ë©´** | http://localhost:8000/screening.html | - | - |
| **Airflow** | http://localhost:8080 | admin | admin123 |
| **Grafana** | http://localhost:3000 | admin | admin123 |
| **InfluxDB** | http://localhost:8086 | admin | admin123 |

### ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°

#### PostgreSQL (ì™¸ë¶€ ì ‘ì†)
```
Host: localhost
Port: 5435
Database: stocktrading
Username: admin
Password: admin123
```

#### ì»¨í…Œì´ë„ˆ ë‚´ë¶€ (ì„œë¹„ìŠ¤ ê°„ í†µì‹ )
```
Host: postgres
Port: 5432
Database: stocktrading
```

#### Redis
```
Host: localhost
Port: 6380
```

---

## ğŸ› ï¸ ë¬¸ì œ í•´ê²°

### 1. ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**: `docker-compose up -d` ì‹¤íŒ¨

**í•´ê²° ë°©ë²•**:
```bash
# ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ì •ë¦¬
docker-compose down -v

# ë‹¤ì‹œ ì‹œì‘
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs
```

### 2. ë°ì´í„° ìˆ˜ì§‘ ì‹¤íŒ¨

**ì¦ìƒ**: DAG ì‹¤í–‰ ì‹¤íŒ¨ ë˜ëŠ” ë°ì´í„° ì—†ìŒ

**í•´ê²° ë°©ë²•**:

1. **pykrx íŒ¨í‚¤ì§€ í™•ì¸**:
```bash
docker exec stock-backend pip list | grep pykrx
# ì—†ìœ¼ë©´ ì„¤ì¹˜
docker exec stock-backend pip install pykrx
```

2. **Airflow ë¡œê·¸ í™•ì¸**:
```bash
docker logs stock-airflow-scheduler | tail -100
```

3. **ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸**:
```bash
docker exec stock-db psql -U admin -d stocktrading -c "SELECT COUNT(*) FROM stocks;"
```

### 3. ì§€í‘œ ê³„ì‚° ì‹¤íŒ¨

**ì¦ìƒ**: `technical_indicators` í…Œì´ë¸”ì´ ë¹„ì–´ìˆìŒ

**í•´ê²° ë°©ë²•**:
```bash
# ìˆ˜ë™ìœ¼ë¡œ ì§€í‘œ ê³„ì‚° ì‹¤í–‰
docker exec stock-backend python /app/simple_indicators_oct2.py
```

### 4. Grafana ë°ì´í„°ì†ŒìŠ¤ ì—°ê²° ì‹¤íŒ¨

**í•´ê²° ë°©ë²•**:

1. Grafana UIì—ì„œ **Configuration** â†’ **Data Sources**
2. PostgreSQL ë°ì´í„°ì†ŒìŠ¤ ì„¤ì •:
   - Host: `postgres:5432`
   - Database: `stocktrading`
   - User: `admin`
   - Password: `admin123`
   - SSL Mode: `disable`
3. **Save & Test** í´ë¦­

### 5. ë©”ëª¨ë¦¬ ë¶€ì¡±

**ì¦ìƒ**: ì»¨í…Œì´ë„ˆê°€ ìì£¼ ì¬ì‹œì‘ë¨

**í•´ê²° ë°©ë²•**:

Docker Desktop ì„¤ì •ì—ì„œ ë¦¬ì†ŒìŠ¤ í• ë‹¹ ì¦ê°€:
- Settings â†’ Resources
- Memory: 8GB ì´ìƒ ê¶Œì¥
- Swap: 2GB

### 6. ë¡œê·¸ íŒŒì¼ í™•ì¸

```bash
# Airflow DAG ë¡œê·¸
docker exec stock-airflow-webserver ls -la /opt/airflow/logs/dag_id=daily_stock_data_pipeline/

# ë°±ì—”ë“œ ë¡œê·¸ (ìˆ˜ì§‘ ìŠ¤í¬ë¦½íŠ¸)
docker exec stock-backend ls -la /app/*.log
```

---

## ğŸ“ˆ ë°ì´í„° í˜„í™© (2025ë…„ 10ì›” 4ì¼ ê¸°ì¤€)

### ìˆ˜ì§‘ëœ ë°ì´í„°

| ë‚ ì§œ | ì£¼ê°€ ë°ì´í„° | ì‹œì¥ ì§€ìˆ˜ | ê¸°ìˆ ì  ì§€í‘œ |
|------|------------|----------|------------|
| 2025-10-01 | 301 ì¢…ëª© | 3ê°œ ì§€ìˆ˜ | 299 ì¢…ëª© |
| 2025-10-02 | 2,763 ì¢…ëª© | 3ê°œ ì§€ìˆ˜ | 2,668 ì¢…ëª© |
| 2025-10-03 | íœ´ì¥ | - | - |
| 2025-10-04 | íœ´ì¥ | - | - |

### ì§€í‘œ ì»¤ë²„ë¦¬ì§€

- âœ… **RSI**: 96.6%
- âœ… **MACD**: 96.6%
- âœ… **Bollinger Bands**: 96.6%
- âœ… **Stochastic**: 96.6%
- âœ… **Moving Averages (20, 50, 200ì¼)**: 96.6%

*ë‚˜ë¨¸ì§€ 3.4%ëŠ” ë°ì´í„° ë¶€ì¡± ë˜ëŠ” ê³„ì‚° ë¶ˆê°€ ì¢…ëª©*

---

## ğŸ”„ ì¼ì¼ ìš´ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë§¤ì¼ í™•ì¸ ì‚¬í•­

- [ ] Airflow DAG ì‹¤í–‰ ìƒíƒœ í™•ì¸
- [ ] ë°ì´í„° ìˆ˜ì§‘ ì™„ë£Œ ì—¬ë¶€ í™•ì¸
- [ ] ì§€í‘œ ê³„ì‚° ì™„ë£Œ ì—¬ë¶€ í™•ì¸
- [ ] Grafana ëŒ€ì‹œë³´ë“œ ì •ìƒ ì‘ë™ í™•ì¸

### ì£¼ê°„ í™•ì¸ ì‚¬í•­

- [ ] ë°ì´í„°ë² ì´ìŠ¤ ìš©ëŸ‰ í™•ì¸
- [ ] ë¡œê·¸ íŒŒì¼ ì •ë¦¬
- [ ] ë°±ì—… ìˆ˜í–‰

---

## ğŸ“š ì¶”ê°€ ë¦¬ì†ŒìŠ¤

### ë¬¸ì„œ
- [Airflow Documentation](https://airflow.apache.org/docs/)
- [FastAPI Documentation](https://fastapi.tiangolo.com/)
- [Grafana Documentation](https://grafana.com/docs/)
- [pykrx Documentation](https://github.com/sharebook-kr/pykrx)

### í”„ë¡œì íŠ¸ ë‚´ ë¬¸ì„œ
- `USER_MANUAL_20250831.md`: ì‚¬ìš©ì ë§¤ë‰´ì–¼
- `README_KOREA_STOCKS.md`: í•œêµ­ ì£¼ì‹ ìˆ˜ì§‘ ê°€ì´ë“œ
- `WORK_SUMMARY_2025-09-26.md`: ì‘ì—… ì´ë ¥

---

## ğŸ†˜ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

1. **ë¡œê·¸ í™•ì¸**: `docker-compose logs [ì„œë¹„ìŠ¤ëª…]`
2. **ì»¨í…Œì´ë„ˆ ìƒíƒœ**: `docker-compose ps`
3. **ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰**: `docker stats`

---

## ğŸ“ ë³€ê²½ ì´ë ¥

### 2025-10-04
- âœ… ì¼ì¼ ìë™ ë°ì´í„° ìˆ˜ì§‘ DAG ìƒì„± (`daily_stock_data_pipeline`)
- âœ… 2,763ê°œ ì „ì²´ ì¢…ëª© ë°ì´í„° ìˆ˜ì§‘ ì™„ë£Œ
- âœ… ê¸°ìˆ ì  ì§€í‘œ ìë™ ê³„ì‚° ê¸°ëŠ¥ ì¶”ê°€
- âœ… ë°ì´í„° í’ˆì§ˆ ê²€ì¦ ë¡œì§ ì¶”ê°€

---

**ì‘ì„±ì**: Stock Trading System Team
**ìµœì¢… ìˆ˜ì •**: 2025ë…„ 10ì›” 4ì¼
**ë²„ì „**: 1.0
