# ì£¼ì‹ íˆ¬ì ì‹œë®¬ë ˆì´ì…˜ ì‹œìŠ¤í…œ ì‚¬ìš©ì ë§¤ë‰´ì–¼

**ì‘ì„±ì¼**: 2025-08-29  
**ë²„ì „**: v1.0.0  
**ëŒ€ìƒ**: ê°œë°œì, íˆ¬ìì, ì‹œìŠ¤í…œ ê´€ë¦¬ì

---

## ğŸ“‹ ëª©ì°¨

1. [ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­](#-ì‹œìŠ¤í…œ-ìš”êµ¬ì‚¬í•­)
2. [ê°œë°œí™˜ê²½ ì„¤ì •](#-ê°œë°œí™˜ê²½-ì„¤ì •)
3. [í”„ë¡œì íŠ¸ ì‹¤í–‰ ë°©ë²•](#-í”„ë¡œì íŠ¸-ì‹¤í–‰-ë°©ë²•)
4. [ê¸°ë³¸ ì‚¬ìš©ë²•](#-ê¸°ë³¸-ì‚¬ìš©ë²•)
5. [ì£¼ê°€ ë°ì´í„° ìˆ˜ì§‘](#-ì£¼ê°€-ë°ì´í„°-ìˆ˜ì§‘)
6. [ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰](#-ì‹œë®¬ë ˆì´ì…˜-ì‹¤í–‰)
7. [ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ](#-ëª¨ë‹ˆí„°ë§-ëŒ€ì‹œë³´ë“œ)
8. [API ì‚¬ìš© ê°€ì´ë“œ](#-api-ì‚¬ìš©-ê°€ì´ë“œ)
9. [ë¬¸ì œ í•´ê²°](#-ë¬¸ì œ-í•´ê²°)

---

## ğŸ’» ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

### ìµœì†Œ ìš”êµ¬ì‚¬í•­
- **OS**: Windows 10/11, macOS 10.15+, Ubuntu 20.04+
- **RAM**: 8GB ì´ìƒ (ê¶Œì¥ 16GB)
- **Storage**: 10GB ì´ìƒ ì—¬ìœ  ê³µê°„
- **Network**: ì¸í„°ë„· ì—°ê²° (ì£¼ê°€ ë°ì´í„° ìˆ˜ì§‘ìš©)

### í•„ìˆ˜ ì†Œí”„íŠ¸ì›¨ì–´
- **Docker Desktop** 4.0+ 
- **Python** 3.10+ (ë‹¨ë… ì‹¤í–‰ ì‹œ)
- **Git** (í”„ë¡œì íŠ¸ í´ë¡ ìš©)
- **IDE**: IntelliJ IDEA, VS Code, PyCharm ë“±

### ê¶Œì¥ ì‚¬ì–‘ (ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬)
- **CPU**: 8ì½”ì–´ ì´ìƒ
- **RAM**: 32GB
- **SSD**: 50GB ì´ìƒ

---

## ğŸ› ï¸ ê°œë°œí™˜ê²½ ì„¤ì •

### 1. IntelliJ IDEAì—ì„œ í”„ë¡œì íŠ¸ ì„¤ì •

#### Step 1: í”„ë¡œì íŠ¸ í´ë¡ 
```bash
# Gitì—ì„œ í”„ë¡œì íŠ¸ í´ë¡ 
git clone <repository_url>
cd stock-trading-system
```

#### Step 2: IntelliJì—ì„œ í”„ë¡œì íŠ¸ ì—´ê¸°
1. **IntelliJ IDEA** ì‹¤í–‰
2. **File â†’ Open** ì„ íƒ
3. `stock-trading-system` í´ë” ì„ íƒ
4. **Open as Project** í´ë¦­

#### Step 3: Python SDK ì„¤ì •
1. **File â†’ Project Structure** (Ctrl+Alt+Shift+S)
2. **Project** íƒ­ì—ì„œ **Project SDK** ì„¤ì •
3. **Add SDK â†’ Python SDK** ì„ íƒ
4. Python 3.10+ ì¸í„°í”„ë¦¬í„° ì„ íƒ

#### Step 4: ê°€ìƒí™˜ê²½ ìƒì„± (ê¶Œì¥)
```bash
# backend í´ë”ì—ì„œ ì‹¤í–‰
cd backend
python -m venv venv

# Windows
venv\Scripts\activate
# Linux/Mac  
source venv/bin/activate

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt
```

### 2. VS Code ì„¤ì •

#### Step 1: í™•ì¥ í”„ë¡œê·¸ë¨ ì„¤ì¹˜
- **Python Extension**
- **Docker Extension** 
- **SQLTools** (ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬)
- **Rest Client** (API í…ŒìŠ¤íŠ¸)

#### Step 2: ì‘ì—… í™˜ê²½ ì„¤ì •
```json
// .vscode/settings.json
{
    "python.defaultInterpreterPath": "./backend/venv/bin/python",
    "python.terminal.activateEnvironment": true,
    "files.exclude": {
        "**/__pycache__": true,
        "**/*.pyc": true
    }
}
```

### 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
```bash
# backend/.env íŒŒì¼ ìƒì„±
cp backend/.env.example backend/.env

# í•„ìš”í•œ ê°’ë“¤ ìˆ˜ì •
DATABASE_URL=postgresql://admin:admin123@localhost:5435/stocktrading
REDIS_URL=redis://localhost:6380
JWT_SECRET_KEY=your-secret-key-here
```

---

## ğŸš€ í”„ë¡œì íŠ¸ ì‹¤í–‰ ë°©ë²•

### ë°©ë²• 1: Docker Compose (ê¶Œì¥)

#### ì „ì²´ ì‹œìŠ¤í…œ ì‹¤í–‰
```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f

# ì¢…ë£Œ
docker-compose down
```

#### ê°œë³„ ì„œë¹„ìŠ¤ ì‹¤í–‰
```bash
# ë°ì´í„°ë² ì´ìŠ¤ë§Œ ì‹¤í–‰
docker-compose up -d postgres redis influxdb

# ë°±ì—”ë“œë§Œ ì‹¤í–‰  
docker-compose up -d backend

# Grafanaë§Œ ì‹¤í–‰
docker-compose up -d grafana
```

### ë°©ë²• 2: ë¡œì»¬ ì‹¤í–‰

#### PostgreSQL ì„¤ì • (Docker ì‚¬ìš©)
```bash
# PostgreSQL + TimescaleDB ì‹¤í–‰
docker run -d --name stock-postgres \
  -e POSTGRES_DB=stocktrading \
  -e POSTGRES_USER=admin \
  -e POSTGRES_PASSWORD=admin123 \
  -p 5435:5432 \
  -v $(pwd)/database/init.sql:/docker-entrypoint-initdb.d/init.sql \
  timescale/timescaledb:latest-pg15
```

#### Redis ì‹¤í–‰
```bash
docker run -d --name stock-redis -p 6380:6379 redis:7-alpine
```

#### FastAPI ì„œë²„ ì‹¤í–‰
```bash
cd backend
python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

#### Celery Worker ì‹¤í–‰
```bash
# í„°ë¯¸ë„ 1: Worker
cd backend  
celery -A celery_app worker --loglevel=info

# í„°ë¯¸ë„ 2: Beat Scheduler
celery -A celery_app beat --loglevel=info
```

### ë°©ë²• 3: ë‹¨ë… ë°ëª¨ ì‹¤í–‰

#### Windows
```cmd
# ê°„ë‹¨ ì‹¤í–‰
run_demo.bat

# ë˜ëŠ” ì§ì ‘ ì‹¤í–‰
pip install yfinance pandas numpy
python demo.py
```

#### Linux/Mac
```bash
pip install yfinance pandas numpy
python demo.py
```

---

## ğŸ“± ê¸°ë³¸ ì‚¬ìš©ë²•

### 1. ì‹œìŠ¤í…œ ì ‘ì† í™•ì¸

ì‹¤í–‰ í›„ ë‹¤ìŒ URLë“¤ì´ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸:

| ì„œë¹„ìŠ¤ | URL | ì„¤ëª… |
|--------|-----|------|
| API ì„œë²„ | http://localhost:8000 | ë©”ì¸ API |
| API ë¬¸ì„œ | http://localhost:8000/docs | Swagger UI |
| Grafana | http://localhost:3000 | ëŒ€ì‹œë³´ë“œ (admin/admin123) |

### 2. ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸

#### APIë¥¼ í†µí•œ íšŒì›ê°€ì…
```bash
# curl ì‚¬ìš©
curl -X POST "http://localhost:8000/api/v1/users/register" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "investor",
    "email": "investor@example.com", 
    "password": "password123",
    "initial_capital": 10000000
  }'
```

#### ë¡œê·¸ì¸ ë° í† í° íšë“
```bash
curl -X POST "http://localhost:8000/api/v1/users/token" \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=investor&password=password123"
```

#### Python í´ë¼ì´ì–¸íŠ¸ ì˜ˆì œ
```python
import requests

# íšŒì›ê°€ì…
response = requests.post("http://localhost:8000/api/v1/users/register", json={
    "username": "investor",
    "email": "investor@example.com",
    "password": "password123",
    "initial_capital": 10000000
})

# ë¡œê·¸ì¸
token_response = requests.post("http://localhost:8000/api/v1/users/token", data={
    "username": "investor",
    "password": "password123"
})
token = token_response.json()["access_token"]

# í—¤ë”ì— í† í° í¬í•¨
headers = {"Authorization": f"Bearer {token}"}
```

---

## ğŸ“ˆ ì£¼ê°€ ë°ì´í„° ìˆ˜ì§‘

### 1. ìˆ˜ë™ ë°ì´í„° ì—…ë°ì´íŠ¸

#### ê°œë³„ ì¢…ëª© ì—…ë°ì´íŠ¸
```bash
# curl ì‚¬ìš© (í† í° í•„ìš”)
curl -X POST "http://localhost:8000/api/v1/stocks/update/005930.KS" \
  -H "Authorization: Bearer YOUR_TOKEN"

# ë¯¸êµ­ ì£¼ì‹
curl -X POST "http://localhost:8000/api/v1/stocks/update/AAPL" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

#### ë‹¤ì¤‘ ì¢…ëª© ì¼ê´„ ì—…ë°ì´íŠ¸
```python
import requests

headers = {"Authorization": f"Bearer {token}"}
tickers = ["005930.KS", "000660.KS", "AAPL", "NVDA", "TSLA"]

response = requests.post(
    "http://localhost:8000/api/v1/stocks/update-batch",
    headers=headers,
    json=tickers
)
print(response.json())
```

### 2. ìë™ ë°ì´í„° ìˆ˜ì§‘ ì„¤ì •

#### Celery ìŠ¤ì¼€ì¤„ëŸ¬ í™•ì¸
```bash
# ìŠ¤ì¼€ì¤„ë§ ìƒíƒœ í™•ì¸
celery -A celery_app inspect scheduled

# í™œì„± ì‘ì—… í™•ì¸  
celery -A celery_app inspect active
```

#### ìˆ˜ì§‘ ì£¼ê¸° ë³€ê²½
```python
# celery_app.pyì—ì„œ ìˆ˜ì •
beat_schedule={
    'update-stock-data-daily': {
        'task': 'celery_app.update_all_stocks',
        'schedule': crontab(hour=16, minute=0),  # ë§¤ì¼ 4ì‹œ
    },
}
```

### 3. ì§€ì› ì¢…ëª© ì¶”ê°€

#### ìƒˆ ì¢…ëª© ì¶”ê°€ ë°©ë²•
```python
# celery_app.pyì˜ DEFAULT_TICKERSì— ì¶”ê°€
DEFAULT_TICKERS = [
    # í•œêµ­ ì£¼ì‹
    '005930.KS',  # ì‚¼ì„±ì „ì
    '035420.KS',  # ë„¤ì´ë²„
    '051910.KS',  # LGí™”í•™ (ìƒˆë¡œ ì¶”ê°€)
    
    # ë¯¸êµ­ ì£¼ì‹  
    'AAPL',       # ì• í”Œ
    'GOOGL',      # êµ¬ê¸€ (ìƒˆë¡œ ì¶”ê°€)
]
```

#### ì¢…ëª© ì •ë³´ í™•ì¸
```python
import yfinance as yf

# ì¢…ëª© ì •ë³´ ì¡°íšŒ
ticker = yf.Ticker("005930.KS")
info = ticker.info
print(f"íšŒì‚¬ëª…: {info.get('longName')}")
print(f"ì„¹í„°: {info.get('sector')}")
print(f"ì‹œê°€ì´ì•¡: {info.get('marketCap'):,}")
```

---

## ğŸ¯ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰

### 1. í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„±

#### ì£¼ì‹ ë§¤ìˆ˜
```python
# ì‚¼ì„±ì „ì 100ì£¼ ë§¤ìˆ˜
requests.post("http://localhost:8000/api/v1/users/portfolio",
    headers=headers,
    json={
        "ticker": "005930.KS",
        "quantity": 100,
        "buy_price": 70000
    }
)

# ì• í”Œ 50ì£¼ ë§¤ìˆ˜  
requests.post("http://localhost:8000/api/v1/users/portfolio",
    headers=headers,
    json={
        "ticker": "AAPL", 
        "quantity": 50,
        "buy_price": 150
    }
)
```

#### ë§¤ë„ ì²˜ë¦¬
```python
# í¬íŠ¸í´ë¦¬ì˜¤ ID í™•ì¸ í›„ ë§¤ë„
requests.post("http://localhost:8000/api/v1/users/portfolio/sell",
    headers=headers,
    json={
        "portfolio_id": 1,
        "sell_price": 75000
    }
)
```

### 2. ë°±í…ŒìŠ¤íŒ… ì‹œë®¬ë ˆì´ì…˜

#### ì‹œë®¬ë ˆì´ì…˜ ì „ëµ ì„¤ì •
```python
strategy_config = {
    "name": "RSI ì—­ì¶”ì„¸ ì „ëµ",
    "start_date": "2024-01-01",
    "end_date": "2024-12-31", 
    "initial_capital": 10000000,
    "indicators": {
        "rsi_oversold": 30,
        "rsi_overbought": 70,
        "stop_loss": 0.05,
        "take_profit": 0.10
    },
    "tickers": ["005930.KS", "AAPL", "NVDA"]
}

# ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰
response = requests.post("http://localhost:8000/api/v1/simulations/run",
    headers=headers,
    json=strategy_config
)
```

### 3. ì»¤ìŠ¤í…€ ì§€í‘œ ê¸°ë°˜ ì „ëµ

#### RSI + MACD ì¡°í•© ì „ëµ
```python
def custom_strategy_signals(df):
    """
    ì»¤ìŠ¤í…€ ë§¤ë§¤ ì „ëµ
    - RSI < 30 AND MACD ê³¨ë“ í¬ë¡œìŠ¤ â†’ ë§¤ìˆ˜
    - RSI > 70 AND MACD ë°ë“œí¬ë¡œìŠ¤ â†’ ë§¤ë„
    """
    signals = []
    
    for i in range(1, len(df)):
        current = df.iloc[i]
        previous = df.iloc[i-1]
        
        # ë§¤ìˆ˜ ì‹ í˜¸
        if (current['rsi'] < 30 and 
            current['macd'] > current['macd_signal'] and
            previous['macd'] <= previous['macd_signal']):
            signals.append({
                'date': current.name,
                'action': 'BUY',
                'price': current['close'],
                'reason': 'RSI oversold + MACD golden cross'
            })
            
        # ë§¤ë„ ì‹ í˜¸  
        elif (current['rsi'] > 70 and
              current['macd'] < current['macd_signal'] and  
              previous['macd'] >= previous['macd_signal']):
            signals.append({
                'date': current.name,
                'action': 'SELL', 
                'price': current['close'],
                'reason': 'RSI overbought + MACD death cross'
            })
    
    return signals
```

#### ëª¨ë©˜í…€ + í‰ê· íšŒê·€ ì „ëµ
```python  
momentum_strategy = {
    "name": "ëª¨ë©˜í…€ + í‰ê· íšŒê·€ ì „ëµ",
    "rules": {
        "momentum_period": 20,    # 20ì¼ ëª¨ë©˜í…€
        "reversion_period": 5,    # 5ì¼ í‰ê· íšŒê·€  
        "momentum_threshold": 0.05,  # 5% ì´ìƒ ìƒìŠ¹
        "reversion_threshold": -0.03, # 3% ì´ìƒ í•˜ë½
    },
    "risk_management": {
        "max_position_size": 0.1,  # í¬íŠ¸í´ë¦¬ì˜¤ì˜ 10%
        "stop_loss": 0.08,         # 8% ì†ì ˆ
        "take_profit": 0.15        # 15% ìµì ˆ
    }
}
```

### 4. ì„±ê³¼ ë¶„ì„

#### í¬íŠ¸í´ë¦¬ì˜¤ ì„±ê³¼ ì¡°íšŒ
```python
# ëŒ€ì‹œë³´ë“œ ë°ì´í„° ì¡°íšŒ
dashboard = requests.get("http://localhost:8000/api/v1/users/dashboard", headers=headers)
data = dashboard.json()

print(f"ì´ ìì‚°: â‚©{data['total_assets']:,}")
print(f"ì´ ì†ìµ: â‚©{data['total_profit_loss']:,}")  
print(f"ìˆ˜ìµë¥ : {data['total_profit_loss_percentage']:.2f}%")
print(f"í™œì„± í¬ì§€ì…˜: {data['active_positions']}ê°œ")
```

#### ìƒì„¸ ì„±ê³¼ ë¶„ì„
```python
for position in data['portfolios']:
    print(f"\nì¢…ëª©: {position['ticker']}")
    print(f"ë³´ìœ ìˆ˜ëŸ‰: {position['quantity']:,}ì£¼")
    print(f"í‰ê· ë‹¨ê°€: â‚©{position['buy_price']:,}")
    print(f"í˜„ì¬ê°€: â‚©{position.get('current_price', 0):,}")
    print(f"í‰ê°€ì†ìµ: â‚©{position.get('profit_loss', 0):,}")
    print(f"ìˆ˜ìµë¥ : {position.get('profit_loss_percentage', 0):+.2f}%")
```

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

### 1. Grafana ëŒ€ì‹œë³´ë“œ ì ‘ì†

#### ì´ˆê¸° ì„¤ì •
1. **http://localhost:3000** ì ‘ì†
2. **ë¡œê·¸ì¸**: admin / admin123  
3. **íŒ¨ìŠ¤ì›Œë“œ ë³€ê²½** (ì˜µì…˜)

#### ëŒ€ì‹œë³´ë“œ êµ¬ì„±
- **Stock Price Trends**: ì£¼ê°€ ì¶”ì´ ì°¨íŠ¸
- **RSI Indicators**: RSI ê²Œì´ì§€ 
- **Portfolio Performance**: í¬íŠ¸í´ë¦¬ì˜¤ ì„±ê³¼ í…Œì´ë¸”
- **Portfolio Distribution**: ìì‚° ë°°ë¶„ íŒŒì´ì°¨íŠ¸  
- **AI Recommendations**: AI ì¶”ì²œ ëª©ë¡

### 2. ì»¤ìŠ¤í…€ ì°¨íŠ¸ ìƒì„±

#### ìƒˆ íŒ¨ë„ ì¶”ê°€
1. **Dashboard â†’ Add Panel** í´ë¦­
2. **Data Source**: PostgreSQL ì„ íƒ
3. **Query ì‘ì„±**:

```sql
-- ìµœê·¼ 30ì¼ ìˆ˜ìµë¥  ì°¨íŠ¸
SELECT 
  date,
  ticker,
  (close_price - LAG(close_price, 1) OVER (PARTITION BY ticker ORDER BY date)) 
  / LAG(close_price, 1) OVER (PARTITION BY ticker ORDER BY date) * 100 as daily_return
FROM stock_prices 
WHERE date >= NOW() - INTERVAL '30 days'
ORDER BY date
```

#### ê¸°ìˆ ì§€í‘œ íˆíŠ¸ë§µ
```sql
-- RSI íˆíŠ¸ë§µ (ì¢…ëª©ë³„ ê³¼ë§¤ìˆ˜/ê³¼ë§¤ë„ ìƒíƒœ)
SELECT 
  ticker,
  CASE 
    WHEN rsi < 30 THEN 'Oversold'
    WHEN rsi > 70 THEN 'Overbought'  
    ELSE 'Neutral'
  END as rsi_status,
  rsi
FROM technical_indicators
WHERE date = (SELECT MAX(date) FROM technical_indicators)
```

### 3. ì•Œë¦¼ ì„¤ì •

#### RSI ì•Œë¦¼ ê·œì¹™
```json
{
  "alert": {
    "name": "RSI Oversold Alert",
    "frequency": "10s",
    "conditions": [
      {
        "query": "A",
        "reducer": "last",
        "type": "query",
        "params": ["A"]
      }
    ],
    "executionErrorState": "alerting",
    "noDataState": "no_data",
    "for": "1m"
  }
}
```

#### í¬íŠ¸í´ë¦¬ì˜¤ ì†ì‹¤ ì•Œë¦¼
```sql
-- 5% ì´ìƒ ì†ì‹¤ ì‹œ ì•Œë¦¼
SELECT 
  user_id,
  total_profit_loss_percentage
FROM (
  SELECT 
    p.user_id,
    SUM((sp.close_price - p.buy_price) * p.quantity) / SUM(p.buy_price * p.quantity) * 100 as total_profit_loss_percentage
  FROM portfolios p
  JOIN stock_prices sp ON p.ticker = sp.ticker
  WHERE p.status = 'holding'
  AND sp.date = CURRENT_DATE
  GROUP BY p.user_id
) t
WHERE total_profit_loss_percentage < -5
```

---

## ğŸ”§ API ì‚¬ìš© ê°€ì´ë“œ

### 1. ì¸ì¦ í† í° ê´€ë¦¬

#### í† í° ê°±ì‹ 
```python
class StockAPIClient:
    def __init__(self, base_url="http://localhost:8000"):
        self.base_url = base_url
        self.token = None
        
    def login(self, username, password):
        response = requests.post(f"{self.base_url}/api/v1/users/token", 
            data={"username": username, "password": password})
        self.token = response.json()["access_token"]
        
    def get_headers(self):
        return {"Authorization": f"Bearer {self.token}"}
        
    def get_dashboard(self):
        return requests.get(f"{self.base_url}/api/v1/users/dashboard", 
                          headers=self.get_headers())
```

### 2. ì£¼ì‹ ë¶„ì„ API í™œìš©

#### ê¸°ìˆ ì§€í‘œ ì¡°íšŒ ë° ë¶„ì„
```python
def analyze_stock(client, ticker, days=30):
    """ì¢…ëª© ê¸°ìˆ ë¶„ì„ ë¦¬í¬íŠ¸ ìƒì„±"""
    
    # ê°€ê²© ë°ì´í„° ì¡°íšŒ
    prices = client.get(f"/api/v1/stocks/{ticker}/prices?days={days}")
    
    # ê¸°ìˆ ì§€í‘œ ì¡°íšŒ  
    indicators = client.get(f"/api/v1/stocks/{ticker}/indicators?days={days}")
    
    # ì¢…í•© ë¶„ì„
    analysis = client.get(f"/api/v1/stocks/{ticker}/analysis")
    
    return {
        'ticker': ticker,
        'latest_price': prices.json()[-1]['close'],
        'signals': analysis.json()['signals'],
        'recommendation': generate_recommendation(indicators.json())
    }

def generate_recommendation(indicators):
    """ì§€í‘œ ê¸°ë°˜ ì¶”ì²œ ìƒì„±"""
    latest = indicators[-1]
    
    score = 0
    reasons = []
    
    # RSI í‰ê°€
    if latest['rsi'] < 30:
        score += 2
        reasons.append("RSI ê³¼ë§¤ë„")
    elif latest['rsi'] > 70:
        score -= 2  
        reasons.append("RSI ê³¼ë§¤ìˆ˜")
        
    # MACD í‰ê°€
    if latest['macd'] > latest['macd_signal']:
        score += 1
        reasons.append("MACD ìƒìŠ¹ì„¸")
    else:
        score -= 1
        reasons.append("MACD í•˜ë½ì„¸")
    
    # ê²°ë¡ 
    if score >= 2:
        return {"action": "BUY", "confidence": min(score * 20, 100), "reasons": reasons}
    elif score <= -2:
        return {"action": "SELL", "confidence": min(abs(score) * 20, 100), "reasons": reasons}
    else:
        return {"action": "HOLD", "confidence": 50, "reasons": reasons}
```

### 3. ìŠ¤í¬ë¦¬ë‹ API í™œìš©

#### ì¡°ê±´ë¶€ ì¢…ëª© ê²€ìƒ‰
```python
def find_trading_opportunities(client):
    """íˆ¬ì ê¸°íšŒ íƒì§€"""
    
    # ê³¼ë§¤ë„ ì¢…ëª© ê²€ìƒ‰
    oversold = client.get("/api/v1/stocks/screen/oversold").json()
    
    # MACD í¬ë¡œìŠ¤ì˜¤ë²„ ê²€ìƒ‰  
    crossovers = client.get("/api/v1/stocks/screen/macd-crossover").json()
    
    # ê¸°íšŒ ì¢…ëª© í•„í„°ë§
    opportunities = []
    
    for stock in oversold['oversold_stocks']:
        if stock['rsi'] < 25:  # ê·¹ë„ ê³¼ë§¤ë„
            opportunities.append({
                'ticker': stock['ticker'],
                'type': 'oversold_recovery',
                'rsi': stock['rsi'],
                'confidence': 75
            })
    
    for cross in crossovers['crossovers']:
        if cross['type'] == 'bullish':
            opportunities.append({
                'ticker': cross['ticker'], 
                'type': 'macd_bullish',
                'macd': cross['macd'],
                'confidence': 70
            })
            
    return sorted(opportunities, key=lambda x: x['confidence'], reverse=True)
```

### 4. ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

#### WebSocket ì—°ê²° (í–¥í›„ êµ¬í˜„)
```python
import websocket
import json

def on_price_update(ws, message):
    """ì‹¤ì‹œê°„ ê°€ê²© ì—…ë°ì´íŠ¸ ì²˜ë¦¬"""
    data = json.loads(message)
    
    print(f"{data['ticker']}: â‚©{data['price']:,} ({data['change']:+.2f}%)")
    
    # ì•Œë¦¼ ì¡°ê±´ í™•ì¸
    if abs(data['change']) > 5:  # 5% ì´ìƒ ë³€ë™
        send_alert(f"{data['ticker']} ê¸‰ë“±/ê¸‰ë½: {data['change']:+.2f}%")

# WebSocket ì—°ê²° (ì˜ˆì‹œ)        
ws = websocket.WebSocketApp("ws://localhost:8000/ws/prices",
                          on_message=on_price_update)
```

---

## ğŸ› ë¬¸ì œ í•´ê²°

### 1. ì¼ë°˜ì ì¸ ì˜¤ë¥˜

#### í¬íŠ¸ ì¶©ëŒ ì˜¤ë¥˜
```bash
Error: Port 5432 is already in use

í•´ê²°ë°©ë²•:
1. ê¸°ì¡´ PostgreSQL ì„œë¹„ìŠ¤ ì¤‘ì§€
2. docker-compose.ymlì—ì„œ í¬íŠ¸ ë³€ê²½ (5432 â†’ 5435)
3. DATABASE_URL í™˜ê²½ë³€ìˆ˜ ì—…ë°ì´íŠ¸
```

#### Docker ë©”ëª¨ë¦¬ ë¶€ì¡±
```bash
Error: Container killed (OOMKilled)

í•´ê²°ë°©ë²•:
1. Docker Desktop â†’ Settings â†’ Resources
2. Memoryë¥¼ 8GB ì´ìƒìœ¼ë¡œ ì¦ê°€
3. ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
```

#### yfinance API ì œí•œ
```python
Error: Too many requests

í•´ê²°ë°©ë²•:
1. ìš”ì²­ ê°„ê²© ì¶”ê°€: time.sleep(1)
2. ë°°ì¹˜ í¬ê¸° ì¶•ì†Œ
3. í”„ë¦¬ë¯¸ì—„ API í‚¤ ì‚¬ìš© (ì˜µì…˜)
```

### 2. ë°ì´í„°ë² ì´ìŠ¤ ë¬¸ì œ

#### ì—°ê²° ì‹¤íŒ¨
```bash
# ì—°ê²° í…ŒìŠ¤íŠ¸
docker exec -it stock-postgres psql -U admin -d stocktrading

# í…Œì´ë¸” í™•ì¸
\dt

# ë°ì´í„° í™•ì¸  
SELECT COUNT(*) FROM stock_prices;
```

#### ë§ˆì´ê·¸ë ˆì´ì…˜ ì˜¤ë¥˜
```bash
# ìˆ˜ë™ ìŠ¤í‚¤ë§ˆ ì¬ìƒì„±
docker exec -i stock-postgres psql -U admin -d stocktrading < database/init.sql
```

### 3. Celery ì‘ì—… ë¬¸ì œ

#### Worker ìƒíƒœ í™•ì¸
```bash
# Worker ëª©ë¡
celery -A celery_app inspect stats

# ì‘ì—… í ìƒíƒœ
celery -A celery_app inspect reserved

# ì‹¤íŒ¨í•œ ì‘ì—… í™•ì¸
celery -A celery_app events
```

#### ìŠ¤ì¼€ì¤„ ë¬¸ì œ í•´ê²°
```python
# ìˆ˜ë™ ì‘ì—… ì‹¤í–‰
from celery_app import update_single_stock
result = update_single_stock.delay('005930.KS')
print(result.get())
```

### 4. Grafana ì„¤ì • ë¬¸ì œ

#### ë°ì´í„°ì†ŒìŠ¤ ì—°ê²° ì‹¤íŒ¨
1. **Configuration â†’ Data Sources** ì´ë™
2. PostgreSQL ì„¤ì • í™•ì¸:
   - Host: `postgres:5432` (ì»¨í…Œì´ë„ˆ ë‚´ë¶€) ë˜ëŠ” `localhost:5435` (ì™¸ë¶€)
   - Database: `stocktrading`
   - User/Password: `admin/admin123`

#### ëŒ€ì‹œë³´ë“œ ë¡œë“œ ì‹¤íŒ¨
```bash
# ëŒ€ì‹œë³´ë“œ ì¬ë°°í¬
docker-compose restart grafana

# ìˆ˜ë™ ì„í¬íŠ¸
Grafana UI â†’ + â†’ Import â†’ monitoring/grafana/dashboards/stock-monitoring.json
```

### 5. ì„±ëŠ¥ ìµœì í™”

#### ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ìŠ¤ ì¶”ê°€
```sql
-- ìì£¼ ì¡°íšŒí•˜ëŠ” ì»¬ëŸ¼ì— ì¸ë±ìŠ¤ ì¶”ê°€
CREATE INDEX CONCURRENTLY idx_stock_prices_ticker_date_desc 
ON stock_prices(ticker, date DESC);

-- ê¸°ìˆ ì§€í‘œ ì¡°íšŒ ìµœì í™”
CREATE INDEX CONCURRENTLY idx_technical_indicators_ticker_date_desc
ON technical_indicators(ticker, date DESC);
```

#### ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”
```python
# ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì‹œ ì²­í¬ ë‹¨ìœ„ë¡œ ì²˜ë¦¬
def process_large_dataset(ticker, chunk_size=1000):
    for chunk in pd.read_sql(sql_query, con=engine, chunksize=chunk_size):
        process_chunk(chunk)
        gc.collect()  # ë©”ëª¨ë¦¬ ì •ë¦¬
```

---

## ğŸ“š ê³ ê¸‰ ì‚¬ìš©ë²•

### 1. ì»¤ìŠ¤í…€ ì§€í‘œ ê°œë°œ

#### ìƒˆë¡œìš´ ê¸°ìˆ ì§€í‘œ ì¶”ê°€
```python
# indicators.pyì— ì¶”ê°€
class CustomIndicators:
    @staticmethod
    def williams_r(df, period=14):
        """Williams %R ê³„ì‚°"""
        highest_high = df['High'].rolling(window=period).max()
        lowest_low = df['Low'].rolling(window=period).min()
        williams_r = -100 * (highest_high - df['Close']) / (highest_high - lowest_low)
        return williams_r
    
    @staticmethod  
    def commodity_channel_index(df, period=20):
        """CCI (Commodity Channel Index) ê³„ì‚°"""
        typical_price = (df['High'] + df['Low'] + df['Close']) / 3
        sma = typical_price.rolling(window=period).mean()
        mad = typical_price.rolling(window=period).apply(
            lambda x: pd.Series(x).mad())
        cci = (typical_price - sma) / (0.015 * mad)
        return cci
```

### 2. ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ

#### Discord/Slack ì•Œë¦¼ ì—°ë™
```python
import requests

def send_discord_alert(message):
    webhook_url = "YOUR_DISCORD_WEBHOOK_URL"
    
    payload = {
        "content": f"ğŸš¨ ì£¼ì‹ ì•Œë¦¼: {message}",
        "username": "Stock Bot"
    }
    
    requests.post(webhook_url, json=payload)

# ì‚¬ìš© ì˜ˆì‹œ
def check_alerts():
    oversold = get_oversold_stocks()
    for stock in oversold:
        if stock['rsi'] < 20:
            send_discord_alert(f"{stock['ticker']} RSI {stock['rsi']:.1f} ê·¹ë„ ê³¼ë§¤ë„!")
```

### 3. ìë™ ë§¤ë§¤ ì—°ë™ (ì‹œë®¬ë ˆì´ì…˜)

#### ëª¨ì˜ ìë™ë§¤ë§¤ ì‹œìŠ¤í…œ
```python
class AutoTrader:
    def __init__(self, client):
        self.client = client
        self.active = False
        
    def start_trading(self):
        self.active = True
        
        while self.active:
            recommendations = self.client.get("/api/v1/ai/recommendations").json()
            
            for rec in recommendations:
                if rec['confidence_score'] > 80:
                    if rec['recommendation_type'] == 'BUY':
                        self.execute_buy(rec['ticker'], rec['target_price'])
                    elif rec['recommendation_type'] == 'SELL':
                        self.execute_sell(rec['ticker'], rec['target_price'])
            
            time.sleep(300)  # 5ë¶„ ëŒ€ê¸°
    
    def execute_buy(self, ticker, target_price):
        print(f"ëª¨ì˜ ë§¤ìˆ˜: {ticker} @ {target_price}")
        # ì‹¤ì œ ê±°ë˜ì†Œ API ì—°ë™ ì‹œ êµ¬í˜„
        
    def execute_sell(self, ticker, target_price):  
        print(f"ëª¨ì˜ ë§¤ë„: {ticker} @ {target_price}")
        # ì‹¤ì œ ê±°ë˜ì†Œ API ì—°ë™ ì‹œ êµ¬í˜„
```

---

## ğŸ“ ì§€ì› ë° ì»¤ë®¤ë‹ˆí‹°

### ë„ì›€ë§ ë¦¬ì†ŒìŠ¤
- **API ë¬¸ì„œ**: http://localhost:8000/docs
- **GitHub Issues**: ë²„ê·¸ ë¦¬í¬íŠ¸ ë° ê¸°ëŠ¥ ìš”ì²­
- **Wiki**: ìƒì„¸ ê°œë°œ ê°€ì´ë“œ

### ì»¤ë®¤ë‹ˆí‹° ê¸°ì—¬
1. **ë²„ê·¸ ë¦¬í¬íŠ¸**: ìƒì„¸í•œ ì¬í˜„ ë‹¨ê³„ì™€ í•¨ê»˜ ì´ìŠˆ ë“±ë¡
2. **ê¸°ëŠ¥ ì œì•ˆ**: ì‚¬ìš© ì‚¬ë¡€ì™€ í•¨ê»˜ ì œì•ˆì„œ ì‘ì„±  
3. **ì½”ë“œ ê¸°ì—¬**: Fork â†’ Feature Branch â†’ Pull Request

### ìƒìš© ì§€ì› (ê³„íš)
- ì „ìš© ë°ì´í„° í”¼ë“œ ì—°ë™
- ê³ ê¸‰ ML ëª¨ë¸ ê°œë°œ
- ì»¤ìŠ¤í…€ ëŒ€ì‹œë³´ë“œ êµ¬ì¶•
- ì‹¤ì‹œê°„ ê±°ë˜ ì‹œìŠ¤í…œ ì—°ë™

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### íˆ¬ì ê´€ë ¨
- **êµìœ¡ ëª©ì **: ì‹¤ì œ íˆ¬ì ì „ ì¶©ë¶„í•œ ê²€í†  í•„ìš”
- **ìœ„í—˜ ê´€ë¦¬**: ì†ì‹¤ ê°€ëŠ¥ì„±ì„ í•­ìƒ ê³ ë ¤
- **ê·œì œ ì¤€ìˆ˜**: í•´ë‹¹ ì§€ì—­ ê¸ˆìœµ ê·œì œ í™•ì¸

### ê¸°ìˆ ì  ì œí•œ
- **ë°ì´í„° ì§€ì—°**: Yahoo Finance 15ë¶„ ì§€ì—° ë°ì´í„°
- **API ì œí•œ**: ê³¼ë„í•œ ìš”ì²­ ì‹œ ì¼ì‹œ ì°¨ë‹¨ ê°€ëŠ¥
- **ì‹œì¥ íœ´ì¼**: ì£¼ë§/ê³µíœ´ì¼ ë°ì´í„° ì—…ë°ì´íŠ¸ ì—†ìŒ

### ë³´ì•ˆ ê³ ë ¤ì‚¬í•­  
- **JWT ì‹œí¬ë¦¿**: í”„ë¡œë•ì…˜ì—ì„œ ê°•ë ¥í•œ í‚¤ ì‚¬ìš©
- **ë°ì´í„°ë² ì´ìŠ¤**: ì™¸ë¶€ ì ‘ê·¼ ì°¨ë‹¨
- **API í‚¤**: í™˜ê²½ë³€ìˆ˜ë¡œ ì•ˆì „í•˜ê²Œ ê´€ë¦¬

---

**ë¬¸ì„œ ë²„ì „**: v1.0.0  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-08-29  
**ì‘ì„±ì**: Claude Code Assistant